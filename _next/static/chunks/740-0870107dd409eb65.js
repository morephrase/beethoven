"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[740],{1437:function(e,n){n.Z={src:"/_next/static/media/scales.f12bfe26.svg",height:72,width:72}},19178:function(e,n,t){t.d(n,{i:function(){return u}});var r=t(26042),o=t(69396),i=t(99534),s=t(85893),a=t(48641),c=t(85388);function u(e){var n=e.children,t=e.isVisible,u=(0,i.Z)(e,["children","isVisible"]);return(0,s.jsx)(s.Fragment,{children:t&&(0,s.jsx)(c.E.div,{animate:{opacity:1},initial:{opacity:0},style:{width:"100%"},children:(0,s.jsx)(a.xu,(0,o.Z)((0,r.Z)({},u),{children:n}))})})}},30663:function(e,n,t){t.d(n,{Z:function(){return m}});var r=t(26042),o=t(69396),i=t(85893),s=t(25886),a=t(48641),c=t(47741),u=t(29352),l=t(99534);function d(e){var n=e.children,t=(0,l.Z)(e,["children"]);return(0,i.jsx)(a.xv,(0,o.Z)((0,r.Z)({px:"1",color:"gray.200"},t),{children:n}))}var p=t(73973),f=t(28567),h=t(29907);var m=function(e){var n=e.data,t=e.textProps,l=e.onlySparkles,m=e.placement,v=e.aprLabel,x=e.sparklesSize,g=e.poolId,b=e.apr,A=s.xo,j=g&&Object.keys(h.$.warnings.poolList).includes(g),y=b||(0,f.j)(n.apr),k=n.items.find((function(e){return"Voting APR*"===e.title}));return j?(0,i.jsx)(a.Ug,{align:"center",children:(0,i.jsx)(a.xv,(0,o.Z)((0,r.Z)({},t),{children:"0.00%"}))}):(0,i.jsxs)(s.J2,{trigger:"hover",placement:m,children:[(0,i.jsxs)(a.Ug,{align:"center",children:[!l&&(0,i.jsxs)(a.xv,(0,o.Z)((0,r.Z)({fontSize:"1rem",fontWeight:"semibold",mr:"1"},t),{children:[y,v?" APR":""]})),(0,i.jsx)(A,{children:(0,i.jsx)(c.zx,{minWidth:"0",height:"auto",variant:"unstyled",_active:{outline:"none"},_focus:{outline:"none"},children:n.hasRewardApr?(0,i.jsx)(u.Z,{width:"sm"===x?18:24,height:"sm"===x?19:25}):(0,i.jsx)(a.xu,{color:"gray.200",children:(0,i.jsx)(p.Z,{size:"sm"===x?18:24})})})})]}),(0,i.jsxs)(s.yk,{w:"fit-content",bgColor:"beets.base.800",shadow:"2xl",children:[(0,i.jsx)(s.Yt,{bgColor:"whiteAlpha.100",children:(0,i.jsxs)(a.xv,{textAlign:"left",children:["Total APR",(0,i.jsx)("br",{}),(0,i.jsx)("span",{style:{fontSize:"1.5rem"},children:(0,f.j)(n.apr)})]})}),(0,i.jsxs)(a.xu,{p:"2",fontSize:"sm",bgColor:"whiteAlpha.200",children:[n.items.map((function(e,n){var t;return(0,i.jsxs)(a.xu,{children:[(0,i.jsxs)(a.kC,{children:[(0,f.j)(e.apr)," ",(0,i.jsx)(d,{children:e.title})]}),null===(t=e.subItems)||void 0===t?void 0:t.map((function(n,t){var r,o=1===(null===(r=e.subItems)||void 0===r?void 0:r.length),s=0===t;return(0,i.jsxs)(a.kC,{align:"center",children:[(0,i.jsx)(a.xu,{w:"1px",m:"0.25rem",h:o?"0.8rem":s?"1rem":"2rem",mt:o?"-0.5rem":s?"-0.3rem":"-1.7rem",bgColor:"gray.100"}),(0,i.jsx)(a.xu,{h:"1px",w:"0.75rem",mr:"0.25rem",ml:"-0.25rem",bgColor:"gray.100"}),(0,i.jsxs)(a.kC,{children:[(0,f.j)(n.apr)," ",(0,i.jsx)(d,{children:n.title})]})]},t)}))]},n)})),k&&(0,i.jsx)(a.xv,{color:"gray.200",fontSize:"sm",maxW:"300px",pt:"2",textAlign:"left",children:"* To receive Voting APR you must vote for incentivized pools in the bi-weekly gauge vote. APR is dependent on your vote distribution."})]})]})]})}},3998:function(e,n,t){t.d(n,{R:function(){return p}});var r=t(26042),o=t(69396),i=t(85893),s=t(25886),a=t(48641),c=t(73973),u=t(25675),l=t.n(u),d=t(41472);function p(e){var n=e.iconSize,t=e.infoText,u=e.moreInfoUrl,p=e.moreInfoLinkText,f=e.label,h=e.labelProps;return(0,i.jsxs)(s.J2,{trigger:"hover",children:[(0,i.jsxs)(a.Ug,{spacing:"1",children:[(0,i.jsx)(a.xv,(0,o.Z)((0,r.Z)({},h),{children:f})),(0,i.jsx)(s.xo,{children:(0,i.jsx)("a",{children:(0,i.jsx)(c.Z,{size:n||16,color:"currentColor"})})})]}),(0,i.jsx)(s.yk,{color:"white",fontSize:".925rem",border:"0",maxWidth:"400px",bg:"beets.base.400",shadow:"2xl",borderRadius:"md",p:"2",children:(0,i.jsxs)(a.Ug,{spacing:"2",children:[(0,i.jsx)(l(),{width:"120px",height:"120px",src:d.Z,alt:"thinking-emoji"}),(0,i.jsxs)(a.xu,{children:[t,u?" ":"",u?(0,i.jsxs)(a.rU,{color:"beets.highlight",href:u,target:"_blank",children:[p||"More info","."]}):null]})]})})]})}},42701:function(e,n,t){t.d(n,{_:function(){return y}});var r=t(26042),o=t(69396),i=t(99534),s=t(828),a=t(85893),c=t(39653),u=t(48641),l=t(20979),d=t(97113),p=t(51797),f=t(86742),h=t(57290),m=t(56371),v=t(74590),x=t(27454),g=t(42179),b=t(8502),A=t(29907),j=t(20335);function y(e){var n=e.balance,t=e.tokenOptions,y=e.selectedTokenOption,k=e.setInputAmount,Z=e.value,S=e.proportionalAmount,w=e.setSelectedTokenOption,I=e.isWithdraw,P=(0,i.Z)(e,["balance","tokenOptions","selectedTokenOption","setInputAmount","value","proportionalAmount","setSelectedTokenOption","isWithdraw"]),O=(0,p.yA)().formattedPrice,C=parseFloat(n)>0,T=!Z||(0,m.parseUnits)(Z,y.decimals).lte((0,m.parseUnits)(n,y.decimals)),B=(0,s.Z)((0,c.kt)(!1),2),U=B[0],R=B[1],L=Math.round(C?parseFloat(Z||"0")/parseFloat(n)*100:0),W=y.address===A.$.eth.address.toLowerCase(),F=(0,s.Z)((0,c.kt)(!1),2),E=F[0],z=F[1],N=W?(0,j.S5)((0,m.parseUnits)(n,y.decimals).sub((0,m.parseUnits)(A.$.eth.minGasAmount,y.decimals)).toString(),y.decimals):n;return(0,a.jsxs)(g.L,(0,o.Z)((0,r.Z)({borderRadius:"md",width:"full",px:"2",pt:"2",pb:"1"},P),{children:[(0,a.jsxs)(u.kC,{children:[t.length>1?(0,a.jsx)(u.xu,{flex:"1",children:(0,a.jsx)(b.T,{tokenOptions:t,selectedAddress:y.address,onOptionSelect:function(e){return w(e)},isWithdraw:I})}):(0,a.jsxs)(u.Ug,{spacing:"2",flex:"1",children:[(0,a.jsx)(f.Z,{width:"40px",height:"40px",address:y.address}),(0,a.jsxs)(u.gC,{spacing:"0",alignItems:"flex-start",children:[(0,a.jsx)(u.xv,{fontWeight:"normal",children:null===y||void 0===y?void 0:y.name}),(0,a.jsx)(u.Ug,{spacing:"1",children:(0,a.jsx)(u.xv,{fontWeight:"bold",children:null===y||void 0===y?void 0:y.symbol})})]})]}),(0,a.jsx)(u.xu,{flex:"1",children:(0,a.jsx)(l.II,{type:"number",min:0,placeholder:S?S.slice(0,18):"0",textAlign:"right",value:Z||"",onChange:function(e){var n="";W&&parseFloat(e.currentTarget.value)>parseFloat(N)?(n=N,z.on()):(n=e.currentTarget.value,z.off());var t=(0,v.u)(n,y.decimals);k(t)},isInvalid:!T,_hover:{borderColor:"gray.200"},_focus:{outline:"none"},_placeholder:{color:"gray.400"},color:"gray.100",borderColor:"transparent",border:"2px",bgColor:"blackAlpha.400",fontWeight:"semibold",onKeyDown:v.s,width:"full",pr:"1"})})]}),(0,a.jsx)(u.xu,{mx:"1",mt:"2",children:(0,a.jsxs)(d.iR,{focusThumbOnChange:!1,onChangeStart:function(){return R.on()},onChangeEnd:function(){return R.off()},"aria-label":"slider-".concat(y.symbol),defaultValue:0,value:L>100?0:L,isDisabled:!C,onChange:function(e){var t=(0,x.i$)((0,x.kx)(n,y.decimals).times(e/100),y.decimals);W&&parseFloat(t)>parseFloat(N)?(k(N),z.on()):(k(t),z.off())},children:[(0,a.jsx)(d.Uj,{bg:"gray.400",children:(0,a.jsx)(d.Ms,{})}),(0,a.jsx)(d.gs,{boxSize:3,boxShadow:"xl"}),U?(0,a.jsxs)(d.jz,{value:L,textAlign:"center",color:"white",mt:"3",ml:"-20px",w:"12",fontSize:"xs",width:"40px",borderRadius:"md",children:[L,"%"]}):null]})}),(0,a.jsxs)(u.kC,{ml:"1",alignItems:"center",mb:"1",children:[(0,a.jsx)(u.xu,{flex:"1",height:"18px",children:!U&&(0,a.jsxs)(u.rU,{color:"gray.200",fontSize:"sm",display:"flex",onClick:function(){C&&(k(N),z.on())},_hover:{textDecoration:"none"},cursor:C?"pointer":"default",children:["You have ",(0,h.rY)(n),C?(0,a.jsx)(u.xv,{color:"beets.highlight",ml:"1",children:"Max"}):null]})}),(0,a.jsx)(u.xu,{height:"18px",children:!U&&(0,a.jsx)(u.xv,{color:"gray.200",fontSize:"sm",children:O({address:y.address,amount:Z||"0"})})})]}),W&&E&&(0,a.jsx)(u.xv,{fontSize:"sm",color:"orange",children:"To ensure a smooth transaction, at least ".concat(A.$.eth.minGasAmount," ").concat(y.symbol,"\n                    must be left in your wallet to pay for native fees.")})]}))}},73656:function(e,n,t){t.d(n,{Bp:function(){return l},D5:function(){return d},PJ:function(){return c},vC:function(){return u}});var r=t(26042),o=t(69396),i=t(85893),s=t(3270),a=t(48641),c=(0,t(67294).forwardRef)((function(e,n){var t=e.isTransparent?"transparent":"blackAlpha.400",c=e.isTransparent?"":"bg",u=e.isTransparent?"none":"gray.700";return(0,i.jsx)(s.hz,(0,o.Z)((0,r.Z)({ref:n},e),{background:u,children:(0,i.jsx)(a.xu,{bg:t,children:(0,i.jsx)(a.xu,{className:c,children:e.children})})}))}));function u(e){return(0,i.jsx)(s.xB,(0,r.Z)({px:"4"},e))}function l(e){return(0,i.jsx)(s.fe,(0,r.Z)({px:"4",pb:"6"},e))}function d(e){return(0,i.jsx)(a.X6,(0,r.Z)({size:"md"},e))}c.displayName="BeetsModalContent"},69129:function(e,n,t){t.d(n,{m:function(){return h}});var r=t(85893),o=t(39653),i=t(89242),s=t(48641),a=t(20979),c=t(47741),u=t(46445),l=t(36645),d=t(92077),p=t.n(d),f=t(67294);function h(){var e=(0,o.qY)(),n=e.isOpen,t=e.onOpen,d=e.onClose,h=(0,l.k)(),m=h.slippage,v=h.setSlippage,x=(0,f.useState)(""),g=x[0],b=x[1],A=""!==g&&parseFloat(g)<50&&parseFloat(g)>=.01;return(0,r.jsxs)(i.v2,{isOpen:n,onClose:d,onOpen:t,children:[(0,r.jsx)(i.j2,{as:s.rU,color:"beets.green",userSelect:"none",children:p()(m).format("0.0[000]%")}),(0,r.jsxs)(i.qy,{children:[(0,r.jsx)(i.sN,{onClick:function(){return v("0.001")},children:"0.1%"}),(0,r.jsx)(i.sN,{onClick:function(){return v("0.005")},children:"0.5%"}),(0,r.jsx)(i.sN,{onClick:function(){return v("0.01")},children:"1.0%"}),(0,r.jsxs)(s.kC,{px:"2",pt:"2",children:[(0,r.jsx)(a.II,{placeholder:"Custom",flex:"1",width:"100px",mr:"1",type:"number",value:g,onChange:function(e){return b(e.currentTarget.value)},onKeyUp:function(e){"Enter"===e.key&&A&&(v("".concat(parseFloat(g)/100)),d())}}),(0,r.jsx)(c.hU,{"aria-label":"save-custom",icon:(0,r.jsx)(u.Z,{}),isDisabled:!A,color:"beets.green",onClick:function(){v("".concat(parseFloat(g)/100)),d()}})]})]})]})}},24937:function(e,n,t){t.d(n,{G:function(){return u}});var r=t(99534),o=t(85893),i=t(48641),s=t(47093),a=t(23450),c=t(59046);function u(e){var n,t=e.query,u=(e.showSpinnerOnPending,(0,r.Z)(e,["query","showSpinnerOnPending"]),t.isFailed,t.error,t.txReceipt),l=t.txResponse;t.isConfirmed,t.isPending;return(0,o.jsxs)(i.gC,{width:"full",py:"4",backgroundColor:"blackAlpha.500",px:"5",children:[(0,o.jsx)(i.xv,{fontSize:"lg",fontWeight:"semibold",children:"Transaction details"}),(null===l||void 0===l?void 0:l.hash)&&(0,o.jsxs)(i.Ug,{width:"full",justifyContent:"space-between",children:[(0,o.jsx)(i.xv,{color:"gray.100",fontSize:".85rem",children:"Transaction"}),(0,o.jsx)(i.rU,{href:(0,a.cf)(l.hash),target:"_blank",children:(0,o.jsxs)(i.Ug,{children:[(0,o.jsx)(i.xv,{fontSize:".85rem",children:(0,a.t$)(l.hash)}),(0,o.jsx)(c.Z,{size:"16"})]})})]}),(null===u||void 0===u?void 0:u.to)&&(0,o.jsxs)(i.Ug,{width:"full",justifyContent:"space-between",children:[(0,o.jsx)(i.xv,{color:"gray.100",fontSize:".85rem",children:"Contract"}),(0,o.jsx)(i.rU,{href:(0,a.jg)(u.to),target:"_blank",children:(0,o.jsxs)(i.Ug,{children:[(0,o.jsx)(i.xv,{fontSize:".85rem",children:(n=u.to,(0,s.ir)(n)?"Vault":(0,s.m7)(n)?"Batch relayer":(0,s.qV)(n))}),(0,o.jsx)(c.Z,{size:"16"})]})})]}),(null===u||void 0===u?void 0:u.blockNumber)&&(0,o.jsxs)(i.Ug,{width:"full",justifyContent:"space-between",children:[(0,o.jsx)(i.xv,{color:"gray.100",fontSize:".85rem",children:"Block number"}),(0,o.jsx)(i.rU,{href:(0,a.LK)(u.blockNumber),target:"_blank",children:(0,o.jsxs)(i.Ug,{children:[(0,o.jsx)(i.xv,{fontSize:".85rem",children:u.blockNumber}),(0,o.jsx)(c.Z,{size:"16"})]})})]})]})}},36645:function(e,n,t){t.d(n,{k:function(){return c}});var r=t(66438),o=t(13433),i="SLIPPAGE",s=localStorage.getItem(i),a=(0,r.QS)(s||"0.005");function c(){var e=(0,o.l)(a);return{slippage:e,slippageDifference:1-parseFloat(e),slippageAddition:1+parseFloat(e),setSlippage:function(e){a(e),localStorage.setItem(i,e)}}}},55917:function(e,n,t){t.d(n,{F:function(){return l}});var r=t(26042),o=t(99534),i=t(27605),s=t(44566),a=t(56371),c=t(13510),u=t(57438);function l(e){var n=(0,u.H)(),t=(0,c.q)().userAddress,l=(0,i.lC)({config:"GAUGE"===(null===e||void 0===e?void 0:e.type)?i.oQ:{addressOrName:n.masterChefContractAddress,contractInterface:s,functionName:"withdrawAndHarvest"},transactionType:"UNSTAKE"}),d=l.submit,p=(l.submitAsync,(0,o.Z)(l,["submit","submitAsync"]));return(0,r.Z)({withdraw:function(n){var r;if(e)return"GAUGE"===e.type?d({args:[n.contractCalls],toastText:"Withdraw and claim rewards"}):d({args:[null===(r=e.farm)||void 0===r?void 0:r.id,(0,a.parseUnits)(n.amount||"",18),t],toastText:"Withdraw and claim rewards"})}},p)}},73477:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(47568),o=t(51438),i=t(34051),s=t.n(i),a=t(14516),c=t(27454),u=new(function(){function e(n){(0,o.Z)(this,e),this.masterChefService=n}return e.prototype.getUserStakedBalance=function(e){var n=e.userAddress,t=e.farmId,o=e.provider,i=e.fBeetsRatio,a=this;return(0,r.Z)(s().mark((function e(){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.masterChefService.getUserStakedBalance({provider:o,farmId:t,userAddress:n});case 2:return r=e.sent,e.abrupt("return",(0,c.i$)((0,c.SW)(r).times(i)));case 4:case"end":return e.stop()}}),e)})))()},e}())(a.O)},47093:function(e,n,t){t.d(n,{ir:function(){return a},m7:function(){return c},qV:function(){return s}});var r=t(56371),o=t(29907);function i(e,n){return e.toLowerCase()===n.toLowerCase()}function s(e){var n=(0,r.getAddress)(e);return"".concat(n.slice(0,4),"...").concat(n.slice(-4))}function a(e){return i(e,o.$.balancer.vault)}function c(e){return i(e,o.$.balancer.batchRelayer)}},28567:function(e,n,t){t.d(n,{j:function(){return s}});var r=t(92077),o=t.n(r),i=function(e){return parseFloat(e)<1e-7?"0.00%":o()(e).format("0.00%")};function s(e){return"GqlPoolAprRange"===e.__typename?"".concat(i(e.min)," - ").concat(i(e.max)):i(e.total)}},23450:function(e,n,t){t.d(n,{LK:function(){return a},NE:function(){return o},cf:function(){return s},gb:function(){return u},jg:function(){return i},t$:function(){return c},uX:function(){return l}});var r=t(29907);function o(e){return"".concat(r.$.etherscanUrl,"/token/").concat(e)}function i(e){return"".concat(r.$.etherscanUrl,"/address/").concat(e)}function s(e){return"".concat(r.$.etherscanUrl,"/tx/").concat(e)}function a(e){return"".concat(r.$.etherscanUrl,"/block/").concat(e)}function c(e){return e.slice(0,12)+"..."}function u(e){return"".concat(r.$.etherscanUrl,"/address/").concat(e,"#writeContract")}function l(e){return"".concat(r.$.etherscanUrl,"/address/").concat(e,"#readContract")}},108:function(e,n,t){function r(e,n){return"10"===e?"rgba(119, 119, 119, ".concat(n,")"):"rgba(88, 95, 198, ".concat(n,")")}function o(e,n){return"10"===e?"rgba(0, 255, 255, ".concat(n,")"):"rgba(143, 147, 214, ".concat(n,")")}t.d(n,{I:function(){return r},J:function(){return o}})},18942:function(e,n,t){t.d(n,{N:function(){return p}});var r=t(14924),o=t(26042),i=t(69396),s=t(29815),a=t(66438),c=t(13433),u=t(96486),l=t(93287),d=(0,a.QS)([]);function p(){var e=(0,l.AI)().pool.id,n=(0,c.l)(d).find((function(n){return n.poolId===e}));return{setInitialInvestState:function(){var n=d();-1!==n.findIndex((function(n){return n.poolId===e}))||d((0,s.Z)(n).concat([{poolId:e,proportional:{inputAmounts:{}},custom:{inputAmounts:{}},inputAmounts:{},selectedOptions:{},zapEnabled:!1}]))},setInputAmounts:function(n){var t=d();d(t.map((function(t){return t.poolId===e?(0,i.Z)((0,o.Z)({},t),{proportional:{inputAmounts:n},inputAmounts:n}):t})))},setInputAmount:function(n,t){var s=d();d(s.map((function(s){if(s.poolId===e){var a=(0,r.Z)({},n,t);return(0,i.Z)((0,o.Z)({},s),{custom:{inputAmounts:(0,o.Z)({},s.custom.inputAmounts,a)},inputAmounts:(0,o.Z)({},s.inputAmounts,a)})}return s})))},setSelectedOption:function(n,t){var s=d();d(s.map((function(s){return s.poolId===e?(0,i.Z)((0,o.Z)({},s),{selectedOptions:(0,i.Z)((0,o.Z)({},s.selectedOptions),(0,r.Z)({},"".concat(n),t))}):s})))},setSelectedOptions:function(n){var t=d();d(t.map((function(t){return t.poolId===e?(0,i.Z)((0,o.Z)({},t),{selectedOptions:(0,u.mapValues)((0,u.keyBy)(n,(function(e){var n=e.poolTokenIndex;return"".concat(n)})),"tokenAddress")}):t})))},clearInvestState:function(){var n=d();d(n.filter((function(n){return n.poolId!==e})))},toggleZapEnabled:function(){var n=d();d(n.map((function(n){return n.poolId===e?(0,i.Z)((0,o.Z)({},n),{zapEnabled:!n.zapEnabled}):n})))},setInputAmountsForType:function(n){var t=d();d(t.map((function(t){return t.poolId===e?(0,i.Z)((0,o.Z)({},t),{inputAmounts:"custom"===n?t.custom.inputAmounts:t.proportional.inputAmounts}):t})))},zapEnabled:null===n||void 0===n?void 0:n.zapEnabled,selectedOptions:null===n||void 0===n?void 0:n.selectedOptions,inputAmounts:null===n||void 0===n?void 0:n.inputAmounts,customInputAmounts:null===n||void 0===n?void 0:n.custom.inputAmounts,proportionalInputAmounts:null===n||void 0===n?void 0:n.proportional.inputAmounts}}},70913:function(e,n,t){t.d(n,{M:function(){return v}});var r=t(47568),o=t(26042),i=t(69396),s=t(34051),a=t.n(s),c=t(88767),u=t(18942),l=t(57290),d=t(36645),p=t(92077),f=t.n(p),h=t(57438),m=t(93287);function v(){var e=(0,h.H)(),n=(0,m.AI)(),t=n.poolService,s=n.pool,p=(0,u.N)(),v=p.inputAmounts,x=p.selectedOptions,g=(0,d.k)().slippage,b=v&&(0,l.rT)(v).map((function(e){var n,t=e.amount,r=e.address,o=(null===(n=s.tokens.find((function(e){return e.address===r})))||void 0===n?void 0:n.index)||-1,i=s.investConfig.options.find((function(e){return e.poolTokenIndex===o}));return{amount:t,address:x&&x["".concat(o)]||(null===i||void 0===i?void 0:i.tokenOptions[0].address)||r}})),A=(0,c.useQuery)(["joinGetBptOutAndPriceImpactForTokensIn",b,g],(0,r.Z)(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b&&!b.every((function(e){return!e.amount||0===parseFloat(e.amount)}))){e.next=2;break}return e.abrupt("return",{minBptReceived:"0",priceImpact:0});case 2:return n=b.map((function(e){return{amount:e.amount,address:(0,l.TS)(e.address)}})),e.abrupt("return",t.joinGetBptOutAndPriceImpactForTokensIn(n,g));case 4:case"end":return e.stop()}}),e)}))),{enabled:b&&b.length>0,staleTime:0,cacheTime:0}),j=A.data,y=Math.abs((null===j||void 0===j?void 0:j.priceImpact)||0),k=y>e.priceImpact.invest.high,Z=!k&&y>e.priceImpact.invest.noticeable,S=f()(y>1e-6?y:0).format("0.00%");return(0,i.Z)((0,o.Z)({},A),{bptOutAndPriceImpact:j,hasHighPriceImpact:k,hasMediumPriceImpact:Z,formattedPriceImpact:S})}},53681:function(e,n,t){t.d(n,{Um:function(){return C},df:function(){return O}});var r=t(47568),o=t(26042),i=t(69396),s=t(99534),a=t(34051),c=t.n(a),u=t(85893),l=t(97382),d=t(30125),p=t(56371),f=t(57290),h=t(27454),m=t(69077),v=t(88767),x=t(14516),g=t(73477),b=t(20335),A=t(24842),j=t(13510),y=t(57438),k=t(93287),Z=t(67294),S=t(91747).O$.from("1000000000000");function w(){var e,n,t,a,u,m=(0,k.AI)().pool,v=function(){var e=function(){var e=(0,f.Wl)(n.fbeets.address,u),t=(0,h.SW)(e).times((null===a||void 0===a?void 0:a.ratio)||"0").toFixed(0);return v.add(t)},n=(0,y.H)(),t=(0,k.AI)().pool,r=t.id===n.fbeets.poolId,a=(0,l.i5)().data,c=(0,d.j)(r?[t.address,n.fbeets.address]:[t.address],[t]),u=c.userBalances,m=(0,s.Z)(c,["userBalances"]),v=(0,p.parseUnits)((0,f.Wl)(t.address,u),18);return(0,i.Z)((0,o.Z)({},m),{userWalletBptBalance:r?e():v})}(),x=v.userWalletBptBalance,g=(0,s.Z)(v,["userWalletBptBalance"]),A=I([(null===(e=m.staking)||void 0===e||null===(n=e.gauge)||void 0===n?void 0:n.gaugeAddress)||""]),j=A.data,Z=(0,s.Z)(A,["data"]),w=I((null===(t=m.staking)||void 0===t||null===(a=t.gauge)||void 0===a||null===(u=a.otherGauges)||void 0===u?void 0:u.map((function(e){return e.gaugeAddress})))||[]),P=w.data,O=(0,s.Z)(w,["data"]),C=(0,p.parseUnits)((j&&"object"===typeof j?j.amount:j)||"0",18),T=(0,p.parseUnits)(P&&"object"===typeof P?P.amount:"0",18),B=x.add(C),U=(0,b.S5)(B,18),R=parseFloat(U)/parseFloat(m.dynamicData.totalShares);function L(){return(L=(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.refetch();case 2:return e.next=4,O.refetch();case 4:return e.next=6,Z.refetch();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{isLoading:g.isLoading||Z.isLoading||O.isLoading,isRefetching:g.isRefetching||Z.isRefetching||O.isFetching,isError:g.isError||Z.isError||O.isError,error:g.error||Z.error||O.error,refetch:function(){return L.apply(this,arguments)},userTotalBptBalance:(0,b.S5)(x.add(C),18),userWalletBptBalance:(0,b.S5)(x,18),userStakedBptBalance:(0,b.S5)(C,18),userLegacyGaugeStakedBptBalance:(0,b.S5)(T,18),userLegacyGaugeStakedGaugeAddress:P&&"object"===typeof P&&P.address||"",hasBpt:B.gt(S),hasBptInWallet:x.gt(S),hasBptStaked:C.gt(S),userPercentShare:R}}function I(e){var n,t=(0,k.AI)().pool,o=(0,j.q)().userAddress,i=(0,m.yL)(),s=(0,l.i5)().data;return(0,v.useQuery)(["poolUserStakedBalance",t.id,(null===(n=t.staking)||void 0===n?void 0:n.id)||"",o||"",e],(0,r.Z)(c().mark((function n(){var r,a,u,l,d,p,f;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o&&t.staking){n.next=2;break}return n.abrupt("return","0");case 2:n.t0=t.staking.type,n.next="MASTER_CHEF"===n.t0?5:"FRESH_BEETS"===n.t0?6:"GAUGE"===n.t0?7:"RELIQUARY"===n.t0?35:36;break;case 5:return n.abrupt("return",x.O.getUserStakedBalance({userAddress:o,farmId:t.staking.id,provider:i}));case 6:return n.abrupt("return",g.Z.getUserStakedBalance({userAddress:o,farmId:t.staking.id,provider:i,fBeetsRatio:(null===s||void 0===s?void 0:s.ratio)||"0"}));case 7:r=!0,a=!1,u=void 0,n.prev=8,l=e[Symbol.iterator]();case 10:if(r=(d=l.next()).done){n.next=20;break}return p=d.value,n.next=14,A.R.getUserStakedBalance({userAddress:o,gaugeAddress:p||"",provider:i});case 14:if("0.0"===(f=n.sent)){n.next=17;break}return n.abrupt("return",{address:p,amount:f});case 17:r=!0,n.next=10;break;case 20:n.next=26;break;case 22:n.prev=22,n.t1=n.catch(8),a=!0,u=n.t1;case 26:n.prev=26,n.prev=27,r||null==l.return||l.return();case 29:if(n.prev=29,!a){n.next=32;break}throw u;case 32:return n.finish(29);case 33:return n.finish(26);case 34:case 35:return n.abrupt("return","0");case 36:case"end":return n.stop()}}),n,null,[[8,22,26,34],[27,,29,33]])}))),{})}var P=(0,Z.createContext)(null);function O(e){var n=w();return(0,u.jsx)(P.Provider,{value:n,children:e.children})}function C(){return(0,Z.useContext)(P)}},19636:function(e,n,t){t.d(n,{LV:function(){return g},rC:function(){return x}});var r=t(47568),o=t(26042),i=t(69396),s=t(34051),a=t.n(s),c=t(85893),u=t(88767),l=t(51797),d=t(96486),p=t(53681),f=t(46494),h=t(93287),m=t(67294);var v=(0,m.createContext)(null);function x(e){var n=function(){var e=(0,h.AI)(),n=e.poolService,t=e.pool,s=(0,p.Um)(),c=s.userTotalBptBalance,m=s.isError,v=s.isLoading,x=s.error,g=(0,l.yA)().priceForAmount,b=(0,f.Q)().selectedWithdrawTokenAddresses,A=(0,u.useQuery)(["usePoolUserDepositBalance",t.id,c,b],(0,r.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.exitGetProportionalWithdrawEstimate(c,b);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),{enabled:parseFloat(c)>0});return(0,i.Z)((0,o.Z)({},A),{isError:A.isError||m,isLoading:A.isLoading||v,error:A.error||x,userPoolBalanceUSD:(0,d.sumBy)(A.data||[],g)})}();return(0,c.jsx)(v.Provider,{value:n,children:e.children})}function g(){return(0,m.useContext)(v)}},46494:function(e,n,t){t.d(n,{Q:function(){return i}});var r=t(56143),o=t(93287);function i(){var e=(0,o.AI)().pool,n=(0,r._)(),t=n.selectedOptions,i=(n.proportionalAmounts,e.withdrawConfig.options.map((function(e){return t["".concat(e.poolTokenIndex)]?e.tokenOptions.find((function(n){return n.address===t["".concat(e.poolTokenIndex)]})):e.tokenOptions[0]}))),s=i.map((function(e){return e.address}));return{selectedWithdrawTokens:i,selectedWithdrawTokenAddresses:s}}},56143:function(e,n,t){t.d(n,{N:function(){return d},_:function(){return p}});var r=t(47568),o=t(14924),i=t(26042),s=t(69396),a=t(34051),c=t.n(a),u=t(66438),l=t(13433),d=(0,u.QS)({type:"PROPORTIONAL",proportionalPercent:50,singleAsset:null,selectedOptions:{},proportionalAmounts:null});function p(){function e(){return(e=(0,r.Z)(c().mark((function e(n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d((0,s.Z)((0,i.Z)({},d()),{proportionalPercent:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var n=(0,l.l)(d);return{setProportionalPercent:function(n){return e.apply(this,arguments)},selectedWithdrawType:n.type,singleAssetWithdraw:n.singleAsset,proportionalPercent:n.proportionalPercent,selectedOptions:n.selectedOptions,proportionalAmounts:n.proportionalAmounts,setProportionalWithdraw:function(){d((0,s.Z)((0,i.Z)({},d()),{type:"PROPORTIONAL",singleAsset:null}))},setSingleAssetWithdraw:function(e){d((0,s.Z)((0,i.Z)({},d()),{type:"SINGLE_ASSET",singleAsset:{address:e,amount:""}}))},setSingleAssetWithdrawAmount:function(e){d((0,s.Z)((0,i.Z)({},d()),{singleAsset:e}))},setSelectedOption:function(e,n){var t=d();d((0,s.Z)((0,i.Z)({},t),{selectedOptions:(0,s.Z)((0,i.Z)({},t.selectedOptions),(0,o.Z)({},"".concat(e),n))}))},clearWithdrawState:function(){d({type:"PROPORTIONAL",proportionalPercent:50,singleAsset:null,selectedOptions:{},proportionalAmounts:null})},setProportionalAmounts:function(e){d((0,s.Z)((0,i.Z)({},d()),{proportionalAmounts:e}))}}}},31518:function(e,n,t){t.d(n,{p:function(){return f}});var r=t(47568),o=t(34051),i=t.n(o),s=t(69077),a=t(88767),c=t(73477),u=t(13510),l=t(57438),d=t(30125),p=t(96486);function f(){var e,n=(0,u.q)().userAddress,t=(0,s.yL)(),o=(0,l.H)(),f=(0,d.j)([o.fbeets.address]),h=f.userBalances,m=void 0===h?[]:h,v=f.isLoading,x=f.refetch,g=(null===(e=(0,p.keyBy)(m,"address")[o.fbeets.address])||void 0===e?void 0:e.amount)||"0",b=(0,a.useQuery)(["legacyFbeetsBalances",n||""],(0,r.Z)(i().mark((function e(){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return","0");case 2:return r=c.Z.getUserStakedBalance({userAddress:n,farmId:o.fbeets.farmId,provider:t,fBeetsRatio:"1"}),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),{enabled:!!o.fbeets.address}),A=b.data,j=void 0===A?"0":A,y=b.isLoading,k=b.refetch;return{staked:j,unstaked:g,isLoading:y||v,total:parseFloat(j||"0")+parseFloat(g||"0"),refetchLegacyFbeetsBalance:x,refetchStakedBalance:k}}},36522:function(e,n,t){t.d(n,{Y1:function(){return g},nT:function(){return x}});var r=t(47568),o=t(26042),i=t(69396),s=t(34051),a=t.n(s),c=t(85893),u=t(88767),l=t(51797),d=t(96486),p=t(19943),f=t(93287),h=t(67294),m=t(20015);var v=(0,h.createContext)(null);function x(e){var n=function(){var e=(0,f.AI)().poolService,n=(0,l.yA)().priceForAmount,t=(0,p.S)().selectedWithdrawTokenAddresses,s=(0,m.Z)().selectedRelic,c=(0,u.useQuery)(["relicDepositBalance",null===s||void 0===s?void 0:s.relicId,null===s||void 0===s?void 0:s.amount,t],(0,r.Z)(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.exitGetProportionalWithdrawEstimate((null===s||void 0===s?void 0:s.amount)||"0",t);case 2:return r=n.sent,n.abrupt("return",r);case 4:case"end":return n.stop()}}),n)}))),{enabled:!!s&&parseFloat(s.amount)>0});return(0,i.Z)((0,o.Z)({},c),{relicBalanceUSD:(0,d.sumBy)(c.data||[],n)})}();return(0,c.jsx)(v.Provider,{value:n,children:e.children})}function g(){return(0,h.useContext)(v)}},20015:function(e,n,t){t.d(n,{Z:function(){return A}});var r=t(47568),o=t(34051),i=t.n(o),s=t(88767),a=t(69077),c=t(16856),u=t(13510),l=t(57438),d=t(66438),p=t(13433),f=t(93287),h=t(96486),m=t(67294),v=t(30125),x=t(31518),g=(0,d.QS)(void 0),b=(0,d.QS)(!1);function A(){var e,n,t,o,d,A=(0,u.q)().userAddress,j=(0,a.yL)(),y=(0,l.H)(),k=(0,m.useRef)({address:y.fbeets.poolAddress,symbol:"BPT",name:"BPT",decimals:18}),Z=(0,f.AI)().pool,S=(0,v.j)([y.fbeets.address,y.fbeets.poolAddress],[k.current]),w=S.userBalances,I=void 0===w?[]:w,P=(S.isLoading,(null===(e=(0,h.keyBy)(I,"address")[k.current.address])||void 0===e?void 0:e.amount)||"0"),O=(0,x.p)().total,C=(0,s.useQuery)(["reliquaryAllPositions",A],(0,r.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.K.getAllPositions({userAddress:A||"",provider:j});case 2:return(n=e.sent).length>0&&void 0===g()&&g(n[0].relicId),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),{enabled:!!A&&!!y.fbeets.address}),T=C.data,B=void 0===T?[]:T,U=C.isLoading,R=C.refetch,L=B.sort((function(e,n){return parseInt(e.relicId)-parseInt(n.relicId)})),W=(0,s.useQuery)(["maturityThresholds",y.reliquary.fbeets.farmId],(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.K.getMaturityThresholds({pid:y.reliquary.fbeets.farmId.toString(),provider:j});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{refetchOnWindowFocus:!1}),F=W.data,E=void 0===F?[]:F,z=W.isLoading,N=W.refetch,_=(L||[]).find((function(e){return e.relicId===g()})),G=U||z,q=L.map((function(e){return parseInt(e.relicId)})),Q=(null===(n=Z.staking)||void 0===n||null===(t=n.reliquary)||void 0===t?void 0:t.beetsPerSecond)||"0",$=(null===(o=Z.staking)||void 0===o||null===(d=o.reliquary)||void 0===d?void 0:d.levels)||[],D=$.find((function(e){return e.level===(null===_||void 0===_?void 0:_.level)})),M=(0,h.sumBy)($,(function(e){return parseFloat(e.balance)*e.allocationPoints})),V=L.filter((function(e){return e.farmId.toString()===y.reliquary.fbeets.farmId.toString()})),H=(0,h.sumBy)(V,(function(e){var n=parseFloat(e.amount),t=$.find((function(n){return n.level===e.level}));return((null===t||void 0===t?void 0:t.allocationPoints)||0)/100*n}));return{relicPositions:L,isLoadingRelicPositions:U,isLoading:G,reliquaryService:c.K,maturityThresholds:E,selectedRelicId:(0,p.l)(g),selectedRelic:_||null,selectedRelicApr:(null===D||void 0===D?void 0:D.apr)||"0",beetsPerSecond:Q,beetsPerDay:86400*parseFloat(Q),selectedRelicLevel:D,weightedTotalBalance:M,createRelic:(0,p.l)(b),relicIds:q,legacyBptBalance:P,legacyFbeetsBalance:O,relicPositionsForFarmId:V,totalMaBeetsVP:H,setCreateRelic:function(e){b(e)},setSelectedRelicId:function(e){g(e)},refetchRelicPositions:R,refetchMaturityThresholds:N}}},19943:function(e,n,t){t.d(n,{S:function(){return i}});var r=t(7504),o=t(93287);function i(){var e=(0,o.AI)().pool,n=(0,r.L)().selectedOptions,t=e.withdrawConfig.options.map((function(e){return n["".concat(e.poolTokenIndex)]?e.tokenOptions.find((function(t){return t.address===n["".concat(e.poolTokenIndex)]})):e.tokenOptions[0]})),i=t.map((function(e){return e.address}));return{selectedWithdrawTokens:t,selectedWithdrawTokenAddresses:i}}},7504:function(e,n,t){t.d(n,{L:function(){return p},N:function(){return d}});var r=t(47568),o=t(14924),i=t(26042),s=t(69396),a=t(34051),c=t.n(a),u=t(66438),l=t(13433),d=(0,u.QS)({type:"PROPORTIONAL",proportionalPercent:50,singleAsset:null,selectedOptions:{},proportionalAmounts:null});function p(){function e(){return(e=(0,r.Z)(c().mark((function e(n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d((0,s.Z)((0,i.Z)({},d()),{proportionalPercent:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var n=(0,l.l)(d);return{setProportionalPercent:function(n){return e.apply(this,arguments)},selectedWithdrawType:n.type,singleAssetWithdraw:n.singleAsset,proportionalPercent:n.proportionalPercent,selectedOptions:n.selectedOptions,proportionalAmounts:n.proportionalAmounts,setProportionalWithdraw:function(){d((0,s.Z)((0,i.Z)({},d()),{type:"PROPORTIONAL",singleAsset:null}))},setSingleAssetWithdraw:function(e){d((0,s.Z)((0,i.Z)({},d()),{type:"SINGLE_ASSET",singleAsset:{address:e,amount:""}}))},setSingleAssetWithdrawAmount:function(e){d((0,s.Z)((0,i.Z)({},d()),{singleAsset:e}))},setSelectedOption:function(e,n){var t=d();d((0,s.Z)((0,i.Z)({},t),{selectedOptions:(0,s.Z)((0,i.Z)({},t.selectedOptions),(0,o.Z)({},"".concat(e),n))}))},clearWithdrawState:function(){d({type:"PROPORTIONAL",proportionalPercent:50,singleAsset:null,selectedOptions:{},proportionalAmounts:null})},setProportionalAmounts:function(e){d((0,s.Z)((0,i.Z)({},d()),{proportionalAmounts:e}))}}}}}]);
//# sourceMappingURL=740-0870107dd409eb65.js.map