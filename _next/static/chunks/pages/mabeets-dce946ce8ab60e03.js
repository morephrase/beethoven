(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8060],{57026:function(e,t,n){"use strict";n.d(t,{Ph:function(){return u}});var i=n(67294),r=n(83234),o=n(83904),s=n(54520),a=n(92127),l=n(38554),c=n.n(l),d=(0,o.Gp)((function(e,t){const{children:n,placeholder:r,className:s,...l}=e;return i.createElement(o.m$.select,{...l,ref:t,className:(0,a.cx)("chakra-select",s)},r&&i.createElement("option",{value:""},r),n)}));a.Ts&&(d.displayName="SelectField");var u=(0,o.Gp)(((e,t)=>{const n=(0,o.jC)("Select",e),{rootProps:l,placeholder:u,icon:h,color:p,height:A,h:m,minH:x,minHeight:g,iconColor:v,iconSize:b,...w}=(0,s.Lr)(e),[j,y]=(0,a.Vl)(w,s.oE),S=(0,r.Yp)(y),C={width:"100%",height:"fit-content",position:"relative",color:p},T=c()({paddingEnd:"2rem"},n.field,{_focus:{zIndex:"unset"}});return i.createElement(o.m$.div,{className:"chakra-select__wrapper",__css:C,...j,...l},i.createElement(d,{ref:t,height:m??A,minH:x??g,placeholder:u,...S,__css:T},e.children),i.createElement(f,{"data-disabled":(0,a.PB)(S.disabled),...(v||p)&&{color:v||p},__css:n.icon,...b&&{fontSize:b}},h))}));a.Ts&&(u.displayName="Select");var h=e=>i.createElement("svg",{viewBox:"0 0 24 24",...e},i.createElement("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})),p=(0,o.m$)("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),f=e=>{const{children:t=i.createElement(h,null),...n}=e,r=(0,i.cloneElement)(t,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return i.createElement(p,{...n,className:"chakra-select__icon-wrapper"},(0,i.isValidElement)(t)?r:null)};a.Ts&&(f.displayName="SelectIcon")},64657:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mabeets",function(){return n(54681)}])},49971:function(e,t,n){"use strict";n.d(t,{w:function(){return u}});var i=n(26042),r=n(69396),o=n(85893),s=n(47267),a=n(48641),l=n(47741),c=n(13510),d=n(3557);function u(e){return(0,c.q)().isConnected?null:(0,o.jsx)(s.NL.Custom,{children:function(t){var n=t.account,s=t.chain,c=t.openConnectModal,u=t.mounted;return(0,o.jsx)(a.xu,{children:u&&n&&s?null:(0,o.jsxs)(l.zx,(0,r.Z)((0,i.Z)({variant:"primary",onClick:c},e),{children:[(0,o.jsx)(d.n,{stroke:"black",boxSize:"20px"}),(0,o.jsx)(a.xu,{ml:"2",children:"Connect Wallet"})]}))})}})}},54681:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return hi},default:function(){return pi}});var i=n(85893),r=n(9008),o=n.n(r),s=n(28626),a=n(93287),l=n(17681),c=n(53681),d=n(67294),u=n(36522),h=n(19636),p=n(39653),f=n(48641),A=n(47741),m=n(3998),x=n(26042),g=n(69396),v=n(99534),b=n(98352),w=n(71911),j=n(51469),y=n(20015),S=n(47568),C=n(34051),T=n.n(C),I=n(3270),E=n(3038),k=n(92528),R=n(42179),U=n(14924),B=n(66438),Z=n(13433),M=n(96486),P=(0,B.QS)({inputAmounts:{},selectedOptions:{}});function L(){var e=(0,Z.l)(P);return(0,g.Z)((0,x.Z)({setInputAmounts:function(e){var t=P();P((0,g.Z)((0,x.Z)({},t),{inputAmounts:e}))},setInputAmount:function(e,t){var n=P();P((0,g.Z)((0,x.Z)({},n),{inputAmounts:(0,g.Z)((0,x.Z)({},n.inputAmounts),(0,U.Z)({},e,t))}))},setSelectedOption:function(e,t){var n=P();P((0,g.Z)((0,x.Z)({},n),{selectedOptions:(0,g.Z)((0,x.Z)({},n.selectedOptions),(0,U.Z)({},"".concat(e),t))}))},setSelectedOptions:function(e){var t=P();P((0,g.Z)((0,x.Z)({},t),{selectedOptions:(0,M.mapValues)((0,M.keyBy)(e,(function(e){var t=e.poolTokenIndex;return"".concat(t)})),"tokenAddress")}))},clearInvestState:function(){P({inputAmounts:{},selectedOptions:{}})}},e),{hasSelectedOptions:Object.keys(e.selectedOptions).length>0})}var D=n(57290),O=n(51797),z=n(27454);function V(){var e=(0,a.AI)().pool,t=L(),n=t.selectedOptions,i=t.inputAmounts,r=(0,l.pt)(),o=r.getUserBalanceForToken,s=r.userPoolTokenBalances,c=(0,O.yA)().priceForAmount,d=e.investConfig.options.map((function(e){return n["".concat(e.poolTokenIndex)]?e.tokenOptions.find((function(t){return t.address===n["".concat(e.poolTokenIndex)]})):e.tokenOptions[0]})),u=d.map((function(e){return(0,g.Z)((0,x.Z)({},e),{amount:i[e.address]||"0"})})),h=d.map((function(e){return{address:e.address,amount:o(e.address)}})),p=!u.every((function(e){return 0===parseFloat(e.amount)}))&&u.every((function(e){return(0,z.cz)(e.amount).lte(o(e.address))})),f=e.investConfig.options.filter((function(e){return e.tokenOptions.filter((function(e){return parseFloat((0,D.Wl)(e.address,s))>0})).length>0})).length===e.investConfig.options.length,A=(0,M.sumBy)(u,c),m=!!d.find((function(e){return(0,D.Gn)(e.address)}));return{selectedInvestTokens:d,selectedInvestTokensWithAmounts:u,userInvestTokenBalances:h,canInvestProportionally:f,totalInvestValue:A,hasValidUserInput:p,isInvestingWithEth:m}}var F=n(40872),W=n(30663),H=n(48708);function X(e){(0,F.Z)({},e);var t=(0,a.AI)(),n=t.pool,r=t.totalApr,o=V().totalInvestValue,s=o*r/52;return(0,i.jsx)(f.gC,{spacing:"4",width:"full",p:"4",rounded:"md",children:(0,i.jsxs)(f.Ug,{spacing:"8",children:[(0,i.jsxs)(f.xu,{children:[(0,i.jsx)(f.X6,{size:"sm",textAlign:"center",children:"Your investment total is"}),(0,i.jsx)(f.X6,{color:"beets.green",textAlign:"center",children:(0,H.Rj)(o)})]}),(0,i.jsxs)(f.xu,{children:[(0,i.jsx)(f.X6,{size:"sm",textAlign:"center",children:"Potential weekly yield"}),(0,i.jsxs)(f.Ug,{justifyContent:"center",children:[(0,i.jsx)(f.X6,{color:"beets.highlight",textAlign:"center",children:(0,H.Rj)(s)}),(0,i.jsx)(W.Z,{data:n.dynamicData.apr,onlySparkles:!0,sparklesSize:"sm"})]})]})]})})}var N=n(29815),Q=n(50934),G=n(19178),Y=n(57438),q=n(63979),K=n(24937),J=n(44860),_=n(88767),$=n(5995),ee=n(13510),te=n(36645);var ne=n(27605);function ie(e){var t=(0,ne.lC)({config:ne.oQ,transactionType:"WITHDRAW"===e?"EXIT":"JOIN"}),n=t.submit,i=(t.submitAsync,(0,v.Z)(t,["submit","submitAsync"]));function r(){return(r=(0,S.Z)(T().mark((function t(i){return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({args:[i],toastText:"WITHDRAW"===e?"Withdrawing from maBEETS":"MIGRATE"===e?"Migrating into maBEETS":"Depositing into maBEETS",walletText:"WITHDRAW"===e?"Withdraw from maBEETS":"MIGRATE"===e?"Migrate into maBEETS":"Deposit into maBEETS"});case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,x.Z)({reliquaryZap:function(e){return r.apply(this,arguments)}},i)}var re=n(51358),oe=n(10679),se=n(49184),ae=n(49511),le=n(57174),ce=n(80016),de=n(31062),ue=n(47300),he=n(65472),pe=n(828),fe=d.createContext(null);function Ae(e){var t=function(){var e=(0,pe.Z)(d.useState(null),2),t=e[0],n=e[1];return{currentStep:t,updateCurrentStep:function(e){n(e)}}}();return(0,i.jsx)(fe.Provider,{value:t,children:e.children})}var me=function(){return d.useContext(fe)};function xe(e){var t=e.isLoading,n=e.loadingButtonText,r=e.completeButtonText,o=e.onCompleteButtonClick,s=e.steps,a=e.onSubmit,l=e.onConfirmed,c=e.onComplete,u=e.queries,h=e.isDisabled,p=e.buttonSize,m=void 0===p?"lg":p,v=e.showToS,b=void 0!==v&&v,w=function(e,t){k((0,g.Z)((0,x.Z)({},I),(0,U.Z)({},e,t)))},j=function(){if(B){var e;if(s[S+1])k((0,g.Z)((0,x.Z)({},I),(e={},(0,U.Z)(e,B.id,"complete"),(0,U.Z)(e,s[S+1].id,"current"),e)));else w(B.id,"complete");l(B.id),S===s.length-1&&L(!0),s[S+1]&&C(S+1)}},y=(0,d.useState)(0),S=y[0],C=y[1],T=(0,d.useState)({}),I=T[0],k=T[1],B=s?s[S]:null,Z=u.find((function(e){return e.id===(null===B||void 0===B?void 0:B.id)})),M=(0,d.useState)(!1),P=M[0],L=M[1],D=(0,d.useState)(!1),O=D[0],z=D[1],V=(0,q.F)(),F=V.refetch,W=(V.data,(0,re.C)().refetch),H=me().updateCurrentStep;return(0,d.useEffect)((function(){P&&c&&c()}),[P]),(0,d.useEffect)((function(){s.length>0&&H(s[S].id)}),[S,s]),(0,i.jsxs)(f.gC,{width:"full",alignItems:"stretch",spacing:"4",children:[b&&(0,i.jsx)(R.L,{alignSelf:"flex-start",width:"full",p:"2",children:(0,i.jsxs)(se.XZ,{isDisabled:P||"reliquary-invest"!==(null===B||void 0===B?void 0:B.id)&&"reliquary-migrate"!==(null===B||void 0===B?void 0:B.id),isChecked:O,onChange:function(e){return z(e.target.checked)},children:["I agree to the terms of service as stated"," ",(0,i.jsx)(f.rU,{color:"white",_hover:{color:"beets.highlight",textDecoration:"underline"},href:"/terms-of-service",target:"_blank",children:"here"}),"."]})}),t&&!P?(0,i.jsx)(f.kC,{justifyContent:"center",mb:"6",children:(0,i.jsx)(ae.Od,{height:"30px",width:"180px"})}):s&&s.length>1?(0,i.jsx)(oe.G,{mb:"6",steps:s.map((function(e){return(0,g.Z)((0,x.Z)({},e),{status:I[e.id]||"idle"})}))}):null,t&&!P?(0,i.jsx)(A.zx,{variant:"primary",isLoading:!0,loadingText:n,width:"full",size:m,children:n}):null,s&&B&&"batch-relayer"===B.id&&!P?(0,i.jsx)(ue.W,{onSubmitting:function(){return w(B.id,"submitting")},onPending:function(){return w(B.id,"pending")},onCanceled:function(){return w(B.id,"current")},onConfirmed:function(){F(),j()},buttonText:B.buttonText}):null,s&&B&&"batch-relayer-reliquary"===B.id&&!P?(0,i.jsx)(he.t,{onSubmitting:function(){return w(B.id,"submitting")},onPending:function(){return w(B.id,"pending")},onCanceled:function(){return w(B.id,"current")},onConfirmed:function(){W(),j()},buttonText:B.buttonText}):null,s&&B&&"tokenApproval"===B.type&&!P?(0,i.jsx)(de.X,{tokenWithAmount:B.token,contractToApprove:B.contractToApprove,onConfirmed:j,onSubmitting:function(){return w(B.id,"submitting")},onPending:function(){return w(B.id,"pending")},onCanceled:function(){return w(B.id,"current")},isDisabled:h,size:m}):null,!t&&B&&"tokenApproval"!==B.type&&Z&&!P?(0,i.jsx)(ce.H,(0,g.Z)((0,x.Z)({},Z),{width:"full",onClick:function(){return a(B.id)},onSubmitting:function(){return w(B.id,"submitting")},onPending:function(){return w(B.id,"pending")},onCanceled:function(){return w(B.id,"current")},onConfirmed:j,isDisabled:h||b&&["reliquary-migrate","reliquary-invest"].includes(B.id)&&!O,size:m,children:B.buttonText})):null,P&&(0,i.jsx)(A.zx,{onClick:function(){k({}),L(!1),o()},width:"full",variant:"outline",size:m,children:r}),Z&&Z.submitError?(0,i.jsxs)(E.bZ,{status:"error",mt:4,children:[(0,i.jsx)(E.zM,{}),(0,J.v)(Z.submitError)]}):null,P&&(0,i.jsx)(le.h_,{children:(0,i.jsx)(f.xu,{position:"absolute",top:"0",left:"0",width:"full",children:(0,i.jsxs)("div",{className:"fireworks",children:[(0,i.jsx)("div",{className:"before"}),(0,i.jsx)("div",{className:"after"})]})})})]})}function ge(e){var t=e.onInvestComplete,n=e.onClose,r=(0,Y.H)(),o=(0,a.AI)().pool,s=V(),l=s.selectedInvestTokensWithAmounts,c=s.totalInvestValue,u=o.investConfig.options.map((function(e){return e.tokenOptions})).flat(),h=(0,Q.r)(u,r.balancer.vault),p=h.hasApprovalForAmount,A=h.isLoading,m=h.refetch,b=(0,d.useState)(null),w=b[0],j=b[1],C=(0,q.F)(),I=C.data,k=C.isLoading,R=C.refetch,U=(0,y.Z)(),B=U.createRelic,Z=U.refetchRelicPositions,P=ie("DEPOSIT"),L=P.reliquaryZap,D=(0,v.Z)(P,["reliquaryZap"]),O=(0,re.C)(),z=O.data,F=O.isLoading,W=O.refetch,X=function(e){var t=e.investTokensWithAmounts,n=e.enabled,i=void 0===n||n,r=(0,ee.q)().userAddress,o=(0,te.k)().slippage,s=(0,Y.H)(),a=(0,y.Z)(),l=a.selectedRelicId,c=a.createRelic,u=(0,d.useMemo)((function(){return(0,M.keyBy)(t,"address")}),[t]),h=(0,d.useMemo)((function(){var e,t="0",n="0",r=!0;return i&&(t=u[s.beets.address].amount,(null===(e=u[s.eth.address.toLowerCase()])||void 0===e?void 0:e.address)?n=u[s.eth.address.toLowerCase()].amount:(n=u[s.wethAddress].amount,r=!1)),{beetsAmount:t,ftmAmount:n,isNativeFtm:r}}),[i,u]),p=(0,_.useQuery)(["reliquaryDepositContractCallData",r,o,h],(0,S.Z)(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$.k.getReliquaryDepositContractCallData({userAddress:r||"",slippage:o,beetsAmount:h.beetsAmount,ftmAmount:h.ftmAmount,isNativeFtm:h.isNativeFtm,relicId:c?void 0:parseInt(l||"")}));case 1:case"end":return e.stop()}}),e)}))),{enabled:!!r&&i});return(0,x.Z)({},p)}({investTokensWithAmounts:l,enabled:z}),ne=X.data,oe=A||k||F;return(0,d.useEffect)((function(){R({}),W({})}),[]),(0,d.useEffect)((function(){if(!oe){var e=l.filter((function(e){return parseFloat(e.amount)>0&&!p(e.address,e.amount)})),t={id:"reliquary-invest",type:"other",buttonText:"".concat(B?"Create and d":"D","eposit"),tooltipText:"Create and/or deposit into your relic"},n=(0,N.Z)(e.map((function(e){return{id:e.symbol,type:"tokenApproval",buttonText:"Approve ".concat(e.symbol),tooltipText:"Approve ".concat(e.symbol," for depositing"),token:e}}))).concat([t]);z||n.unshift({id:"batch-relayer-reliquary",type:"other",buttonText:"Approve relayer for transacting",tooltipText:"Transacting with all (future) relics requires you to approve the batch relayer."}),I||n.unshift({id:"batch-relayer",type:"other",buttonText:"Approve relayer for creating",tooltipText:"Creating a relic requires you to approve the batch relayer."}),j(n)}}),[oe]),(0,i.jsxs)(f.gC,{width:"full",spacing:"4",children:[D.error&&(0,i.jsx)(f.xu,{width:"full",px:"4",children:(0,i.jsxs)(E.bZ,{width:"full",status:"error",children:[(0,i.jsx)(E.zM,{}),(0,J.v)(D.error)]})}),D.isConfirmed&&(0,i.jsx)(f.xu,{width:"full",px:"4",children:(0,i.jsx)(G.i,{isVisible:D.isConfirmed,children:(0,i.jsxs)(E.bZ,{status:"success",borderRadius:"md",children:[(0,i.jsx)(E.zM,{}),"You've successfully invested ".concat((0,H.Rj)(c)," into a relic.")]})})}),(0,i.jsx)(f.xu,{px:"4",width:"full",pb:D.isConfirmed||D.isFailed||D.isPending?"0":"4",children:(0,i.jsx)(xe,{isLoading:null===w||k||F,loadingButtonText:"Invest",completeButtonText:"Return to maBEETS",onCompleteButtonClick:n,steps:w||[],onSubmit:function(e){"reliquary-invest"===e&&ne&&L(ne)},onConfirmed:function(e){"reliquary-invest"!==e?m():(Z(),t())},queries:[(0,g.Z)((0,x.Z)({},D),{id:"reliquary-invest"})],showToS:B})}),(0,i.jsx)(G.i,{width:"full",isVisible:D.isConfirmed||D.isPending||D.isFailed,children:(0,i.jsx)(K.G,{query:D})})]})}var ve=n(70570),be=n(24262),we=n(49474),je=n(19013),ye=n(92094),Se=n(35077),Ce=n(13882),Te=6e4,Ie=1440,Ee=43200,ke=525600;function Re(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,Ce.Z)(2,arguments);var i=n.locale||Se.Z;if(!i.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var r=(0,we.Z)(e,t);if(isNaN(r))throw new RangeError("Invalid time value");var o,s,a=(0,ye.Z)(n);a.addSuffix=Boolean(n.addSuffix),a.comparison=r,r>0?(o=(0,je.Z)(t),s=(0,je.Z)(e)):(o=(0,je.Z)(e),s=(0,je.Z)(t));var l,c=null==n.roundingMethod?"round":String(n.roundingMethod);if("floor"===c)l=Math.floor;else if("ceil"===c)l=Math.ceil;else{if("round"!==c)throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");l=Math.round}var d,u=s.getTime()-o.getTime(),h=u/Te,p=(0,be.Z)(s)-(0,be.Z)(o),f=(u-p)/Te;if("second"===(d=null==n.unit?h<1?"second":h<60?"minute":h<Ie?"hour":f<Ee?"day":f<ke?"month":"year":String(n.unit))){var A=l(u/1e3);return i.formatDistance("xSeconds",A,a)}if("minute"===d){var m=l(h);return i.formatDistance("xMinutes",m,a)}if("hour"===d){var x=l(h/60);return i.formatDistance("xHours",x,a)}if("day"===d){var g=l(f/Ie);return i.formatDistance("xDays",g,a)}if("month"===d){var v=l(f/Ee);return 12===v&&"month"!==n.unit?i.formatDistance("xYears",1,a):i.formatDistance("xMonths",v,a)}if("year"===d){var b=l(f/ke);return i.formatDistance("xYears",b,a)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}function Ue(e,t){return(0,Ce.Z)(1,arguments),Re(e,Date.now(),t)}var Be=n(16856),Ze=n(69077);var Me=n(92077),Pe=n.n(Me);function Le(){var e=(0,Y.H)(),t=(0,a.AI)(),n=t.poolService,i=t.pool,r=(0,Z.l)(P),o=r.inputAmounts,s=r.selectedOptions,l=(0,te.k)().slippage,c=(0,D.rT)(o).map((function(e){var t,n=e.amount,r=e.address,o=(null===(t=i.tokens.find((function(e){return e.address===r})))||void 0===t?void 0:t.index)||-1,a=i.investConfig.options.find((function(e){return e.poolTokenIndex===o}));return{amount:n,address:s["".concat(o)]||(null===a||void 0===a?void 0:a.tokenOptions[0].address)||r}})),d=(0,_.useQuery)(["joinGetBptOutAndPriceImpactForTokensIn",c,l],(0,S.Z)(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c&&!c.every((function(e){return!e.amount||0===parseFloat(e.amount)}))){e.next=2;break}return e.abrupt("return",{minBptReceived:"0",priceImpact:0});case 2:return t=c.map((function(e){return{amount:e.amount,address:(0,D.TS)(e.address)}})),e.abrupt("return",n.joinGetBptOutAndPriceImpactForTokensIn(t,l));case 4:case"end":return e.stop()}}),e)}))),{enabled:c.length>0,staleTime:0,cacheTime:0}),u=d.data,h=Math.abs((null===u||void 0===u?void 0:u.priceImpact)||0),p=h>e.priceImpact.invest.high,f=!p&&h>e.priceImpact.invest.noticeable,A=Pe()(h>1e-6?h:0).format("0.00%");return(0,g.Z)((0,x.Z)({},d),{bptOutAndPriceImpact:u,hasHighPriceImpact:p,hasMediumPriceImpact:f,formattedPriceImpact:A})}function De(e){var t=e.bptIn,n=e.totalInvestValue,r=void 0===n?0:n,o=e.relicId,s=Le().bptOutAndPriceImpact,a=function(e,t){var n=(0,Y.H)(),i=(0,Ze.yL)(),r=(0,d.useRef)(new Be.G(n.reliquary.address,n.chainId,n.beets.address)).current;return(0,_.useQuery)("relicDepositImpact",(0,S.Z)(T().mark((function n(){return T().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!Number.isNaN(e)&&t){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,r.getDepositImpact({relicId:t,provider:i,amount:e});case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)}))),{enabled:!!t&&!Number.isNaN(e)})}(parseFloat(t||(null===s||void 0===s?void 0:s.minBptReceived)||""),o),l=a.data,c=a.isFetching,u=a.refetch;return(0,d.useEffect)((function(){o&&u()}),[o]),void 0===l||l.staysMax?null:(0,i.jsx)(f.xu,{w:"full",children:(0,i.jsxs)(E.bZ,{status:"warning",mb:"4",children:[(0,i.jsx)(E.zM,{alignSelf:"center"}),c?(0,i.jsx)(f.xu,{w:"full",children:(0,i.jsx)(ae.N2,{my:"2",startColor:"beets.green",endColor:"beets.highlight",noOfLines:3,spacing:"4",skeletonHeight:"2"})}):"Investing ".concat((0,H.Rj)(r)," into this relic will affect its maturity. It will take an additional ").concat(Ue(new Date(Date.now()+l.depositImpactTimeInMilliseconds))," to reach maximum maturity.")]})})}var Oe=n(25675),ze=n.n(Oe),Ve=n(53399),Fe=n.n(Ve),We={src:"/_next/static/media/background.952d692c.png",height:840,width:2108,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAAD1BMVEUA//8A//8A//8A//8A//+oLliQAAAABXRSTlMJIi9RbBH1Q84AAAAJcEhZcwAALEsAACxLAaU9lqkAAAAcSURBVHicY2BgYGRiYmRgYGBgYmZhYWYCsSAiAAGwAB/n1UwmAAAAAElFTkSuQmCC"},He={src:"/_next/static/media/complete.ebe40447.png",height:1060,width:1044,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAVFBMVEUGIRsVSGcvLzIhF3IbGRkDACAJCAcCDxZMaXEaGBgWM4Y1UksAkG4AbroASUsBdLoDY7EAzc0Ao78AAAAbKIILHCMA7bYBuLoDAwMIO20AREACeb8ATQXXAAAAGnRSTlMFMOaMZafkGAAw/nM1StTvUunpUlL7/f2D/RPwkT0AAAAJcEhZcwAAFiUAABYlAUlSJPAAAABASURBVHicFcvHEcAwDASxlRV4lHNO/ffpMf4Av5IhobVpcowBednvWjdEeY7znZDyMC9jD6S2CwaYu5nxRyTpA1TyAjjCJRk3AAAAAElFTkSuQmCC"},Xe={src:"/_next/static/media/approve-vault.e0479574.png",height:1059,width:1070,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAASFBMVEUAaG4DAAAA//8Af38AAAAVFRUEBAQC/fwA/f0E//8An58AdXVDQ0NVVVUH2rYAAAAC89k3NzcRjmMAh3wAAQEMCQlBPT05OTkjBsP9AAAAGHRSTlMB7hIgESC/MD4iQDQ1dGKMWVfBc42n1sj3D02gAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAPUlEQVR4nC3LRxKAQAzEQAH2jk1aMv//KUWBTn0RnIWv+0IhoDT7kpEvtjklOGqGooV1sqHvAB/dzf4TeAA9kwGDJ1rEzwAAAABJRU5ErkJggg=="},Ne={src:"/_next/static/media/approve-relayer.f1199c64.png",height:1059,width:1044,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAOVBMVEVMaXEBAgI9PT0DAAEA/vsAAAAFHyMKGRoI//8B/v4HBgZTU1MJz6UD78wSflEASjwLCAhCQUAzMzN3MEcpAAAAE3RSTlMAq0L6LQYUHxEgin1sULhcy+q2DPSL2QAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAADlJREFUeJwly0sWgDAIxdC0Fh7Uv/tfrEfM6E4C8+LvuS0yA9py7mMUji0/zBZZ6KtLDqhLcgOzul809wFTSDj7DwAAAABJRU5ErkJggg=="},Qe={src:"/_next/static/media/approve-relic.d5abef63.png",height:1059,width:1044,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAASFBMVEVMaXEHIyoAb2w9PT0A3t4B//8P//8D/f0A+fkODg4AjY0A+/8HBgYDAAABAwNUUlIKxZYE7r0RglUAAgIAVkwzMzNDPj4LBgYpFpACAAAAGHRSTlMAFCtCBzoNFBgfHx6a+rF8XT68f2S26Mn4hMlbAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAPUlEQVR4nD3GWQ6AIAxAwcdS2gKKu/e/qTEmztdAv0tTy3BetZgpzNOxti/bkt/sXUWkQBohxprBk7sHfg9QtAHMI8VSoAAAAABJRU5ErkJggg=="},Ge={src:"/_next/static/media/migrate-legacy.b5bb4a58.png",height:1085,width:980,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAMAAAAC2hU0AAAAQlBMVEVMaXFkZ2QoIiQFFg8CAgIAAAABbkkDDAgBGBADOykBAQEAAQEHelQALx8tbVdcXFw2l3YAAAABAAAUEREAnWk8PDwd1n3FAAAAFHRSTlMAIGQtJRCrRz93/mzF25hIdrmY41xCK9EAAAAJcEhZcwAAFiUAABYlAUlSJPAAAAA5SURBVHicFctJFgARDEDBT5CEnsX9r9rPopYFQJ0KiMnKQIuvD+Dx0gd2XE1fxeMMz4lqouVOu20/MC8BdM2aBKYAAAAASUVORK5CYII="},Ye={src:"/_next/static/media/approve-beets.fda4a6ad.png",height:1059,width:1044,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAASFBMVEUAQUEDAAABAwMA//8A//9EPj9UCAgJLS0H//8EQURFRUUbh4JUUlIL3KsSf1E4hW4AAABXAQEAT0UAAAALCAgzMzMNCgpCQUBWmqvxAAAAGHRSTlMB+rEdCVRgIhIXOy98Wbh2n9Rgf8u2lezb/IMTAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAOElEQVR4nC3G2xZAIBRAwa3bOYmiwv//qZXM08Ddma6HcAbALLX49CXvTh20Q9WO+C2KREBWmfm9PKoBeIPoqwsAAAAASUVORK5CYII="},qe={src:"/_next/static/media/approve-wftm.a48f163b.png",height:1059,width:1044,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAATlBMVEUAZG8FWl8P6/c9PT0FBAQA//8AV1NMaXEODg4G+vU8zvoDAAAHBgYAAAAA//8K//85wu0KzZxUUlISfE8c2NNAvesATkQAAAAzMzNCQUEgwD4TAAAAGnRSTlMEGSxCoAkkACAQZfrAFT4ZWGJ8tnbSYX+27PcuNNMAAAAJcEhZcwAAFiUAABYlAUlSJPAAAAA/SURBVHicFcZXEoAgFMXQUOQ+imIv+9+oQ+Z8BMUmMbwf5VqFWr3P4kGxHtuSJ/TE3P2YsLuUHGDBzGYQaPQDVTkCGkiQapUAAAAASUVORK5CYII="},Ke={src:"/_next/static/media/1x1-transparent.5faec69b.png",height:1,width:1,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAA1BMVEVMaXFNx9g6AAAAAXRSTlMAQObYZgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAxJREFUeJxjYKAOAAAASAABLrg8fgAAAABJRU5ErkJggg=="},Je=n(95421),_e=n(85388);function $e(){var e=me().currentStep;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(f.xu,{mt:"4",children:(0,i.jsx)("div",{className:Fe().container,children:(0,i.jsxs)("div",{className:Fe().overlapGrid,children:[(0,i.jsx)(ze(),{src:We,alt:"background",priority:!0}),(0,i.jsx)(Je.M,{initial:!1,children:(0,i.jsx)(_e.E.div,{initial:{x:300,opacity:0},animate:{x:0,opacity:1},exit:{x:-300,opacity:0},transition:{x:{type:"spring",stiffness:90,damping:15},opacity:{duration:.25}},children:(0,i.jsx)(ze(),{src:function(e){switch(e){case"wFTM":return qe;case"BEETS":return Ye;case"unstake":return Ge;case"batch-relayer-reliquary":return Ne;case"batch-relayer":return Qe;case"approve-vault":return Xe;case"reliquary-migrate":case"reliquary-invest":return He;default:return Ke}}(e),alt:"reliquary"})},e)})]})})})})}function et(e){var t=e.investTypeText,n=me().currentStep,r=(0,y.Z)().createRelic;return(0,i.jsxs)(f.gC,{pb:"4",spacing:"0",children:[(0,i.jsx)(f.X6,{size:"sm",color:"beets.green",children:t}),function(){var e=function(e){switch(e){case"wFTM":return{title:"wFTM",subtitle:"Approve deposit of wFTM"};case"BEETS":return{title:"BEETS",subtitle:"Approve deposit of BEETS"};case"unstake":return{title:"Unstake fBEETS",subtitle:"From the Beethoven X farm"};case"batch-relayer-reliquary":return{title:"Transactions",subtitle:"Approve deposit, withdraw and claim rewards"};case"batch-relayer":return{title:"Relic Creation",subtitle:"Approve creation of new relics"};case"approve-vault":return{title:"Vault",subtitle:"Approve vault to spend your fBEETS"};case"reliquary-migrate":return{title:"Destination relic"};default:return{title:"".concat(r?"Create & d":"D","eposit into a relic")}}}(n);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.xv,{fontSize:"3xl",fontWeight:"400",children:null===e||void 0===e?void 0:e.title}),(null===e||void 0===e?void 0:e.subtitle)&&(0,i.jsx)(f.xv,{children:e.subtitle})]})}()]})}function tt(e){var t=e.onInvestComplete,n=e.onClose,r=V().selectedInvestTokensWithAmounts,o=(0,y.Z)(),s=o.selectedRelic,a=o.createRelic,l=V().totalInvestValue;return(0,i.jsx)(Ae,{children:(0,i.jsxs)(f.gC,{spacing:"4",width:"full",children:[(0,i.jsxs)(f.gC,{px:"4",width:"full",spacing:"0",children:[(0,i.jsx)($e,{}),(0,i.jsx)(et,{investTypeText:"maBEETS"}),(0,i.jsx)(X,{}),!a&&s&&(0,i.jsx)(De,{totalInvestValue:l,relicId:s.relicId}),(0,i.jsx)(R.L,{width:"full",children:(0,i.jsx)(f.gC,{width:"full",divider:(0,i.jsx)(f.cX,{borderColor:"whiteAlpha.200"}),p:"2",children:r.map((function(e,t){return(0,i.jsx)(ve.Z,{address:e.address,amount:e.amount},e.address)}))})})]}),(0,i.jsx)(ge,{onInvestComplete:t,onClose:n})]})})}var nt=n(46513),it=n(12064),rt=n(73656),ot=n(59046),st=n(86742),at=n(1437),lt=n(41472),ct=n(738),dt=n(23450),ut=n(3784);function ht(){var e,t,n=(0,a.AI)().poolService,i=V().userInvestTokenBalances,r=(0,ee.q)().userAddress,o=(0,O.yA)().priceForAmount,s=(0,_.useQuery)([{key:"joinGetProportionalInvestmentAmount",userInvestTokenBalances:i,userAddress:r}],function(){var e=(0,S.Z)(T().mark((function e(t){var r,s;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.queryKey,r=!!i.find((function(e){return(0,D.Gn)(e.address)})),n.joinGetMaxProportionalForUserBalances){e.next=4;break}return e.abrupt("return",{});case 4:return e.next=6,n.joinGetMaxProportionalForUserBalances(i);case 6:return s=e.sent,e.abrupt("return",{tokenProportionalAmounts:Object.fromEntries(s.map((function(e){return[r?(0,D.DL)(e.address):e.address,e.amount]}))),totalValueProportionalAmounts:(0,M.sumBy)(s,o)});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{enabled:!0,staleTime:0,cacheTime:0});return(0,g.Z)((0,x.Z)({},s),{tokenProportionalAmounts:null===(e=s.data)||void 0===e?void 0:e.tokenProportionalAmounts,totalValueProportionalAmounts:null===(t=s.data)||void 0===t?void 0:t.totalValueProportionalAmounts})}function pt(e){var t=e.onShowProportional,n=e.onShowCustom,r=(0,a.AI)().pool,o=(0,O.yA)().formattedPrice,s=(0,l.pt)(),c=s.userPoolTokenBalances,u=s.investableAmount,h=V().canInvestProportionally,p=(0,j.Sx)({base:!0,md:!1}),m=ht().totalValueProportionalAmounts,x=(m||0)>0&&h,g=(0,d.useMemo)((function(){return(m||0)<=0?"You don't have the appropriate funds for a proportional investment. Refer below to the tokens you need to make a proportional investment.":"This pool does not support proportional investment."}),[x]),v=p?f.gC:f.Ug;return(0,i.jsxs)(f.gC,{width:"full",children:[(0,i.jsxs)(f.gC,{alignItems:"flex-start",px:"4",pb:"4",width:"full",children:[(0,i.jsxs)(f.gC,{alignItems:"flex-start",spacing:"0",children:[(0,i.jsx)(f.X6,{size:"sm",children:"Choose your investment type"}),(0,i.jsxs)(f.xu,{fontSize:"base",children:["The max amount you can invest is shown for each option.",(0,i.jsx)(ut.Z,{noImage:!0,label:"When investing proportionally, you enter the Liquidity Pool in the specific ratios set by the pool. This helps to ensure you aren\u2019t subject to the fees associated with price impact. Alternatively, customising your investment allows you to invest with your desired proportions. However, this action may shift the pool out of balance and subject you to price impact.",children:(0,i.jsxs)(f.Ug,{spacing:"1",alignItems:"center",children:[(0,i.jsx)(f.xv,{color:"beets.highlight",fontSize:"sm",children:"What's the difference"}),(0,i.jsx)(f.xu,{_hover:{transform:"scale(1.2)"},children:(0,i.jsx)(ze(),{src:lt.Z,width:"24",height:"24",alt:"beets-balanced"})})]})})]})]}),(0,i.jsxs)(v,{width:"full",children:[(0,i.jsx)(ut.Z,{noImage:!0,label:x?"":g,children:(0,i.jsx)(f.xu,{width:"full",children:(0,i.jsx)(A.zx,{_hover:{borderColor:"beets.green"},borderWidth:1,borderColor:"beets.transparent",disabled:!x,height:"140px",width:"full",onClick:t,children:(0,i.jsxs)(f.gC,{spacing:"1",children:[(0,i.jsx)(ze(),{src:at.Z,height:"48",alt:"beets-balanced"}),(0,i.jsx)(f.xv,{fontSize:"lg",children:(0,H.Rj)(m||0)}),(0,i.jsx)(f.xv,{fontSize:"sm",children:"Proportional investment"}),(0,i.jsx)(f.xv,{fontSize:"xs",color:"beets.green",children:"Recommended"})]})})})}),(0,i.jsx)(A.zx,{_hover:{borderColor:"beets.green"},borderWidth:1,borderColor:"beets.transparent",height:"140px",width:"full",onClick:n,children:(0,i.jsxs)(f.gC,{spacing:"1",children:[(0,i.jsx)(ze(),{src:ct.Z,height:"48",alt:"beets-smart"}),(0,i.jsx)(f.xv,{fontSize:"lg",children:(0,H.Rj)(u)}),(0,i.jsx)(f.xv,{fontSize:"sm",children:"Custom investment"}),(0,i.jsx)(f.xv,{fontSize:"xs",color:"beets.green",children:"\xa0"})]})})]})]}),(0,i.jsxs)(f.gC,{width:"full",p:"4",backgroundColor:"blackAlpha.500",alignItems:"flex-start",children:[(0,i.jsx)(f.xv,{fontSize:"md",fontWeight:"semibold",children:"Pool tokens in your wallet"}),(0,i.jsx)(R.L,{width:"full",p:"4",children:(0,i.jsx)(f.gC,{divider:(0,i.jsx)(f.cX,{borderColor:"whiteAlpha.200"}),spacing:"4",width:"full",alignItems:"flex-start",children:r.investConfig.options.map((function(e,t){return(0,i.jsx)(f.gC,{divider:(0,i.jsx)(f.cX,{borderColor:"whiteAlpha.200"}),spacing:"4",width:"full",alignItems:"flex-start",children:e.tokenOptions.map((function(e,n){var r=(0,D.Wl)(e.address,c),s=Math.min((null===e||void 0===e?void 0:e.decimals)||18,12);return(0,i.jsxs)(f.Ug,{justifyContent:"space-between",width:"full",children:[(0,i.jsxs)(f.Ug,{children:[(0,i.jsx)(st.Z,{width:"40px",height:"40px",maxWidth:"40px",maxHeight:"40px",address:e.address}),(0,i.jsxs)(f.xu,{children:[e.name,(0,i.jsxs)(f.Ug,{spacing:"1",children:[(0,i.jsx)(f.xv,{fontWeight:"bold",children:null===e||void 0===e?void 0:e.symbol}),(0,i.jsx)(f.rU,{href:(0,dt.NE)(e.address),target:"_blank",ml:"1.5",children:(0,i.jsx)(ot.Z,{size:14})})]})]})]}),(0,i.jsxs)(f.gC,{alignItems:"flex-end",spacing:"0",children:[(0,i.jsx)(f.xv,{children:(0,D.Hi)(r,s)}),(0,i.jsxs)(f.xv,{fontSize:"sm",color:"beets.base.100",children:["~",o({address:e.address,amount:r})]})]})]},"".concat(t,"-").concat(n))}))},"option-".concat(t))}))})})]})]})}var ft=n(71197),At=n(69129);function mt(e){var t=(0,F.Z)({},e),n=Le(),r=n.formattedPriceImpact,o=n.hasHighPriceImpact,s=n.hasMediumPriceImpact,a=n.isLoading;return(0,i.jsx)(f.xu,(0,g.Z)((0,x.Z)({},t),{width:"full",children:(0,i.jsx)(R.L,{p:"2",width:"full",children:(0,i.jsxs)(f.gC,{width:"full",children:[(0,i.jsxs)(f.Ug,{width:"full",justifyContent:"space-between",style:o?{color:"white",fontWeight:"bold",backgroundColor:"red",borderRadius:"4px",padding:"0px 4px 2px 4px"}:{},children:[(0,i.jsx)(m.R,{label:"Price impact",infoText:"This is the difference between the current market price and the price you will pay due to your investment influencing the balance and internal price of tokens within the pool."}),a?(0,i.jsx)(ae.Od,{h:"3",w:"12"}):(0,i.jsx)(f.xv,{fontSize:".85rem",color:s?"orange":"white",children:r})]}),(0,i.jsxs)(f.Ug,{justifyContent:"space-between",width:"full",children:[(0,i.jsx)(f.xu,{flex:"1",children:(0,i.jsx)(m.R,{label:"Max slippage",infoText:"The maximum amount of slippage that you're willing to accept for this transaction."})}),(0,i.jsx)(At.m,{})]})]})})}))}var xt=n(42701),gt=n(70913);function vt(e){var t=e.onShowPreview,n=(0,a.AI)(),r=n.pool,o=(n.requiresBatchRelayerOnJoin,L()),s=o.inputAmounts,c=o.setInputAmount,d=o.setSelectedOption,u=V(),h=u.selectedInvestTokens,m=u.hasValidUserInput,x=(0,l.pt)().userPoolTokenBalances,g=(0,gt.M)(),v=g.hasHighPriceImpact,b=g.formattedPriceImpact,w=(0,pe.Z)((0,p.kt)(!1),2),j=w[0],y=w[1].toggle;(0,q.F)().data;return(0,i.jsx)(f.xu,{children:(0,i.jsxs)(f.xu,{p:"4",children:[(0,i.jsx)(f.xu,{mb:"4",children:(0,i.jsx)(X,{})}),r.investConfig.options.map((function(e,t){var n;return(0,i.jsx)(xt._,{tokenOptions:e.tokenOptions,selectedTokenOption:h[t],balance:(null===(n=x.find((function(e){return e.address===h[t].address})))||void 0===n?void 0:n.amount)||"0",setInputAmount:function(e){return c(h[t].address,e)},setSelectedTokenOption:function(t){return d(e.poolTokenIndex,t)},value:s[h[t].address],mb:"4"},t)})),(0,i.jsx)(mt,{mt:"4"}),(0,i.jsx)(ft.UO,{in:v,animateOpacity:!0,children:(0,i.jsxs)(E.bZ,{status:"error",borderRadius:"md",mt:"4",children:[(0,i.jsx)(se.XZ,{id:"high-price-impact-acknowledge",isChecked:j,colorScheme:"red",onChange:y,mt:"1",mr:"2"}),(0,i.jsxs)(f.xu,{children:["I confirm that my custom investment will result in a ",b," price impact, subjecting me to fees and possible impermanent loss."]})]})}),(0,i.jsx)(A.zx,{variant:"primary",width:"full",mt:"4",onClick:t,isDisabled:!m||v&&!j,children:"Preview"})]})})}var bt=n(97113),wt=n(74590);function jt(e){var t=e.onShowPreview,n=(0,a.AI)(),r=n.pool,o=n.poolService,s=r.investConfig.options,c=L(),d=c.setSelectedOption,u=c.selectedOptions,h=c.setInputAmounts,p=c.inputAmounts,m=ht().tokenProportionalAmounts,x=V(),g=x.selectedInvestTokens,v=x.isInvestingWithEth,b=x.hasValidUserInput,w=(0,l.pt)().userPoolTokenBalances;function j(){return(j=(0,S.Z)(T().mark((function e(t,n){var i;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return h({}),e.abrupt("return");case 3:if(!o.joinGetProportionalSuggestionForFixedAmount){e.next=8;break}return e.next=6,o.joinGetProportionalSuggestionForFixedAmount({address:(0,D.TS)(t.address),amount:(0,wt.u)(n,t.decimals)},[(0,D.TS)(t.address)]);case 6:i=e.sent,h((0,M.mapValues)((0,M.keyBy)(i,(function(e){return v?(0,D.DL)(e.address):e.address})),(function(e){return e.amount})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=g[0],C=m&&m[y.address]&&p[y.address]?Math.round(parseFloat(p[y.address])/parseFloat(m[y.address])*100):0;return(0,i.jsx)(f.xu,{children:(0,i.jsxs)(f.gC,{p:"4",spacing:"4",children:[(0,i.jsx)(X,{}),(0,i.jsxs)(R.L,{py:"2",px:"4",children:[(0,i.jsxs)(bt.iR,{mt:"8",focusThumbOnChange:!1,value:C,onChange:function(e){if(100===e)h(m||{});else if(0===e)h({});else{var t=(0,M.mapValues)(m||{},(function(t,n){var i,r=(null===(i=g.find((function(e){return e.address===n})))||void 0===i?void 0:i.decimals)||18;return(0,z.i$)((0,z.kx)(t,r).times(e/100),r)}));h(t)}},children:[(0,i.jsx)(bt.Uj,{children:(0,i.jsx)(bt.Ms,{})}),(0,i.jsx)(bt.gs,{boxSize:6}),(0,i.jsxs)(bt.jz,{value:C,textAlign:"center",color:"white",mt:"-10",ml:"-30px",w:"12",fontSize:"md",width:"60px",borderRadius:"md",children:[C,"%"]})]}),(0,i.jsx)(f.xv,{children:"Drag the slider to configure your investment amount or you can customize the amount for a single token below."})]}),(0,i.jsx)(R.L,{mt:"4",p:"2",width:"full",children:(0,i.jsx)(f.gC,{width:"full",divider:(0,i.jsx)(f.cX,{borderColor:"whiteAlpha.200"}),children:s.map((function(e,t){var n=g[t],r=p[n.address];return(0,i.jsx)(ve.Z,{withInput:!0,onAmountChange:function(e){return function(e,t){return j.apply(this,arguments)}(n,e)},alternateTokens:e.tokenOptions,address:n.address,selectedAlternateToken:u["".concat(e.poolTokenIndex)]||e.tokenOptions[0].address,onSelectedAlternateToken:function(t){return d(e.poolTokenIndex,t)},amount:r,balance:(0,D.Wl)(n.address,w)},n.address)}))})}),(0,i.jsx)(mt,{mt:"8"}),(0,i.jsx)(A.zx,{variant:"primary",width:"full",mt:"8",onClick:t,isDisabled:!b||0===C,children:"Preview"})]})})}function yt(e){var t=e.createRelic,n=void 0!==t&&t,r=(e.activatorLabel,e.activatorProps),o=void 0===r?{}:r,s=e.noActivator,a=e.onClose,l=e.isVisible,c=void 0!==l&&l,u=e.isConnected,h=void 0===u||u,m=function(){H(!!n),j()},v=function(){z&&(P(null),H(!1)),B("start"),Y(),C(),a&&a()},b=(0,p.qY)(),w=b.isOpen,j=b.onOpen,C=b.onClose,R=(0,d.useState)("start"),U=R[0],B=R[1],Z=(0,d.useState)(null),M=Z[0],P=Z[1],D=(0,d.useRef)(null),O=(0,d.useState)(!1),z=O[0],V=O[1],F=(0,y.Z)(),W=F.selectedRelic,H=F.setCreateRelic,X=(0,nt._)(),N=(0,d.useRef)(null),Q=(0,d.useRef)(null),Y=L().clearInvestState;return(0,d.useEffect)((function(){c?m():v()}),[c]),(0,d.useLayoutEffect)((function(){setTimeout((0,S.Z)(T().mark((function e(){var t,n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=9;break}return N.current&&X.set({opacity:0,transform:"scale(.75)"}),e.next=5,X.start({opacity:1,transform:"scale(1)"});case 5:(n=null===(t=N.current)||void 0===t?void 0:t.getBoundingClientRect())&&(Q.current=n),e.next=10;break;case 9:X.start({opacity:0,transform:"scale(0.75)"});case 10:case"end":return e.stop()}}),e)}))),0)}),[w]),(0,d.useLayoutEffect)((function(){if(N.current){var e=N.current.getBoundingClientRect();if(Q.current){var t=(n=Q.current,i=e,{x:n.x-i.x,y:n.y-i.y,scaleX:n.width/i.width,scaleY:n.height/i.height});(0,it.j)(t.scaleY,1,{onUpdate:function(e){N.current&&(N.current.style.transform="scaleY(".concat(e,")"))}})}Q.current=e}var n,i}),[U]),(0,i.jsxs)(f.xu,{width:"full",children:[!s&&(0,i.jsx)(A.zx,(0,g.Z)((0,x.Z)({variant:"primary",onClick:m,width:"full",disabled:!h},o),{children:"Get maBEETS"})),(0,i.jsxs)(I.u_,{motionPreset:"none",isOpen:w,onClose:v,size:"lg",initialFocusRef:D,children:[(0,i.jsx)(I.ZA,{bg:"blackAlpha.900"}),(0,i.jsx)(Je.M,{exitBeforeEnter:!0,children:(0,i.jsxs)(rt.PJ,{position:"relative",isTransparent:!0,children:[(0,i.jsx)(f.xu,{as:_e.E.div,width:"full",height:"full",position:"absolute",top:"0",left:"0",right:"0",zIndex:-1,animate:X,ref:N,rounded:"md",transformOrigin:"top",background:"gray.700",children:(0,i.jsx)(f.xu,{transformOrigin:"top",width:"full",height:"full",background:"blackAlpha.400",children:(0,i.jsx)(f.xu,{width:"full",height:"full",className:"bg"})})}),(0,i.jsx)(I.ol,{}),"start"!==U?(0,i.jsx)(A.hU,{"aria-label":"back-button",icon:(0,i.jsx)(k.Z,{}),variant:"ghost",p:"0",width:"32px",height:"32px",minWidth:"32px",position:"absolute",top:"12px",left:"12px",onClick:function(){"proportional"===U||"custom"===U?B("start"):"preview"===U&&("proportional"===M?B("proportional"):"custom"===M&&B("custom"))}}):null,(0,i.jsxs)(rt.vC,{children:["start"===U?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f.X6,{size:"md",noOfLines:1,children:["Invest into ",n?"a new  ":"an existing ","relic"]}),(0,i.jsx)(f.xv,{fontSize:"1rem",fontWeight:"normal",children:"Deposit into the fresh BEETS farm to get maBEETS."})]}):null,"proportional"===U?(0,i.jsx)(f.X6,{size:"md",marginLeft:"8",textAlign:"left",children:"Proportional investment"}):null]}),(0,i.jsxs)(rt.Bp,{p:"0",children:[(0,i.jsxs)(G.i,{isVisible:"start"===U,children:[!n&&W&&(0,i.jsx)(f.xu,{px:"4",children:(0,i.jsxs)(E.bZ,{status:"warning",mb:"4",children:[(0,i.jsx)(E.zM,{}),"Investing more funds into your relic will affect your level up progress."]})}),(0,i.jsx)(pt,{onShowProportional:function(){P("proportional"),B("proportional"),Y()},onShowCustom:function(){P("custom"),B("custom"),Y()}})]}),(0,i.jsx)(G.i,{isVisible:"proportional"===U,children:(0,i.jsx)(jt,{onShowPreview:function(){P("proportional"),B("preview")}})}),(0,i.jsx)(G.i,{isVisible:"custom"===U,children:(0,i.jsx)(vt,{onShowPreview:function(){P("custom"),B("preview")}})}),(0,i.jsx)(G.i,{isVisible:"preview"===U,children:(0,i.jsx)(tt,{onInvestComplete:function(){V(!0)},onClose:v})})]})]})})]})]})}var St=n(83946);function Ct(e){(0,Ce.Z)(1,arguments);var t=(0,St.Z)(e);return(0,je.Z)(1e3*t)}var Tt=n(51820);function It(e,t){if(!e||!t.length)return{canUpgrade:!1,canUpgradeTo:-1,progressToNextLevel:0,entryDate:new Date,levelUpDate:new Date};var n=e.entry,i=Date.now()/1e3-n,r=(0,N.Z)(t);r.reverse();var o=t.length-1-r.findIndex((function(e){return i>=parseInt(e,10)})),s=i>parseInt(t[t.length-1],10),a=s?t.length:o+1,l=s&&e.level<t.length-1||o>0&&o>e.level,c=parseInt(t[e.level],10),d=Date.now()/1e3-(c+e.entry),u=s?3600:parseInt(t[e.level+1],10),h=l?100:d/604800*100,p=Ct(n),f=function(e,t){(0,Ce.Z)(2,arguments);var n=(0,St.Z)(t);return(0,Tt.Z)(e,1e3*n)}(p,u);return{canUpgrade:l,canUpgradeTo:a,progressToNextLevel:h,isMaxMaturity:s,entryDate:p,levelUpDate:f}}var Et=n(51351),kt=n(94046),Rt=n(46707);function Ut(e){e=null!==e?e:(0,Et.Z)(new TypeError("Cannot destructure undefined"));var t=(0,y.Z)(),n=t.selectedRelic,r=t.refetchRelicPositions,o=t.refetchMaturityThresholds,s=function(){var e=(0,Y.H)(),t=(0,ne.lC)({config:{addressOrName:e.reliquary.address,contractInterface:Rt,functionName:"updatePosition"},transactionType:"LEVEL_UP"}),n=t.submit,i=(t.submitAsync,(0,v.Z)(t,["submit","submitAsync"]));return(0,x.Z)({levelUp:function(e){n({args:[parseInt(e,10)],toastText:"Level Up relic #".concat(e)})}},i)}(),a=s.levelUp,l=(0,v.Z)(s,["levelUp"]),c=(0,kt.pm)().showToast;return(0,d.useEffect)((function(){l.submitError&&c({id:"level-up-error",auto:!0,type:kt.pC.Error,content:(0,i.jsx)(f.Ug,{children:(0,i.jsx)(f.xv,{children:l.submitError.message})})})}),[l.submitError]),n?(0,i.jsx)(ce.H,(0,g.Z)((0,x.Z)({inline:!0,submittingText:"Confirm...",pendingText:"Waiting...",onClick:function(){return a(n.relicId)},onConfirmed:function(){r(),o()}},l),{children:"Level Up"})):null}function Bt(){var e=(0,y.Z)().selectedRelic,t=(0,Ze.yL)();return(0,_.useQuery)(["relicPendingRewards",null===e||void 0===e?void 0:e.relicId],(0,S.Z)(T().mark((function n(){return T().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Be.K.getPendingRewardsForRelic({relicId:(null===e||void 0===e?void 0:e.relicId)||"0",provider:t}));case 1:case"end":return n.stop()}}),n)}))),{enabled:!!e})}function Zt(){var e=(0,Y.H)(),t=(0,ee.q)().userAddress,n=(0,y.Z)().selectedRelicId,i=(0,ne.lC)({config:{addressOrName:e.reliquary.address,contractInterface:Rt,functionName:"harvest"},transactionType:"HARVEST"}),r=i.submit,o=(i.submitAsync,(0,v.Z)(i,["submit","submitAsync"]));return(0,x.Z)({harvest:function(){r({args:[n,t],toastText:"Harvesting rewards for relic #".concat(n),walletText:"Harvest rewards for relic #".concat(n)})}},o)}var Mt=n(97573),Pt=n(60190),Lt=n(87344);function Dt(e){e=null!==e?e:(0,Et.Z)(new TypeError("Cannot destructure undefined"));var t,n,r=(0,y.Z)(),o=r.maturityThresholds,s=r.isLoading,l=r.selectedRelic,c=null===(t=(0,a.AI)().pool.staking)||void 0===t||null===(n=t.reliquary)||void 0===n?void 0:n.levels,u=null===c||void 0===c?void 0:c.map((function(e,t){return l&&t>l.level?"":e.allocationPoints})),h=null===c||void 0===c?void 0:c.map((function(e,t){return l&&t<l.level?"":e.allocationPoints})),p=(0,d.useMemo)((function(){return{tooltip:{trigger:"axis",axisPointer:{type:"line"},formatter:function(e){return"Level ".concat(e[0].dataIndex+1,"<br>Maturity date: ").concat(e[0].name)},confine:!0},grid:{left:"1%",bottom:0,right:"1%",top:"2%"},xAxis:{type:"category",show:!1,boundaryGap:!1,data:o.map((function(e){return(0,Lt.Z)(Ct(((null===l||void 0===l?void 0:l.entry)||0)+parseInt(e)),"dd/MM/yyyy HH:mm")}))},yAxis:{show:!1,type:"value",axisLabel:{formatter:"{value} W"},axisPointer:{show:!1,snap:!0,label:{formatter:function(e){return Pe()(e.value-1).format("0a")}}}},series:[{name:"myline",type:"line",smooth:!0,itemStyle:{color:"#f30103"},lineStyle:{color:"#f30103"},areaStyle:{color:"rgba(73, 21, 54, 0.4)"},data:h},{name:"myline",type:"line",smooth:!0,itemStyle:{color:"#00ffff"},lineStyle:{color:"#00ffff"},areaStyle:{color:"rgba(0, 69, 87, 0.4)"},data:u}]}}),[s,l]);return(0,i.jsx)(Mt.Z,{px:"2",py:"4",h:"full",height:"250px",width:{base:"full",lg:"full"},children:(0,i.jsxs)(f.gC,{spacing:"2",height:"full",children:[(0,i.jsx)(f.Ug,{height:"fit-content",px:"2",w:"full",spacing:"12",alignItems:"flex-start",children:(0,i.jsx)(f.gC,{spacing:"0",alignItems:"flex-start",height:"fit-content",children:(0,i.jsx)(m.R,{labelProps:{lineHeight:"1rem",fontWeight:"semibold",fontSize:"md",color:"beets.base.50"},label:"Projected maturity",infoText:"This graph shows where this relics position is on the maturity curve and if you hover or tap, it will show an ETA for the next levels!"})})}),(0,i.jsx)(f.xu,{px:"2",w:"full",h:"full",children:(0,i.jsx)(Pt.Z,{showLoading:s,option:p,style:{height:"100%"}})})]})})}function Ot(e){var t=e.isOpen,n=e.onClose;return(0,i.jsxs)(I.u_,{isOpen:t,onClose:n,size:"lg",children:[(0,i.jsx)(I.ZA,{bg:"blackAlpha.900"}),(0,i.jsxs)(rt.PJ,{width:"full",children:[(0,i.jsx)(Dt,{}),(0,i.jsx)(I.ol,{})]})]})}var zt=n(45697),Vt=n.n(zt);function Ft(){return Ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ft.apply(this,arguments)}function Wt(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Ht=(0,d.forwardRef)((function(e,t){var n=e.color,i=void 0===n?"currentColor":n,r=e.size,o=void 0===r?24:r,s=Wt(e,["color","size"]);return d.createElement("svg",Ft({ref:t,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s),d.createElement("line",{x1:"12",y1:"20",x2:"12",y2:"10"}),d.createElement("line",{x1:"18",y1:"20",x2:"18",y2:"4"}),d.createElement("line",{x1:"6",y1:"20",x2:"6",y2:"16"}))}));Ht.propTypes={color:Vt().string,size:Vt().oneOfType([Vt().string,Vt().number])},Ht.displayName="BarChart";var Xt=Ht;function Nt(){var e=(0,a.AI)().pool,t=(0,b.c6)().isActive,n=(0,p.qY)(),r=n.isOpen,o=n.onOpen,s=n.onClose,l=(0,y.Z)(),c=l.isLoadingRelicPositions,u=l.selectedRelicLevel,h=(l.relicPositions,l.selectedRelicApr),w=Bt(),j=w.data,S=void 0===j?[]:j,C=w.refetch,T=w.isLoading,I=(0,d.useState)(!1),E=(I[0],I[1]),k=Zt(),R=k.harvest,U=(0,v.Z)(k,["harvest"]);(0,d.useEffect)((function(){E(c)}),[c]);var B=(0,re.C)(),Z=B.data,P=B.refetch,L=(0,O.yA)().priceForAmount,z=(0,M.sumBy)(S,L),V=e.dynamicData.apr.items.find((function(e){return"Swap fees APR"===e.title})),F=(null===V||void 0===V?void 0:V.apr)&&"GqlPoolAprTotal"===V.apr.__typename?V.apr.total:"0",X=(parseFloat(h)+parseFloat(F)).toString();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f.Kq,{divider:(0,i.jsx)(f.cX,{}),left:{base:"0",lg:"-42.5%"},rounded:"md",position:{base:"relative",lg:"absolute"},width:{base:"100%",lg:"60%"},top:"0",alignItems:"flex-start",background:"whiteAlpha.200",p:"4",hidden:!t,as:_e.E.div,animate:{opacity:t?1:0,transform:"scale(".concat(t?"1":"0.75",")"),transition:{delay:.1}},minHeight:"310px",justifyContent:"stretch",children:[(0,i.jsxs)(f.gC,{alignItems:"flex-start",height:"50%",w:"full",spacing:"3",children:[(0,i.jsx)(f.xv,{lineHeight:"1rem",fontWeight:"semibold",fontSize:"md",color:"beets.base.50",children:"Relic APR"}),(0,i.jsxs)(f.Ug,{children:[(0,i.jsx)("div",{className:"apr-stripes",children:Pe()(X).format("0.00%")}),(0,i.jsx)(W.Z,{onlySparkles:!0,data:e.dynamicData.apr})]}),(0,i.jsxs)(f.Ug,{children:[(0,i.jsxs)(f.Ug,{px:"3",py:"0.5",rounded:"md",backgroundColor:"beets.light",width:{base:"min-content"},whiteSpace:"nowrap",children:[(0,i.jsx)(f.xv,{fontWeight:"semibold",children:"Maturity boost"}),(0,i.jsxs)(f.Ct,{bg:"none",colorScheme:"green",p:"1",children:[null===u||void 0===u?void 0:u.allocationPoints,"x"]})]}),(0,i.jsx)(ut.Z,{noImage:!0,label:"Click here to see the maturity curve.",children:(0,i.jsx)(A.zx,{onClick:o,height:"full",p:"1.5",children:(0,i.jsx)(Xt,{height:"18px"})})})]})]}),(0,i.jsxs)(f.gC,{alignItems:"flex-start",height:"50%",w:"full",flexGrow:"1",pt:{base:"1",lg:void 0},children:[(0,i.jsx)(f.Ug,{width:"full",spacing:"12",alignItems:"flex-start",flexGrow:"1",children:(0,i.jsxs)(f.gC,{spacing:"0",alignItems:"flex-start",children:[(0,i.jsx)(m.R,{labelProps:{lineHeight:"1rem",fontWeight:"semibold",fontSize:"sm"},label:"My pending rewards",infoText:"Your accumulated liquidity incentives for this relic. At any time you can claim your rewards as long as the amount is more than $0.01"}),T?(0,i.jsx)(ae.Od,{height:"34px",width:"140px",mt:"4px",mb:"4px"}):(0,i.jsx)(f.xv,{color:"white",fontSize:"1.75rem",children:(0,H.Rj)(z)}),(0,i.jsx)(f.xu,{children:S.map((function(e,t){return(0,i.jsxs)(f.Ug,{spacing:"1",mb:t===S.length-1?"0":"0.5",children:[(0,i.jsx)(st.Z,{height:"20px",width:"20px",address:e.address}),(0,i.jsx)(ae.Od,{isLoaded:!T,children:(0,i.jsx)(f.xv,{fontSize:"1rem",lineHeight:"1rem",children:(0,D.rY)(e.amount)})})]},t)}))})]})}),Z?(0,i.jsx)(ce.H,(0,g.Z)((0,x.Z)({fullWidth:!0,width:"full",variant:"primary"},U),{onClick:R,onConfirmed:function(){C()},disabled:z<.01,children:"Claim now"})):(0,i.jsx)(ut.Z,{label:"To claim your pending rewards, you first need to approve the batch relayer.",children:(0,i.jsx)(f.xu,{w:"full",children:(0,i.jsx)(he.t,{onConfirmed:function(){P()}})})})]})]}),(0,i.jsx)(le.h_,{children:(0,i.jsx)(Ot,{isOpen:r,onClose:s})})]})}var Qt=n(97026),Gt=n(97382);function Yt(){var e=(0,Y.H)(),t=(0,Gt.QK)({variables:{id:"".concat(e.reliquary.fbeets.farmId),range:"THIRTY_DAYS"}}),n=t.data,i=(0,v.Z)(t,["data"]),r=n&&n.snapshots.length>0?n.snapshots[n.snapshots.length-1]:null;return(0,g.Z)((0,x.Z)({},i),{data:r})}var qt=n(29907);function Kt(){var e=(0,b.c6)().isActive,t=(0,y.Z)(),n=t.isLoadingRelicPositions,r=t.selectedRelicLevel,o=t.selectedRelic,s=t.weightedTotalBalance,a=t.beetsPerDay,l=t.isLoading,c=(0,O.yA)().priceForAmount,u=(0,Y.H)(),h=Yt(),p=h.data,A=h.loading,x=parseFloat((null===o||void 0===o?void 0:o.amount)||"0")*((null===r||void 0===r?void 0:r.allocationPoints)||0),g=p&&o?x/s:0,v=a*g,w=c({address:u.beets.address,amount:"".concat(v)}),j=Bt(),S=(j.data,j.refetch,(0,d.useState)(!1)),C=(S[0],S[1]);Zt().harvest;return(0,d.useEffect)((function(){C(n)}),[n]),(0,i.jsxs)(f.Kq,{divider:(0,i.jsx)(f.cX,{}),right:{base:"0",lg:"-41.25%"},height:"full",top:"0",rounded:"md",position:{base:"relative",lg:"absolute"},spacing:"4",width:{base:"100%",lg:"60%"},alignItems:"flex-start",background:"whiteAlpha.200",p:"4",hidden:!e,as:_e.E.div,animate:{opacity:e?1:0,transform:"scale(".concat(e?"1":"0.75",")"),transition:{delay:.1}},children:[(0,i.jsxs)(f.gC,{spacing:"0",h:"50%",w:"full",alignItems:"flex-start",children:[(0,i.jsx)(m.R,{labelProps:{lineHeight:"1rem",fontWeight:"semibold",fontSize:"md",color:"beets.base.50"},label:"Relic share",infoText:"The size of your relic relative to all value stored in relics. Your staked share represents the percent of liquidity incentives you are entitled to."}),(0,i.jsxs)(f.gC,{alignItems:"flex-start",children:[l||A?(0,i.jsx)(ae.Od,{height:"34px",width:"140px",mt:"4px",mb:"4px"}):(0,i.jsx)(f.xv,{color:"white",fontSize:"1.75rem",children:g<1e-4?"< 0.01%":Pe()(g).format("0.00%")}),l||A?(0,i.jsx)(ae.Od,{height:"16px",width:"45px"}):(0,i.jsxs)(f.xv,{fontSize:"1rem",lineHeight:"1rem",children:[Pe()(x).format("0.00a")," / ",Pe()(s).format("0.00a")," ",(0,i.jsx)(f.xv,{as:"span",fontSize:"md",color:"beets.base.50",children:"maBEETS"})]})]})]}),(0,i.jsxs)(f.gC,{spacing:"0",h:"50%",w:"full",alignItems:"flex-start",children:[(0,i.jsx)(m.R,{labelProps:{lineHeight:"1rem",fontWeight:"semibold",fontSize:"sm",color:"beets.base.50"},label:"My potential daily yield",infoText:"The potential daily value is an approximation based on swap fees, current token prices and your staked share. A number of external factors can influence this value from second to second."}),l?(0,i.jsx)(ae.Od,{height:"34px",width:"140px",mt:"4px",mb:"4px"}):(0,i.jsx)(f.xv,{color:"white",fontSize:"1.75rem",children:(0,H.Rj)(w)}),a>0&&(0,i.jsxs)(f.Ug,{spacing:"1",mb:"0.5",children:[(0,i.jsx)(st.Z,{height:"20px",width:"20px",address:qt.$.beets.address}),(0,i.jsx)(Qt.u,{label:"BEETS emissions for reliquary are calculated per second.",children:(0,i.jsxs)(f.xv,{fontSize:"1rem",lineHeight:"1rem",children:[Pe()(g*a).format("0,0.000")," / day"]})})]})]})]})}function Jt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function $t(e,t,n){return t&&_t(e.prototype,t),n&&_t(e,n),e}function en(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nn(e,t)}function tn(e){return tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},tn(e)}function nn(e,t){return nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},nn(e,t)}function rn(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function on(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=tn(e);if(t){var r=tn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return rn(this,n)}}function sn(e){return function(e){if(Array.isArray(e))return an(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return an(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return an(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function an(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ln(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=String(e);if(0===t)return n;var i=n.match(/(.*?)([0-9]+)(.*)/),r=i?i[1]:"",o=i?i[3]:"",s=i?i[2]:n,a=s.length>=t?s:(sn(Array(t)).map((function(){return"0"})).join("")+s).slice(-1*t);return"".concat(r).concat(a).concat(o)}var cn={daysInHours:!1,zeroPadTime:2};function dn(e,t){var n=e.days,i=e.hours,r=e.minutes,o=e.seconds,s=Object.assign(Object.assign({},cn),t),a=s.daysInHours,l=s.zeroPadTime,c=s.zeroPadDays,d=void 0===c?l:c,u=Math.min(2,l),h=a?ln(i+24*n,l):ln(i,u);return{days:a?"":ln(n,d),hours:h,minutes:ln(r,u),seconds:ln(o,u)}}var un=function(e){en(n,e);var t=on(n);function n(){var e;return Jt(this,n),(e=t.apply(this,arguments)).state={count:e.props.count||3},e.startCountdown=function(){e.interval=window.setInterval((function(){0===e.state.count-1?(e.stopCountdown(),e.props.onComplete&&e.props.onComplete()):e.setState((function(e){return{count:e.count-1}}))}),1e3)},e.stopCountdown=function(){clearInterval(e.interval)},e.addTime=function(t){e.stopCountdown(),e.setState((function(e){return{count:e.count+t}}),e.startCountdown)},e}return $t(n,[{key:"componentDidMount",value:function(){this.startCountdown()}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return this.props.children?(0,d.cloneElement)(this.props.children,{count:this.state.count}):null}}]),n}(d.Component);un.propTypes={count:zt.number,children:zt.element,onComplete:zt.func};var hn=function(e){en(n,e);var t=on(n);function n(e){var i;if(Jt(this,n),(i=t.call(this,e)).mounted=!1,i.initialTimestamp=i.calcOffsetStartTimestamp(),i.offsetStartTimestamp=i.props.autoStart?0:i.initialTimestamp,i.offsetTime=0,i.legacyMode=!1,i.legacyCountdownRef=(0,d.createRef)(),i.tick=function(){var e=i.calcTimeDelta(),t=e.completed&&!i.props.overtime?void 0:i.props.onTick;i.setTimeDeltaState(e,void 0,t)},i.start=function(){if(!i.isStarted()){var e=i.offsetStartTimestamp;i.offsetStartTimestamp=0,i.offsetTime+=e?i.calcOffsetStartTimestamp()-e:0;var t=i.calcTimeDelta();i.setTimeDeltaState(t,"STARTED",i.props.onStart),i.props.controlled||t.completed&&!i.props.overtime||(i.clearTimer(),i.interval=window.setInterval(i.tick,i.props.intervalDelay))}},i.pause=function(){i.isPaused()||(i.clearTimer(),i.offsetStartTimestamp=i.calcOffsetStartTimestamp(),i.setTimeDeltaState(i.state.timeDelta,"PAUSED",i.props.onPause))},i.stop=function(){i.isStopped()||(i.clearTimer(),i.offsetStartTimestamp=i.calcOffsetStartTimestamp(),i.offsetTime=i.offsetStartTimestamp-i.initialTimestamp,i.setTimeDeltaState(i.calcTimeDelta(),"STOPPED",i.props.onStop))},i.isStarted=function(){return i.isStatus("STARTED")},i.isPaused=function(){return i.isStatus("PAUSED")},i.isStopped=function(){return i.isStatus("STOPPED")},i.isCompleted=function(){return i.isStatus("COMPLETED")},e.date){var r=i.calcTimeDelta();i.state={timeDelta:r,status:r.completed?"COMPLETED":"STOPPED"}}else i.legacyMode=!0;return i}return $t(n,[{key:"componentDidMount",value:function(){this.legacyMode||(this.mounted=!0,this.props.onMount&&this.props.onMount(this.calcTimeDelta()),this.props.autoStart&&this.start())}},{key:"componentDidUpdate",value:function(e){this.legacyMode||this.props.date!==e.date&&(this.initialTimestamp=this.calcOffsetStartTimestamp(),this.offsetStartTimestamp=this.initialTimestamp,this.offsetTime=0,this.setTimeDeltaState(this.calcTimeDelta()))}},{key:"componentWillUnmount",value:function(){this.legacyMode||(this.mounted=!1,this.clearTimer())}},{key:"calcTimeDelta",value:function(){var e=this.props,t=e.date,n=e.now,i=e.precision,r=e.controlled,o=e.overtime;return function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.now,r=void 0===i?Date.now:i,o=n.precision,s=void 0===o?0:o,a=n.controlled,l=n.offsetTime,c=void 0===l?0:l,d=n.overtime;t="string"===typeof e?new Date(e).getTime():e instanceof Date?e.getTime():e,a||(t+=c);var u=a?t:t-r(),h=Math.min(20,Math.max(0,s)),p=Math.round(1e3*parseFloat(((d?u:Math.max(0,u))/1e3).toFixed(h))),f=Math.abs(p)/1e3;return{total:p,days:Math.floor(f/86400),hours:Math.floor(f/3600%24),minutes:Math.floor(f/60%60),seconds:Math.floor(f%60),milliseconds:Number((f%1*1e3).toFixed()),completed:p<=0}}(t,{now:n,precision:i,controlled:r,offsetTime:this.offsetTime,overtime:o})}},{key:"calcOffsetStartTimestamp",value:function(){return Date.now()}},{key:"addTime",value:function(e){this.legacyCountdownRef.current.addTime(e)}},{key:"clearTimer",value:function(){window.clearInterval(this.interval)}},{key:"isStatus",value:function(e){return this.state.status===e}},{key:"setTimeDeltaState",value:function(e,t,n){var i=this;if(this.mounted){var r=e.completed&&!this.state.timeDelta.completed,o=e.completed&&"STARTED"===t;r&&!this.props.overtime&&this.clearTimer();return this.setState((function(n){var r=t||n.status;return e.completed&&!i.props.overtime?r="COMPLETED":t||"COMPLETED"!==r||(r="STOPPED"),{timeDelta:e,status:r}}),(function(){n&&n(i.state.timeDelta),i.props.onComplete&&(r||o)&&i.props.onComplete(e,o)}))}}},{key:"getApi",value:function(){return this.api=this.api||{start:this.start,pause:this.pause,stop:this.stop,isStarted:this.isStarted,isPaused:this.isPaused,isStopped:this.isStopped,isCompleted:this.isCompleted}}},{key:"getRenderProps",value:function(){var e=this.props,t=e.daysInHours,n=e.zeroPadTime,i=e.zeroPadDays,r=this.state.timeDelta;return Object.assign(Object.assign({},r),{api:this.getApi(),props:this.props,formatted:dn(r,{daysInHours:t,zeroPadTime:n,zeroPadDays:i})})}},{key:"render",value:function(){if(this.legacyMode){var e=this.props,t=e.count,n=e.children,i=e.onComplete;return(0,d.createElement)(un,{ref:this.legacyCountdownRef,count:t,onComplete:i},n)}var r=this.props,o=r.className,s=r.overtime,a=r.children,l=r.renderer,c=this.getRenderProps();if(l)return l(c);if(a&&this.state.timeDelta.completed&&!s)return(0,d.cloneElement)(a,{countdown:c});var u=c.formatted,h=u.days,p=u.hours,f=u.minutes,A=u.seconds;return(0,d.createElement)("span",{className:o},c.total<0?"-":"",h,h?":":"",p,":",f,":",A)}}]),n}(d.Component);hn.defaultProps=Object.assign(Object.assign({},cn),{controlled:!1,intervalDelay:1e3,precision:0,autoStart:!0}),hn.propTypes={date:(0,zt.oneOfType)([(0,zt.instanceOf)(Date),zt.string,zt.number]),daysInHours:zt.bool,zeroPadTime:zt.number,zeroPadDays:zt.number,controlled:zt.bool,intervalDelay:zt.number,precision:zt.number,autoStart:zt.bool,overtime:zt.bool,className:zt.string,children:zt.element,renderer:zt.func,now:zt.func,onMount:zt.func,onStart:zt.func,onPause:zt.func,onStop:zt.func,onTick:zt.func,onComplete:zt.func};var pn=hn;function fn(e){var t=e.value,n=e.children,r=(0,v.Z)(e,["value","children"]);return(0,i.jsxs)(R.L,(0,g.Z)((0,x.Z)({position:"relative",minWidth:"100px",height:"12.5px",rounded:"md",overflow:"hidden"},r),{children:[(0,i.jsx)(f.xu,{position:"absolute",left:"0",width:"100%",transformOrigin:"left",initial:{transform:"scaleX(0)"},animate:{transform:"scaleX(".concat(t/100,")"),transition:{delay:.5,duration:2}},bgColor:"beets.highlight",as:_e.E.div,height:"full",zIndex:-1}),(0,i.jsx)(f.xu,{zIndex:3,px:"2",children:n})]}))}function An(e){var t=e.isLoading,n=e.openInvestModal,r=e.openWithdrawModal,o=(0,b.c6)().isActive,s=(0,y.Z)(),a=s.relicPositions,l=s.selectedRelic,c=s.maturityThresholds,d=(0,Y.H)(),h=(0,u.Y1)().relicBalanceUSD,p=It(l,c),m=p.progressToNextLevel,x=p.levelUpDate,g=p.isMaxMaturity,v=0===a.length;return(0,i.jsx)(f.xu,{height:"full",width:"full",children:o&&!t&&(0,i.jsx)(f.xu,{position:"relative",height:"full",children:(0,i.jsx)(f.gC,{as:_e.E.div,animate:{opacity:1,transform:"scale(1)",transition:{delay:.1}},initial:{opacity:0,transform:"scale(0.75)"},exit:{opacity:0,transform:"scale(0.75)"},overflow:"hidden",height:"full",position:"relative",children:(0,i.jsxs)(f.Kq,{divider:(0,i.jsx)(f.cX,{}),width:{base:"100%",lg:"60%"},height:"full",rounded:"md",background:"whiteAlpha.200",p:"4",children:[(0,i.jsxs)(f.gC,{spacing:"0",h:"50%",w:"full",alignItems:"flex-start",children:[(0,i.jsxs)(f.xu,{children:[(0,i.jsx)(f.xv,{lineHeight:"1rem",fontWeight:"semibold",fontSize:"md",color:"beets.base.50",children:"Relic liquidity"}),(0,i.jsx)(f.xv,{color:"white",fontSize:"1.75rem",children:(0,H.Rj)(h)})]}),(0,i.jsxs)(f.Ug,{spacing:"1",mb:"0.5",children:[(0,i.jsx)(st.Z,{height:"20px",width:"20px",address:d.fbeets.address}),(0,i.jsx)(f.xv,{fontSize:"1rem",lineHeight:"1rem",children:(0,D.rY)((null===l||void 0===l?void 0:l.amount)||"0")})]})]}),(0,i.jsxs)(f.gC,{spacing:"0",h:"50%",w:"full",pt:{base:"1",lg:void 0},children:[(0,i.jsxs)(f.gC,{spacing:"0",w:"full",alignItems:"flex-start",children:[(0,i.jsx)(f.xv,{lineHeight:"1rem",fontWeight:"semibold",fontSize:"md",color:"beets.base.50",children:"Level up progress"}),(0,i.jsx)(f.gC,{alignItems:"flex-start",w:"full",children:g?(0,i.jsx)(ut.Z,{noImage:!0,label:"You've achieved the max level, nice!",children:(0,i.jsx)(f.xu,{children:(0,i.jsx)(f.Ct,{colorScheme:"green",children:"MAX LEVEL"})})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f.Ug,{spacing:"1",color:"beets.green",children:[(0,i.jsx)(f.xv,{children:"Next level in"}),(0,i.jsx)(pn,{date:x})]}),(0,i.jsx)(fn,{rounded:"5",color:"black",w:"full",value:m})]})})]}),(0,i.jsxs)(f.Ug,{h:"full",w:"full",alignItems:"flex-end",pt:{base:"4",xl:"0"},pb:{base:"6",xl:"0"},children:[(0,i.jsx)(A.zx,{variant:"primary",w:"full",size:"md",rounded:"lg",disabled:v,onClick:n,children:"Deposit"}),(0,i.jsx)(A.zx,{variant:"secondary",w:"full",size:"md",rounded:"lg",disabled:v,onClick:r,zIndex:2,children:"Withdraw"})]})]})]})})})})}var mn={src:"/_next/static/media/1.f20fd63e.png",height:4e3,width:4e3,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAALVBMVEUfHHAVEFEnKoQdF2oiHnUlI3stP5IrMYsbFWQhcJggLEQxRWQnS44eIjQiJ2AeLgkgAAAACXBIWXMAACxKAAAsSgF3enRNAAAAOUlEQVR4nBXISQ7AMAgEwWYZwE7y/+9G3EpFyPscB9T1Hk/wul/tdN2nGiwwcgwLSYpFuudiyGTsByliAQWVuZbAAAAAAElFTkSuQmCC"},xn={src:"/_next/static/media/2.44afcbb7.png",height:4e3,width:4e3,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAP1BMVEUfGm4UDkwkYpgfIkAsL4kXEVUsQ5QhIHQnJ38bFWYjNGoeV4tZWIaam6Y+P1IIBRkqRXtBJisafZUZEl0wOo1xmQv/AAAACXBIWXMAACxKAAAsSgF3enRNAAAAPUlEQVR4nBXGWRKAIAwFwSEkvAQX1Psf1qK/msp0swTSx7BP4OPpbsfOfKeLKL+XqhF1Xl0EgTJ3WiFR7Qc4EgGFAcLqsQAAAABJRU5ErkJggg=="},gn={src:"/_next/static/media/3.2771888a.png",height:4e3,width:4e3,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAQlBMVEUfHGwmJoIrNEYlVpUkIXkrNo0qLYcgHHIcFmcWE1UUDko4OYUsLF8KCyQpQY0hYpQ2P3UNaG4vQ5wfKDoVdYgbToCGtz87AAAACXBIWXMAACxKAAAsSgF3enRNAAAAPUlEQVR4nAXBBwLAIAgAsVNBwN31/682wSXVXRKY6FplG1bv/Gj5sHpyVn0JZ07jIkhjCEG49C4eNMcMbz9EBwHgdVziigAAAABJRU5ErkJggg=="},vn={src:"/_next/static/media/4.8cd782fc.png",height:4e3,width:4e3,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAQlBMVEUeGmsnLj0lKoAdZ48jIXsbF2MmOoUgG3MrMIsWE1UmVpUUDUk6OYAzNGQuOpYPT2YUFCsUFC4cSX8aVYAXVX0wOobKJEdjAAAACXBIWXMAACxKAAAsSgF3enRNAAAAPUlEQVR4nB3Gxw3AMAwAsZOt5pq6/6wBwhdBS9ZeIDTdew0it8juN5Eu4vnQsPMyDhq6Vrx/5iy1MYwIbHw8qwHHVfz9ZgAAAABJRU5ErkJggg=="},bn={src:"/_next/static/media/5.272fab37.png",height:4e3,width:4e3,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAARVBMVEUfGm8vPIgoKYQjYJYrMowgIHYnLz8bGGckH3wWEVUjQYMYVoEUDUkuO5UlVJQLCyUQRGIkJFYTb4kXYIEaPXYpJlMQDDjSKrZKAAAACXBIWXMAACxKAAAsSgF3enRNAAAAPUlEQVR4nAXBhQHAMAzAMKcQKI/+f3US5qnklQAvreVcIU3VuRoUUZXSCfO93Q6BX5+/h7Aq0nswjHo/Nn48ugHzL0CMyQAAAABJRU5ErkJggg=="},wn={src:"/_next/static/media/6.94946940.png",height:4e3,width:4e3,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAQlBMVEUcGGcoKYQZWoElVpUmHn0UD0QeHW4gHnMsMYssQJAbRX8SR2MWEFMXElY2P3ghYpQYU3UWLz0HCBgbT4cad4oaPXYxqcYuAAAACXBIWXMAACxKAAAsSgF3enRNAAAAP0lEQVR4nAXBiQHAIAgAsVNRwF/b7r9qE5BgK4WCirmnpWjw3SxVivk5bpGO3qs0BpKzfI1enjnrHmTiGyv5B0V1Ag6FwHRcAAAAAElFTkSuQmCC"},jn={src:"/_next/static/media/7.a1850152.png",height:4e3,width:4e3,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAQlBMVEUlHnwqK4MWF1YaSoAZWYITD0QpOoYgG3AbGGYrMIwjKTYNEScmWJUpTJIPS2UxO3UWd4gaRHoSPWIjZZgfYJEZPXayus5HAAAACXBIWXMAACxKAAAsSgF3enRNAAAAQElEQVR4nB3GSRLAIAgAwVFBQI2a7f9fTVX61Dgp7pEMI+oxHsOitpZG+dNrCNnpHZ/MgirvRd6yVpGMumw5XT9FjAH00n3qTQAAAABJRU5ErkJggg=="},yn={src:"/_next/static/media/8.4949125e.png",height:4e3,width:4e3,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAWlBMVEUfG28nGX0TVXchY5UmVpYrMo0cW4UbG2gcRH0nJoEXFVMUDEkpNIUjL3QeLGAHCBENESctOZYxOnITcoUSPWIyNjsPSmIvO1UcJEoad4obGlkNbXAWX4AWGVhfcJa7AAAACXBIWXMAACxKAAAsSgF3enRNAAAAQklEQVR4nAXBBQKAMAwEsJu2nRsO//8mCUjEGSsAxJ3FGiC7tB3dMmYvteXk8RBaBe3QWt1B8cI3/RisAyK9l2eKP1m2ArrAlVfcAAAAAElFTkSuQmCC"},Sn={src:"/_next/static/media/9.9ffb732c.png",height:4e3,width:4e3,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAV1BMVEUfH3EoMosUDkkmGXsbGmUXVH4dXYonKoMYGVQWdoozOXEaQHgRQ2IcR4ImWZksQZIrN00tLz8WX4EjZpkmUJIfMV4uN5YeFWlQTUsjZ5gfHioPV2wNbXADtoADAAAACXBIWXMAACxKAAAsSgF3enRNAAAAQklEQVR4nAXBhQHAIBAEsENfcKi3+8/ZBCeRWZUASOO9RmDeNPqxFYjRqzcT8AHPcD7jDc6ySxksUbUEhvVTYvL2B2OlApFHI5nXAAAAAElFTkSuQmCC"},Cn={src:"/_next/static/media/10.7eb21cac.png",height:4e3,width:4e3,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAXVBMVEUVd4glK4AUC0kVXoAbgZggIXQdIGwdGWgXGFYgbJoPV2sYYYMMbG8WVHwoE30uOnEgZJgkNpE/N4pWQTJOS3UaWoobWosYN2AKCiQICBBUVlIWMVBZU1wPcXswNY2YRAqiAAAACXBIWXMAACxKAAAsSgF3enRNAAAAQ0lEQVR4nAXBBwKAIAwEsAMKbRky3f7/nSZgo0RqGJ70PZU8UhvPN1oC+ppzdSCHcF8+ZMSyiWwlQnDUukNg2QGO7Q9lbQKsroEZbgAAAABJRU5ErkJggg=="},Tn={src:"/_next/static/media/11.37b8fc73.png",height:4e3,width:4001,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAASFBMVEUUa4QVYoQVVX0eaJEWGFgOYWwUC0gdXYEfH3IQT2kRmocbdZUXc48bGWcISDEdXIwlK4EGKx0dfp0VPlsLspchW1Ech3orQjxfunEIAAAACnRSTlP+/////v3+/fv+acNuIAAAAAlwSFlzAAAsSgAALEoBd3p0TQAAAD9JREFUeJwFwYcBwCAMwDAngbJ3x/+fVqJN29tmJNZyTqkRtfo9xQKMvPo9wOu7elZPkpBzkIRDRATH1RS0XT9eDwIqOnb8nwAAAABJRU5ErkJggg=="};function In(e){var t=(0,F.Z)({},e),n=(0,y.Z)(),r=n.selectedRelic,o=n.refetchRelicPositions,s=(n.refetchMaturityThresholds,function(){var e=(0,Y.H)(),t=(0,ne.lC)({config:{addressOrName:e.reliquary.address,contractInterface:Rt,functionName:"burn"},transactionType:"BURN"}),n=t.submit,i=(t.submitAsync,(0,v.Z)(t,["submit","submitAsync"]));return(0,x.Z)({burn:function(e){n({args:[parseInt(e,10)],toastText:"Burn relic #".concat(e)})}},i)}()),a=s.burn,l=(0,v.Z)(s,["burn"]),c=(0,kt.pm)().showToast;return(0,d.useEffect)((function(){l.submitError&&c({id:"burn-error",auto:!0,type:kt.pC.Error,content:(0,i.jsx)(f.Ug,{children:(0,i.jsx)(f.xv,{children:l.submitError.message})})})}),[l.submitError]),r?(0,i.jsx)(ce.H,(0,g.Z)((0,x.Z)({inline:!0,submittingText:"Confirm...",pendingText:"Waiting...",onClick:function(){return a(r.relicId)},onConfirmed:function(){o()}},l,t),{children:"Burn"})):null}function En(e){var t=e.relic,n=e.openInvestModal,r=e.openWithdrawModal,o=(0,b.c6)().isActive,s=(0,y.Z)(),a=s.maturityThresholds,l=s.isLoadingRelicPositions,c=s.setSelectedRelicId,u=s.relicPositions,h=It(t,a).canUpgrade,p=(0,d.useState)(!1),m=p[0],x=p[1];(0,d.useEffect)((function(){x(l)}),[l]);var g=0===u.length,v="0.0"===t.amount;return o&&c(t.relicId),(0,i.jsx)(Je.M,{children:(0,i.jsxs)(f.gC,{filter:"auto",blur:g?"10px":"0",as:_e.E.div,animate:{opacity:g?.25:o?1:.35,transform:o?"scale(1)":"scale(0.5)",transition:{type:"spring",mass:.1}},rounded:"lg",spacing:"8",zIndex:o?1:-1,children:[(0,i.jsx)(f.kC,{justifyContent:"center",width:{base:"100%",lg:"50%"},rounded:"lg",children:(0,i.jsxs)(f.Ug,{spacing:"4",width:"full",alignItems:"start",justifyContent:{base:"space-between",xl:void 0},children:[(0,i.jsx)(f.Ct,{rounded:"md",colorScheme:"green",p:"2",children:(0,i.jsx)(f.X6,{textAlign:"center",size:"sm",children:v?"Empty relic - no level":"Level ".concat((null===t||void 0===t?void 0:t.level)+1," - ").concat(["The Initiate","The Neophyte","The Wanderer","The Rebel","The Skeptic","The Apprentice","The Journeyman","The Savant","The Creator","The Scholar","The Awakened"][t.level])})}),(0,i.jsx)(f.Ct,{p:"2",rounded:"md",colorScheme:"purple",children:(0,i.jsxs)(f.X6,{size:"sm",children:["Relic #",null===t||void 0===t?void 0:t.relicId]})})]})}),(0,i.jsxs)(f.kC,{position:"relative",className:o?"":o?"relic-glow":"",as:_e.E.div,children:[h&&o&&!v&&(0,i.jsx)(f.kC,{animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},alignItems:"center",justifyContent:"center",rounded:"lg",width:"full",height:"full",position:"absolute",bg:"blackAlpha.500",as:_e.E.div,zIndex:2,children:(0,i.jsx)(Ut,{})}),o&&v&&(0,i.jsx)(f.kC,{animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},alignItems:"center",justifyContent:"center",rounded:"lg",width:"full",height:"full",position:"absolute",bg:"blackAlpha.500",as:_e.E.div,zIndex:2,children:(0,i.jsxs)(f.Ug,{w:"full",spacing:"2",justifyContent:"center",children:[(0,i.jsx)(A.zx,{variant:"primary",size:"md",rounded:"lg",onClick:n,w:"100px",children:"Deposit"}),(0,i.jsx)(In,{size:"md",rounded:"lg",w:"100px"})]})}),(0,i.jsx)(f.xu,{filter:"auto",blur:o&&h&&!m?"10px":"0px",style:{marginTop:"0 !important"},rounded:"lg",overflow:"hidden",children:(0,i.jsx)(ze(),{style:{cursor:"pointer"},src:function(e){switch(e){case 1:default:return mn;case 2:return xn;case 3:return gn;case 4:return vn;case 5:return bn;case 6:return wn;case 7:return jn;case 8:return yn;case 9:return Sn;case 10:return Cn;case 11:return Tn}}((null===t||void 0===t?void 0:t.level)+1),width:"400px",height:"400px",alt:"reliquary",placeholder:"blur"})})]}),(0,i.jsxs)(f.Kq,{direction:{base:"column",lg:"row"},position:"relative",height:"310px",width:"full",children:[o&&!v&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(An,{openInvestModal:n,openWithdrawModal:r,isLoading:m}),(0,i.jsx)(Nt,{}),(0,i.jsx)(Kt,{})]}),o&&v&&(0,i.jsx)(f.gC,{alignItems:"center",justifyContent:"center",w:"full",children:(0,i.jsx)(f.X6,{children:"No stats available for empty relics"})})]})]})})}var kn=n(7504);function Rn(e){e.showTotal;var t=(0,v.Z)(e,["showTotal"]),n=(0,kn.L)(),r=(n.proportionalPercent,n.selectedWithdrawType,(0,O.yA)()),o=r.getToken,s=(r.priceForAmount,(0,u.Y1)()),a=s.data,l=(s.isLoading,null===a||void 0===a?void 0:a.map((function(e){var t;return(0,g.Z)((0,x.Z)({},e),{symbol:null===(t=o(e.address))||void 0===t?void 0:t.symbol})})));return(0,i.jsx)(f.gC,(0,g.Z)((0,x.Z)({},t),{width:"full",divider:(0,i.jsx)(f.cX,{borderColor:"whiteAlpha.200"}),children:null===l||void 0===l?void 0:l.map((function(e){return(0,i.jsx)(ve.Z,{address:e.address,amount:e.amount},e.address)}))}))}function Un(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.y$,{query:["Withdrawing proportionally","not","price impact"],styles:{fontWeight:"bold",color:"white"},children:"Withdrawing proportionally from this relic ensures you will not be subject to the potential fees caused by price impact."}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)(f.y$,{query:["single asset","not","later"],styles:{fontWeight:"bold",color:"white"},children:"For now withdrawing a single asset is not available. This will be implemented at a later date."}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),"When withdrawing from any relic, your fBEETS are exchanged for the underlying tokens."]})}function Bn(e){var t=e.onShowProportional,n=(e.onShowSingleAsset,(0,u.Y1)()),r=n.relicBalanceUSD,o=n.isLoading,s=(0,y.Z)().selectedRelicId;return(0,i.jsxs)(f.xu,{p:"4",children:[(0,i.jsxs)(f.rj,{mt:"4",mb:"6",gap:"8",templateColumns:{base:"1fr",md:"1fr",lg:"1fr 1fr"},children:[(0,i.jsxs)(f.P4,{children:[(0,i.jsx)(R.L,{p:"2",mb:"6",children:(0,i.jsxs)(f.kC,{children:[(0,i.jsxs)(f.xv,{fontSize:"lg",fontWeight:"semibold",flex:"1",children:["Relic #",s," balance"]}),(0,i.jsx)(ae.Od,{isLoaded:!o,children:(0,i.jsx)(f.xv,{fontSize:"lg",fontWeight:"semibold",children:(0,H.Rj)(r)})})]})}),(0,i.jsxs)(R.L,{p:"2",children:[(0,i.jsx)(f.xv,{fontSize:"lg",fontWeight:"semibold",mb:"4",children:"Tokens breakdown"}),(0,i.jsx)(Rn,{showTotal:!0})]})]}),(0,i.jsx)(f.P4,{children:(0,i.jsx)(R.L,{p:"4",children:(0,i.jsx)(Un,{})})})]}),(0,i.jsx)(A.zx,{variant:"primary",width:"full",isDisabled:r<=0,onClick:t,children:"Withdraw proportionally"})]})}var Zn=n(19943);function Mn(e){var t=e.totalWithdrawValue,n=(0,v.Z)(e,["totalWithdrawValue"]),r=(0,kn.L)(),o=r.selectedWithdrawType,s=r.singleAssetWithdraw,a=(0,O.yA)().formattedPrice;return(0,i.jsx)(R.L,(0,g.Z)((0,x.Z)({},n),{p:"2",children:(0,i.jsx)(f.gC,{width:"full",children:(0,i.jsxs)(f.Ug,{justifyContent:"space-between",width:"full",children:[(0,i.jsx)(f.xu,{flex:"1",children:"Total"}),(0,i.jsxs)(f.xu,{children:["SINGLE_ASSET"===o&&s?a(s):null,"PROPORTIONAL"===o?(0,H.Rj)(t):null]})]})})}))}var Pn=n(90060);function Ln(){var e=(0,Y.H)(),t=(0,a.AI)().poolService,n=(0,Z.l)(kn.N).singleAsset,i=(0,_.useQuery)(["exitGetBptInForSingleAssetWithdraw",n],(0,S.Z)(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&""!==n.amount&&0!==parseFloat(n.amount)){e.next=2;break}return e.abrupt("return",{bptIn:"0",priceImpact:0});case 2:return e.abrupt("return",t.exitGetBptInForSingleAssetWithdraw(n));case 3:case"end":return e.stop()}}),e)}))),{enabled:!!n}),r=i.data,o=Math.abs((null===r||void 0===r?void 0:r.priceImpact)||0),s=o>e.priceImpact.withdraw.high,l=!s&&o>e.priceImpact.withdraw.noticeable,c=Pe()(o>1e-6?o:0).format("0.00%");return(0,g.Z)((0,x.Z)({},i),{hasHighPriceImpact:s,hasMediumPriceImpact:l,formattedPriceImpact:c})}function Dn(e){var t=(0,F.Z)({},e),n=Ln(),r=n.hasHighPriceImpact,o=n.hasMediumPriceImpact,s=n.formattedPriceImpact,a=n.isLoading,l=(0,kn.L)(),c=l.selectedWithdrawType;l.singleAssetWithdraw;return(0,i.jsx)(f.xu,(0,g.Z)((0,x.Z)({},t),{children:(0,i.jsx)(R.L,{p:"2",children:(0,i.jsxs)(f.gC,{width:"full",children:[(0,i.jsxs)(f.Ug,{justifyContent:"space-between",width:"full",style:r?{color:"white",fontWeight:"bold",backgroundColor:"red",borderRadius:"4px",padding:"0px 4px 2px 4px"}:{},children:[(0,i.jsx)(f.xu,{flex:"1",children:(0,i.jsx)(m.R,{label:"Price impact",infoText:"This is the difference between the current market price and the price you will pay due to your withdraw influencing the balance and internal price of tokens within the pool."})}),(0,i.jsx)(f.xu,{children:"PROPORTIONAL"===c?(0,i.jsx)(f.xu,{children:"0.00%"}):a?(0,i.jsx)(ae.Od,{height:"20px",width:"64px",mb:"4px"}):(0,i.jsx)(f.xu,{color:o?"orange":"current",children:s})})]}),(0,i.jsxs)(f.Ug,{justifyContent:"space-between",width:"full",children:[(0,i.jsx)(f.xu,{flex:"1",children:(0,i.jsx)(m.R,{label:"Max slippage",infoText:"The maximum amount of slippage that you're willing to accept for this transaction."})}),(0,i.jsx)(At.m,{})]})]})})}))}function On(e){var t=e.onShowPreview,n=(0,v.Z)(e,["onShowPreview"]),r=(0,kn.L)(),o=r.setProportionalPercent,s=r.proportionalPercent,l=r.setProportionalWithdraw,c=r.setProportionalAmounts,d=(0,O.yA)().priceForAmount;(0,Pn.qR)((function(){l()}));var u=function(){var e=(0,a.AI)(),t=e.poolService,n=e.pool,i=(0,Z.l)(kn.N).proportionalPercent,r=(0,y.Z)().selectedRelic,o=(0,z.i$)((0,z.SW)((null===r||void 0===r?void 0:r.amount)||"").times(i/100)),s=(0,Zn.S)().selectedWithdrawTokenAddresses;return(0,_.useQuery)(["exitGetProportionalWithdrawEstimate",n.id,o,s],(0,S.Z)(T().mark((function e(){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.exitGetProportionalWithdrawEstimate(o,s);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),{})}(),h=u.data,p=(u.isLoading,h||[]),m=(0,M.sum)(p.map(d));return(0,i.jsxs)(f.gC,(0,g.Z)((0,x.Z)({p:"4",spacing:"4"},n),{children:[(0,i.jsxs)(f.xu,{width:"full",children:[(0,i.jsx)(f.xv,{children:"Drag the slider to configure your withdraw amount."}),(0,i.jsxs)(bt.iR,{mt:"12","aria-label":"slider-ex-1",value:s,onChange:o,children:[(0,i.jsx)(bt.Uj,{children:(0,i.jsx)(bt.Ms,{})}),(0,i.jsx)(bt.gs,{boxSize:4}),(0,i.jsxs)(bt.jz,{value:s,textAlign:"center",bg:"beets.base.500",color:"white",mt:"-10",ml:"-30px",w:"12",fontSize:"md",width:"60px",borderRadius:"md",children:[s,"%"]})]})]}),(0,i.jsx)(R.L,{p:"2",width:"full",children:(0,i.jsx)(Rn,{})}),(0,i.jsx)(Mn,{totalWithdrawValue:m,width:"full"}),(0,i.jsx)(Dn,{width:"full"}),(0,i.jsx)(A.zx,{variant:"primary",width:"full",mt:"8",onClick:function(){c(p),t()},children:"Preview"})]}))}function zn(e){var t,n=e.onShowPreview,r=(0,v.Z)(e,["onShowPreview"]),o=(0,a.AI)(),s=o.allTokens,l=o.pool,u=o.requiresBatchRelayerOnExit,h=(0,q.F)().data,m=(0,kn.L)(),b=m.singleAssetWithdraw,w=m.setSingleAssetWithdrawAmount,j=m.setSingleAssetWithdraw,y=function(){var e=(0,a.AI)().poolService,t=(0,Z.l)(kn.N).singleAsset,n=(0,c.Um)().userWalletBptBalance;return(0,_.useQuery)(["exitGetSingleAssetWithdrawForBptIn",n,null===t||void 0===t?void 0:t.address],(0,S.Z)(T().mark((function i(){return T().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(t){i.next=2;break}return i.abrupt("return",{tokenAmount:"0",priceImpact:0});case 2:return i.abrupt("return",e.exitGetSingleAssetWithdrawForBptIn(n,t.address));case 3:case"end":return i.stop()}}),i)}))),{enabled:!!t})}(),C=Ln(),I=C.hasHighPriceImpact,k=C.formattedPriceImpact,R=(0,pe.Z)((0,p.kt)(!1),2),U=R[0],B=R[1].toggle,M=(0,O.yA)().priceForAmount;(0,d.useEffect)((function(){var e,t,n=null===(t=null===(e=l.withdrawConfig.options[0])||void 0===e?void 0:e.tokenOptions[0])||void 0===t?void 0:t.address;!b&&n&&j(n)}),[b]);var P=s.find((function(e){return e.address===(null===b||void 0===b?void 0:b.address)}));if(!b||!P)return null;var L=l.withdrawConfig.options.map((function(e){return e.tokenOptions})).flat(),D=L.find((function(e){return e.address===b.address}))||L[0],z=(null===(t=y.data)||void 0===t?void 0:t.tokenAmount)||"0",V=parseFloat(b.amount)>0&&parseFloat(b.amount)<=parseFloat(z)&&(!I||U)&&(!u||h);return(0,i.jsxs)(f.xu,(0,g.Z)((0,x.Z)({pt:4},r),{children:[(0,i.jsx)(f.xu,{mb:"4",children:(0,i.jsx)(f.xv,{children:"Select your desired asset, then drag the slider or enter an amount to configure your withdraw."})}),(0,i.jsx)(xt._,{tokenOptions:L,selectedTokenOption:D,balance:z,setInputAmount:function(e){return w({address:D.address,amount:e})},value:b.amount,setSelectedTokenOption:j,isWithdraw:!0}),(0,i.jsx)(Mn,{totalWithdrawValue:M(b),mt:"6"}),(0,i.jsx)(Dn,{mt:"6"}),(0,i.jsx)(ft.UO,{in:I,animateOpacity:!0,children:(0,i.jsxs)(E.bZ,{status:"error",borderRadius:"md",mt:"4",children:[(0,i.jsx)(se.XZ,{id:"high-price-impact-acknowledge",isChecked:U,colorScheme:"red",onChange:B,mt:"1",mr:"2"}),(0,i.jsxs)(f.xu,{children:["I confirm that my single asset withdraw will result in a ",k," price impact, subjecting me to fees."]})]})}),(0,i.jsx)(A.zx,{variant:"primary",width:"full",mt:"8",onClick:n,isDisabled:!V,children:"Preview"})]}))}function Vn(e){var t=e.onWithdrawComplete,n=e.onClose,r=(0,a.AI)().pool,o=(0,kn.L)(),s=o.selectedWithdrawType,l=o.singleAssetWithdraw,c=o.proportionalAmounts,u=o.proportionalPercent,h=(0,O.yA)().priceForAmount,p=(0,d.useState)(null),A=p[0],m=p[1],b=(0,y.Z)(),w=b.selectedRelic,j=b.refetchRelicPositions,C=function(e){var t=e.relicId,n=e.bptAmount,i=e.poolTokens,r=e.poolTotalShares,o=(0,ee.q)().userAddress,s=(0,te.k)().slippage;return(0,_.useQuery)(["reliquaryWithdrawAndHarvestContractCallData",o,s,t,n],(0,S.Z)(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$.k.getReliquaryWithdrawAndHarvestContractCallData({userAddress:o||"",relicId:t||0,bptAmount:n,slippage:s,poolTokens:i,poolTotalShares:r}));case 1:case"end":return e.stop()}}),e)}))),{enabled:!!o&&"number"===typeof t&&0!==parseFloat(n)})}({relicId:parseInt((null===w||void 0===w?void 0:w.relicId)||""),bptAmount:(0,z.i$)((0,z.SW)((null===w||void 0===w?void 0:w.amount)||"").times(u/100)),poolTotalShares:r.dynamicData.totalShares,poolTokens:r.tokens}),I=C.data,k=C.isLoading,U=(0,re.C)().data,B=ie("WITHDRAW"),Z=B.reliquaryZap,P=(0,v.Z)(B,["reliquaryZap"]),L=(0,q.F)().data,D="SINGLE_ASSET"===s&&l?[l]:c||[],V=(0,M.sum)(D.map(h));return(0,d.useEffect)((function(){var e=[{id:"exit",tooltipText:"",type:"other",buttonText:"Withdraw"}];U||e.unshift({id:"batch-relayer-reliquary",type:"other",buttonText:"Approve Batch Relayer for all relics",tooltipText:"This relic requires you to approve the batch relayer."}),L||e.unshift({id:"batch-relayer",type:"other",buttonText:"Approve Batch Relayer",tooltipText:"This pool requires you to approve the batch relayer to withdraw."}),m(e)}),[]),(0,i.jsx)(Ae,{children:(0,i.jsxs)(f.gC,{spacing:"4",width:"full",children:[(0,i.jsxs)(f.xu,{px:"4",width:"full",children:[(0,i.jsx)(R.L,{width:"full",mb:"4",children:(0,i.jsx)(f.gC,{width:"full",divider:(0,i.jsx)(f.cX,{borderColor:"whiteAlpha.200"}),mt:"4",p:"2",children:D.map((function(e,t){return(0,i.jsx)(ve.Z,{address:e.address,amount:e.amount},e.address)}))})}),(0,i.jsx)(Mn,{totalWithdrawValue:V,width:"full",mb:"4"}),(0,i.jsxs)(f.gC,{width:"full",spacing:"4",children:[P.error&&(0,i.jsx)(f.xu,{width:"full",children:(0,i.jsxs)(E.bZ,{width:"full",status:"error",children:[(0,i.jsx)(E.zM,{}),(0,J.v)(P.error)]})}),P.isConfirmed&&(0,i.jsx)(f.xu,{width:"full",children:(0,i.jsx)(G.i,{isVisible:P.isConfirmed,children:(0,i.jsxs)(E.bZ,{status:"success",borderRadius:"md",children:[(0,i.jsx)(E.zM,{}),"You've successfully withdrawn ".concat((0,H.Rj)(V)," from the relic.")]})})}),(0,i.jsx)(f.xu,{width:"full",pb:P.isConfirmed||P.isFailed||P.isPending?"0":"4",children:(0,i.jsx)(xe,{isLoading:k,loadingButtonText:"",completeButtonText:"Return to maBEETS",onCompleteButtonClick:n,onSubmit:function(){I&&Z(I)},onConfirmed:function(){var e=(0,S.Z)(T().mark((function e(n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"exit"===n&&(t(),j());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),steps:A||[],queries:[(0,g.Z)((0,x.Z)({},P),{id:"exit"})]})})]})]}),(0,i.jsx)(G.i,{width:"full",isVisible:P.isConfirmed||P.isPending||P.isFailed,children:(0,i.jsx)(K.G,{query:P})})]})})}function Fn(e){var t=e.activatorProps,n=void 0===t?{}:t,r=e.noActivator,o=void 0!==r&&r,s=e.onClose,a=e.isVisible,l=void 0!==a&&a,c=function(){U&&(j("start"),T(null)),v(),s&&s()},u=(0,p.qY)(),h=u.isOpen,m=u.onOpen,v=u.onClose,b=(0,d.useState)("start"),w=b[0],j=b[1],S=(0,d.useState)(null),C=S[0],T=S[1],E=(0,d.useRef)(null),R=(0,d.useState)(!1),U=R[0],B=R[1],Z=(0,kn.L)().clearWithdrawState,M=(0,y.Z)().selectedRelicId;return(0,d.useEffect)((function(){j("start"),Z()}),[M]),(0,d.useEffect)((function(){l?m():c()}),[l]),(0,i.jsxs)(i.Fragment,{children:[!o&&(0,i.jsx)(A.zx,(0,g.Z)((0,x.Z)({onClick:m,variant:"secondary",width:{base:"full",md:"140px"}},n),{children:"Withdraw"})),(0,i.jsxs)(I.u_,{isOpen:h,onClose:c,size:"start"===w?"3xl":"lg",initialFocusRef:E,children:[(0,i.jsx)(I.ZA,{}),(0,i.jsxs)(I.hz,{backgroundColor:"black",children:[(0,i.jsx)(I.ol,{}),"start"!==w?(0,i.jsx)(A.hU,{"aria-label":"back-button",icon:(0,i.jsx)(k.Z,{}),variant:"ghost",p:"0",width:"32px",height:"32px",minWidth:"32px",position:"absolute",top:"8px",left:"12px",onClick:function(){"proportional"===w||"single-asset"===w?j("start"):"preview"===w&&("proportional"===C?j("proportional"):"single-asset"===C&&j("single-asset"))}}):null,(0,i.jsxs)(I.xB,{className:"bg",children:["start"===w?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(f.X6,{size:"md",noOfLines:1,children:"Withdraw from Reliquary"})}):null,"proportional"===w?(0,i.jsx)(f.X6,{size:"md",textAlign:"center",children:"Proportional withdraw"}):null,"single-asset"===w?(0,i.jsx)(f.X6,{size:"md",textAlign:"center",children:"Single asset withdraw"}):null,"preview"===w?(0,i.jsx)(f.X6,{size:"md",textAlign:"center",children:"Withdraw preview"}):null]}),(0,i.jsxs)(I.fe,{className:"bg",p:"0",children:[(0,i.jsx)(G.i,{isVisible:"start"===w,children:(0,i.jsx)(Bn,{onShowProportional:function(){T("proportional"),j("proportional")},onShowSingleAsset:function(){T("single-asset"),j("single-asset")}})}),(0,i.jsx)(G.i,{isVisible:"proportional"===w,children:(0,i.jsx)(On,{onShowPreview:function(){T("proportional"),j("preview")}})}),(0,i.jsx)(G.i,{isVisible:"single-asset"===w,children:(0,i.jsx)(zn,{onShowPreview:function(){T("single-asset"),j("preview")}})}),(0,i.jsx)(G.i,{isVisible:"preview"===w,children:(0,i.jsx)(Vn,{onWithdrawComplete:function(){B(!0)},onClose:c})})]})]})]})]})}function Wn(e){e.loading;var t=(0,v.Z)(e,["loading"]),n=(0,y.Z)(),r=n.relicPositionsForFarmId,o=n.isLoadingRelicPositions,s=(n.selectedRelic,(0,d.useState)(!1)),a=s[0],l=s[1],c=(0,d.useState)(!1),u=c[0],h=c[1],p=(0,d.useState)(!1),A=p[0],m=p[1],S=(0,j.Sx)({base:!0,lg:!1}),C=0===r.length;return(0,d.useEffect)((function(){l(o)}),[o]),(0,i.jsxs)(f.xu,{position:"relative",minH:"300px",children:[C&&!a&&(0,i.jsx)(f.kC,{justifyContent:"center",zIndex:2,width:"full",alignItems:"center",height:"300px",children:(0,i.jsxs)(f.gC,{spacing:"4",alignItems:"center",height:"full",justifyContent:"center",children:[(0,i.jsx)(f.X6,{size:"md",children:"Get started by minting your own relic"}),(0,i.jsx)(f.xu,{children:(0,i.jsx)(yt,{createRelic:!0,activatorProps:{size:"lg",width:"200px",mx:"auto"}})})]})}),(0,i.jsx)(f.xu,(0,g.Z)((0,x.Z)({sx:{".swiper-pagination":{display:"flex",alignItems:"flex-end",justifyContent:"center",bottom:S?350:-5},".swiper":{paddingBottom:"6",overflow:"visible"},".swiper-slide":{transition:"transform 300ms"},".swiper-slide-next":{transform:"scale(1)",opacity:"1",zIndex:-1},".swiper-slide-active":{transform:"scale(1)",opacity:"1",zIndex:1}}},t),{position:"relative",children:(0,i.jsx)(b.tq,{slidesPerView:1,spaceBetween:S?10:-300,centeredSlides:!0,breakpoints:{1024:{slidesPerView:3}},pagination:{clickable:!0},allowTouchMove:S,modules:[w.tl],onClick:function(e){return e.slideTo(e.clickedIndex)},children:r.map((function(e){return(0,i.jsx)(b.o5,{children:(0,i.jsx)(En,{openInvestModal:function(){return h(!0)},openWithdrawModal:function(){return m(!0)},relic:e})},"relic-carousel-".concat(e.relicId))}))})})),(0,i.jsx)(yt,{onClose:function(){return h(!1)},isVisible:u,noActivator:!0}),(0,i.jsx)(Fn,{onClose:function(){return m(!1)},isVisible:A,noActivator:!0})]})}var Hn=n(77245),Xn=n(108),Nn=n(83904);function Qn(){var e,t,n,r=(0,a.AI)().pool,o=(0,Nn.Fg)().colors,s=null===(e=r.staking)||void 0===e||null===(t=e.reliquary)||void 0===t||null===(n=t.levels)||void 0===n?void 0:n.map((function(e){return{level:e.level+1,allocationPoints:e.allocationPoints}})).slice(0,11),l={tooltip:{show:!0,trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}},formatter:function(e){return"Level ".concat(e[0].data[0],": ").concat(Pe()(e[0].data[1]).format("0a"),"x maturity boost")},confine:!0},xAxis:{name:"Level",nameLocation:"middle",nameGap:35,type:"category",splitLine:{show:!1},axisTick:{show:!1,alignWithLabel:!0},interval:1,axisLabel:{color:o.gray[200],margin:16},axisLine:{show:!1}},yAxis:{name:"Maturity boost",nameLocation:"middle",nameRotate:90,type:"value",axisLine:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},axisTick:{show:!1}},grid:{bottom:"5%",right:"1.5%",left:"4.5%",top:"10%",containLabel:!0},series:[{type:"line",smooth:!0,data:null===s||void 0===s?void 0:s.map((function(e){return[e.level,e.allocationPoints]})),areaStyle:{opacity:.2,color:new Hn.graphic.LinearGradient(0,0,0,1,[{offset:0,color:(0,Xn.I)(qt.$.chainId,1)},{offset:.5,color:(0,Xn.I)(qt.$.chainId,1)},{offset:1,color:(0,Xn.I)(qt.$.chainId,0)}])}}]};return(0,i.jsxs)(Mt.Z,{height:"full",px:"4",py:"4",children:[(0,i.jsxs)(f.Ug,{children:[(0,i.jsx)(m.R,{labelProps:{lineHeight:"1rem",fontWeight:"semibold",fontSize:"sm",color:"beets.base.50"},label:"BEETronix",infoText:"This curve shows the maturity boost per level."}),(0,i.jsx)(f.rU,{href:"https://docs.beets.fi/beets/mabeets",target:"_blank",children:(0,i.jsx)(ot.Z,{size:"16"})})]}),(0,i.jsx)(f.xu,{height:"full",children:(0,i.jsx)(Pt.Z,{option:l,style:{height:"100%"}})})]})}var Gn=n(57026);function Yn(){var e,t,n=(0,a.AI)().pool,r=(0,Nn.Fg)().colors,o=(0,Y.H)(),s=(0,d.useMemo)((function(){var e,t,i;return{tooltip:{show:!0,trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}},formatter:function(e){return"Level ".concat(e[0].data[0],": ").concat(Pe()(e[0].data[1]).format("0a")," fBEETS")}},xAxis:{name:"Level",nameLocation:"middle",nameGap:35,type:"category",splitLine:{show:!1},axisTick:{show:!1,alignWithLabel:!0},interval:1,axisLabel:{color:r.gray[200],margin:16},axisLine:{show:!1}},yAxis:{name:"fBEETS",nameLocation:"middle",nameRotate:90,type:"value",axisLine:{show:!1},minorSplitLine:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},axisTick:{show:!1}},grid:{bottom:"5.5%",right:"1.5%",left:"4.5%",top:"10%",containLabel:!0},series:[{data:null===(e=n.staking)||void 0===e||null===(t=e.reliquary)||void 0===t||null===(i=t.levels)||void 0===i?void 0:i.map((function(e){return[e.level+1,e.balance]})),type:"bar",itemStyle:{opacity:1,borderRadius:[5,5,0,0],color:new Hn.graphic.LinearGradient(0,0,0,1,[{offset:0,color:(0,Xn.I)(o.chainId,1)},{offset:.5,color:(0,Xn.I)(o.chainId,.7)},{offset:1,color:(0,Xn.I)(o.chainId,0)}])}}]}}),[JSON.stringify(null===(e=n.staking)||void 0===e||null===(t=e.reliquary)||void 0===t?void 0:t.levels)]);return(0,i.jsx)(Pt.Z,{option:s,style:{height:"100%"}})}function qn(e){var t=e.data,n=(0,Nn.Fg)().colors,r=(0,Y.H)(),o=(0,d.useMemo)((function(){return{tooltip:{show:!0,trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},legend:{show:!1,data:["TVL"],textStyle:{color:n.beets.base[50]},top:"0",right:"2%"},grid:{bottom:"2%",right:"1.5%",left:"1.5%",top:"10%",containLabel:!0},xAxis:{type:"time",minorSplitLine:{show:!1},axisTick:{show:!1},axisLabel:{formatter:function(e,t){return(0,Lt.Z)(new Date(e),"MMM d")},color:n.gray[200],interval:"auto",showMaxLabel:!1,showMinLabel:!1},axisPointer:{type:"line",label:{formatter:function(e){return(0,Lt.Z)(new Date(e.value),"MMM d")}}},axisLine:{show:!1}},yAxis:[{type:"value",axisLine:{show:!1},minorSplitLine:{show:!1},splitLine:{show:!1},axisLabel:{formatter:function(e,t){return t%3===1?"$".concat(Pe()(e).format("0a")):""},color:n.beets.base[100]},axisPointer:{label:{formatter:function(e){return"$".concat(Pe()(e.value).format("0a"))}}}}],series:[{data:t.map((function(e){return[1e3*e.timestamp,e.totalLiquidity]})),name:"TVL",type:"bar",tooltip:{valueFormatter:function(e){return"$".concat(Pe()(e).format("0a"))}},itemStyle:{opacity:1,borderRadius:[5,5,0,0],color:new Hn.graphic.LinearGradient(0,0,0,1,[{offset:0,color:(0,Xn.I)(r.chainId,1)},{offset:.5,color:(0,Xn.I)(r.chainId,.7)},{offset:1,color:(0,Xn.I)(r.chainId,0)}])}}]}}),[JSON.stringify(t)]);return(0,i.jsx)(Pt.Z,{option:o,style:{height:"100%"}})}function Kn(e){var t=e.data,n=(0,Y.H)(),r=(0,Nn.Fg)().colors,o=(0,d.useMemo)((function(){return{tooltip:{trigger:"axis",type:"shadow",backgroundColor:r.beets.base[700],borderColor:"transparent",borderRadius:8,textStyle:{color:"white"},padding:16,axisPointer:{animation:!1,type:"cross",lineStyle:{color:r.beets.base[100],width:2,opacity:1}},formatter:function(e){return"# of relics: ".concat(Pe()(e[0].data[1]).format("0a"))}},xAxis:{show:!0,type:"time",offset:0,minorSplitLine:{show:!1},axisTick:{show:!1},axisLabel:{formatter:function(e,t){return t%2===0?(0,Lt.Z)(new Date(e),"MMM d"):""},color:r.gray[200],showMaxLabel:!1,showMinLabel:!1},axisPointer:{type:"line",label:{formatter:function(e){return(0,Lt.Z)(new Date(e.value),"MMM d")}}},axisLine:{show:!1}},yAxis:{show:!1,scale:!0,splitLine:{show:!1},offset:0},grid:{left:0,right:0,top:"5%",bottom:"7.5%",containLabel:!1},series:[{type:"line",smooth:!0,name:"Relics",showSymbol:!1,data:t.map((function(e){return[1e3*e.timestamp,parseInt(e.relicCount)]})),itemStyle:{color:(0,Xn.J)(n.chainId,1)},areaStyle:{opacity:"10"===n.chainId?.75:.2,color:new Hn.graphic.LinearGradient(0,0,0,1,[{offset:0,color:(0,Xn.I)(n.chainId,1)},{offset:.5,color:(0,Xn.I)(n.chainId,1)},{offset:1,color:(0,Xn.I)(n.chainId,0)}])},axisLine:{show:!1},minorSplitLine:{show:!1},splitLine:{show:!1},tooltip:{valueFormatter:function(e){return(0,H.Rj)(e)}}}]}}),[JSON.stringify(t)]);return(0,i.jsx)(Pt.Z,{option:o,style:{height:"100%"}})}function Jn(){var e,t,n=(0,a.AI)().pool,r=(0,Nn.Fg)().colors,o=(0,Y.H)(),s=(0,d.useMemo)((function(){var e,t,i;return{tooltip:{show:!0,trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}},formatter:function(e){return"Level ".concat(e[0].data[0],": ").concat(Pe()(e[0].data[1]).format("0a")," maBEETS")}},xAxis:{name:"Level",nameLocation:"middle",nameGap:35,type:"category",splitLine:{show:!1},axisTick:{show:!1,alignWithLabel:!0},interval:1,axisLabel:{color:r.gray[200],margin:16},axisLine:{show:!1}},yAxis:{name:"maBEETS",nameLocation:"middle",nameRotate:90,type:"value",axisLine:{show:!1},minorSplitLine:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},axisTick:{show:!1}},grid:{bottom:"5.5%",right:"1.5%",left:"4.5%",top:"10%",containLabel:!0},series:[{data:null===(e=n.staking)||void 0===e||null===(t=e.reliquary)||void 0===t||null===(i=t.levels)||void 0===i?void 0:i.map((function(e){return[e.level+1,parseFloat(e.balance)*e.allocationPoints]})),type:"bar",itemStyle:{opacity:1,borderRadius:[5,5,0,0],color:new Hn.graphic.LinearGradient(0,0,0,1,[{offset:0,color:(0,Xn.I)(o.chainId,1)},{offset:.5,color:(0,Xn.I)(o.chainId,.7)},{offset:1,color:(0,Xn.I)(o.chainId,0)}])}}]}}),[JSON.stringify(null===(e=n.staking)||void 0===e||null===(t=e.reliquary)||void 0===t?void 0:t.levels)]);return(0,i.jsx)(Pt.Z,{option:s,style:{height:"100%"}})}function _n(){var e=(0,d.useState)("FB_LEV"),t=e[0],n=e[1],r=(0,d.useState)("THIRTY_DAYS"),o=r[0],s=r[1],a=(0,Gt.QK)({variables:{id:qt.$.reliquary.fbeets.farmId.toString(),range:o}}).data;return(0,i.jsxs)(Mt.Z,{height:"full",p:"4",children:[(0,i.jsxs)(f.Ug,{spacing:{base:"0",lg:"1"},padding:{base:"0",lg:"2"},pb:"0",justify:{base:"space-between",lg:"flex-start"},children:[(0,i.jsxs)(Gn.Ph,{value:t,onChange:function(e){return n(e.currentTarget.value)},width:{base:"165px",lg:"180px"},variant:"filled",children:[(0,i.jsx)("option",{value:"FB_LEV",children:"fBEETS"}),(0,i.jsx)("option",{value:"MAB_LEV",children:"maBEETS"}),(0,i.jsx)("option",{value:"RELICS",children:"Relics"}),(0,i.jsx)("option",{value:"TVL",children:"TVL"})]}),"FB_LEV"!==t&&"MAB_LEV"!==t&&(0,i.jsxs)(Gn.Ph,{pl:{base:"1",lg:void 0},value:o,onChange:function(e){return s(e.currentTarget.value)},width:{base:"155px",lg:"160px"},variant:"filled",children:[(0,i.jsx)("option",{value:"THIRTY_DAYS",children:"last 30 days"}),(0,i.jsx)("option",{value:"NINETY_DAYS",children:"last 90 days"}),(0,i.jsx)("option",{value:"ONE_HUNDRED_EIGHTY_DAYS",children:"last 180 days"}),(0,i.jsx)("option",{value:"ONE_YEAR",children:"last 365 days"}),(0,i.jsx)("option",{value:"ALL_TIME",children:"All time"})]})]}),(0,i.jsxs)(f.xu,{height:"full",children:["FB_LEV"===t&&(0,i.jsx)(Yn,{}),"MAB_LEV"===t&&(0,i.jsx)(Jn,{}),"TVL"===t&&(0,i.jsx)(qn,{data:(null===a||void 0===a?void 0:a.snapshots)||[]}),"RELICS"===t&&(0,i.jsx)(Kn,{data:(null===a||void 0===a?void 0:a.snapshots)||[]})]})]})}var $n=n(28567);function ei(){var e,t,n,r,o,s=(0,a.AI)().pool,l=(0,O.yA)(),c=l.priceFor,d=l.getToken,u=Yt().data,h=(0,Gt.QK)({variables:{id:qt.$.reliquary.fbeets.farmId.toString(),range:"THIRTY_DAYS"}}).data,p=s.dynamicData,A=86400*parseFloat((null===(e=s.staking)||void 0===e||null===(t=e.reliquary)||void 0===t?void 0:t.beetsPerSecond)||"0"),v=A*c(qt.$.beets.address),b=s.tokens.map((function(e){var t;return(0,g.Z)((0,x.Z)({},e),{symbol:null===(t=d(e.address))||void 0===t?void 0:t.symbol})})),w=null===u||void 0===u?void 0:u.levelBalances.map((function(e){return{level:parseInt(e.level)+1,percentageOfTotal:parseFloat(e.balance)/parseFloat(u.totalBalance)}})),j=Pe()(null===w||void 0===w?void 0:w.reduce((function(e,t){return e+t.level*t.percentageOfTotal}),0)).format("0.00"),y=null===w||void 0===w?void 0:w.reduce((function(e,t){return e.percentageOfTotal>t.percentageOfTotal?e:t})),S=function(e,t){(0,Ce.Z)(1,arguments);var n=t||{},i=n.locale,r=i&&i.options&&i.options.weekStartsOn,o=null==r?0:(0,St.Z)(r),s=null==n.weekStartsOn?o:(0,St.Z)(n.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var a=(0,je.Z)(e),l=a.getDay(),c=(l<s?7:0)+l-s;return a.setDate(a.getDate()-c),a.setHours(0,0,0,0),a}(Date.now()).getTime(),C=null===h||void 0===h?void 0:h.snapshots.filter((function(e){return e.timestamp>=S/1e3})),T=0;C&&(T=parseInt((null===(r=C[C.length-1])||void 0===r?void 0:r.relicCount)||"")-parseInt((null===(o=C[0])||void 0===o?void 0:o.relicCount)||""),Number.isNaN(T)&&(T=0));var I=parseFloat((null===u||void 0===u?void 0:u.totalBalance)||"")/parseFloat(p.totalShares),E=I*parseFloat(p.totalLiquidity),k=E/parseInt((null===u||void 0===u?void 0:u.relicCount)||"");return(0,i.jsx)(Mt.Z,{px:"2",py:"4",h:"full",w:"full",children:(0,i.jsxs)(f.gC,{spacing:"4",width:"full",alignItems:"flex-start",px:"2",children:[(0,i.jsxs)(f.gC,{spacing:"0",alignItems:"flex-start",children:[(0,i.jsx)(f.xv,{lineHeight:"1rem",fontWeight:"semibold",fontSize:"sm",color:"beets.base.50",children:"APR"}),(0,i.jsxs)(f.Ug,{children:[(0,i.jsx)("div",{className:"apr-stripes",children:(0,$n.j)(p.apr.apr)}),(0,i.jsx)(W.Z,{onlySparkles:!0,data:p.apr})]})]}),(0,i.jsx)(f.iz,{}),(0,i.jsxs)(f.gC,{width:"full",spacing:"8",alignItems:"flex-start",children:[(0,i.jsxs)(f.gC,{spacing:"4",alignItems:"flex-start",children:[(0,i.jsxs)(f.gC,{width:"full",alignItems:"flex-start",spacing:"0",children:[(0,i.jsx)(f.xv,{lineHeight:"1rem",fontWeight:"semibold",fontSize:"sm",color:"beets.base.50",children:"TVL"}),(0,i.jsx)(f.xv,{color:"white",fontSize:"1.75rem",children:Pe()(E).format("$0,0.00a")})]}),(0,i.jsx)(f.gC,{width:"full",spacing:"0",alignItems:"flex-start",children:(0,i.jsx)(f.gC,{spacing:"1",alignItems:"flex-start",mb:"2",children:null===b||void 0===b?void 0:b.map((function(e,t){return(0,i.jsxs)(f.Ug,{spacing:"1",mb:"0.5",children:[(0,i.jsx)(st.Z,{h:"20px",w:"20px",address:e.address}),(0,i.jsx)(f.xv,{fontSize:"1rem",lineHeight:"1rem",children:(0,D.rY)(I*parseFloat(e.totalBalance))}),(0,i.jsx)(f.xv,{fontSize:"1rem",lineHeight:"1rem",children:e.symbol})]},t)}))})})]}),(null===(n=s.staking)||void 0===n?void 0:n.reliquary)&&(0,i.jsxs)(f.gC,{spacing:"0",alignItems:"flex-start",children:[(0,i.jsx)(m.R,{labelProps:{lineHeight:"1rem",fontWeight:"semibold",fontSize:"sm",color:"beets.base.50"},label:"Liquidity incentives",infoText:"Liquidity incentives are additional incentives which are available for maBEETS holders. The daily value is an approximation based on current token prices and emissions."}),(0,i.jsxs)(f.xv,{color:"white",fontSize:"1.75rem",children:["~",Pe()(v).format("$0,0.00a"),(0,i.jsx)(f.xv,{as:"span",fontSize:"md",children:"\xa0/ day"})]}),(0,i.jsx)(f.xu,{children:A>0&&(0,i.jsxs)(f.Ug,{spacing:"1",mb:"0.5",children:[(0,i.jsx)(st.Z,{height:"20px",width:"20px",address:qt.$.beets.address}),(0,i.jsxs)(f.xv,{fontSize:"1rem",lineHeight:"1rem",children:[Pe()(A).format("0,0"),"\xa0/ day"]})]})})]}),(0,i.jsxs)(f.gC,{spacing:"0",alignItems:"flex-start",children:[(0,i.jsx)(f.xv,{lineHeight:"1rem",fontWeight:"semibold",fontSize:"sm",color:"beets.base.50",children:"Relic Maturity"}),(0,i.jsxs)(f.xv,{color:"white",fontSize:"1.75rem",children:[j,(0,i.jsx)(f.xv,{as:"span",fontSize:"md",children:"\xa0avg level"})]}),(0,i.jsx)(f.xv,{fontSize:"1rem",lineHeight:"1rem",children:"".concat(Pe()(null===y||void 0===y?void 0:y.percentageOfTotal).format("0%")," of all relics are level ").concat(null===y||void 0===y?void 0:y.level)})]}),(0,i.jsxs)(f.gC,{spacing:"0",alignItems:"flex-start",children:[(0,i.jsx)(m.R,{labelProps:{lineHeight:"1rem",fontWeight:"semibold",fontSize:"sm",color:"beets.base.50"},label:"Total relics",infoText:"The total number of 'active' relics, which have been minted. Burnt relics are not counted."}),(0,i.jsxs)(f.xv,{color:"white",fontSize:"1.75rem",children:[Pe()(null===u||void 0===u?void 0:u.relicCount).format("0,0"),(0,i.jsx)(f.xv,{as:"span",fontSize:"md",children:"\xa0relics"})]}),(0,i.jsx)(f.xv,{fontSize:"1rem",lineHeight:"1rem",children:"Average value per relic is ".concat((0,H.Rj)(k))}),(0,i.jsx)(f.xv,{fontSize:"1rem",lineHeight:"1rem",pt:"2",children:"".concat(T," relics minted this week")})]})]})]})})}function ti(){return(0,i.jsxs)(f.rj,{templateColumns:{base:"1fr",lg:"400px 1fr 1fr"},templateRows:{base:"1fr repeat(2, 400px)",lg:"repeat(2, 400px)"},templateAreas:{base:'"stats"\n                       "details-charts"\n                       "beetronix"\n                       ',lg:'"stats details-charts details-charts"\n                     "stats beetronix beetronix"'},gap:"6",h:"full",w:"full",children:[(0,i.jsx)(f.P4,{area:"stats",w:"full",children:(0,i.jsx)(ei,{})}),(0,i.jsx)(f.P4,{area:"details-charts",w:"full",children:(0,i.jsx)(_n,{})}),(0,i.jsx)(f.P4,{area:"beetronix",w:"full",children:(0,i.jsx)(Qn,{})})]})}var ni=n(49971);function ii(e){return(0,i.jsxs)(f.gC,{as:_e.E.div,initial:{opacity:0},animate:{opacity:1,transition:{delay:1}},exit:{opacity:0},spacing:"4",width:"100%",height:"100%",justifyContent:"center",alignItems:"center",children:[(0,i.jsx)(f.X6,{size:"md",flexGrow:"1",children:"Get started by connecting your wallet"}),(0,i.jsx)(ni.w,{as:_e.E.button,initial:{transform:"scale(0.2)",opacity:0},animate:{transform:"scale(1)",transition:{delay:1.5,type:"spring",mass:.05,stiffness:700},opacity:1},exit:{transform:"scale(0)",opacity:0}})]})}var ri=n(55917),oi=n(31518),si=n(2349);function ai(e){var t=e.isOpen,n=e.onClose,r=(0,d.useState)(-1),o=r[0],s=r[1],a=(0,d.useState)(!1),l=a[0],c=a[1],u=(0,d.useState)(0),h=u[0],p=u[1],A=(0,d.useState)([]),m=A[0],b=A[1],w=(0,d.useRef)(null),j=(0,Y.H)(),C=(0,kt.pm)().removeToast,k=(0,O.yA)(),U=k.getToken,B=k.priceForAmount,Z=U(j.fbeets.address),M=(0,y.Z)(),P=M.legacyFbeetsBalance,L=M.relicPositionsForFarmId,D=M.refetchRelicPositions,z=(M.setSelectedRelicId,M.selectedRelic,(0,q.F)()),V=z.data,F=z.isLoading,W=(0,oi.p)(),H=W.staked,X=W.isLoading,N=W.unstaked,G=W.refetchLegacyFbeetsBalance,K=W.refetchStakedBalance,J=ie("MIGRATE"),ne=J.reliquaryZap,oe=(0,v.Z)(J,["reliquaryZap"]),se=(0,ri.F)({farm:{id:j.fbeets.farmId,type:"FRESH_BEETS"}}),ae=se.withdraw,le=(0,v.Z)(se,["withdraw"]),ce=(0,Q.r)([Z],j.balancer.vault),de=ce.hasApprovalForAmount,ue=ce.isLoading,he=(0,re.C)(),pe=he.data,fe=he.isLoading,Ae=de(j.fbeets.address,N),ge=function(e,t){var n,i=(0,ee.q)().userAddress,r=(0,te.k)().slippage,o=(0,Y.H)(),s=(0,si.l)(i||null,[{symbol:"fBEETS",address:o.fbeets.address,name:"fBEETS",decimals:18}]).data,a=(null===(n=s.find((function(e){return e.address===o.fbeets.address})))||void 0===n?void 0:n.amount)||"0",l=(0,_.useQuery)(["reliquaryFbeetsMigrateContractCallData",i,s,r,e],(0,S.Z)(T().mark((function t(){return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",$.k.getFbeetsMigrateContractCallData({userAddress:i||"",fbeetsAmount:a,slippage:r,relicId:-1!==e?e:void 0}));case 1:case"end":return t.stop()}}),t)}))),{enabled:t&&!!i});return(0,g.Z)((0,x.Z)({},l),{fbeetsBalance:a})}(o,t&&Ae&&!!pe&&!!V),be=ge.data,we=me().currentStep;(0,d.useEffect)((function(){h||p(P)}),[P]),(0,d.useEffect)((function(){t&&C("migrate-fbeets")}),[t]),(0,d.useEffect)((function(){var e=[{id:"reliquary-migrate",type:"other",buttonText:"Migrate",tooltipText:"Migrate your fBEETS to a new or existing relic"}];pe||e.unshift({id:"batch-relayer-reliquary",type:"other",buttonText:"Approve relayer for transacting",tooltipText:"Approve the batch relayer to deposit, withdraw & claim rewards for all relics"}),V||e.unshift({id:"batch-relayer",type:"other",buttonText:"Approve relayer for creating",tooltipText:"Approve the batch relayer to create a new relic"}),!Ae&&Z&&e.unshift({id:"approve-vault",tooltipText:"Approve the vault to spend your fBEETS",type:"tokenApproval",buttonText:"Approve the vault",token:(0,g.Z)((0,x.Z)({},Z||{}),{amount:N})}),parseFloat(H||"0")>0&&e.unshift({id:"unstake",tooltipText:"Unstake your fBEETS from the farm",type:"other",buttonText:"Unstake fBEETS"}),e.length<(null===m||void 0===m?void 0:m.length)||F||fe||ue||X||b(e)}),[V,F,fe,X,ue,Z]);var je=!X&&l;return(0,i.jsx)(f.xu,{width:{base:"full",md:"fit-content"},children:(0,i.jsxs)(I.u_,{isOpen:t,onClose:n,size:"lg",initialFocusRef:w,children:[(0,i.jsx)(I.ZA,{bg:"blackAlpha.900"}),(0,i.jsx)(rt.PJ,{width:"full",children:(0,i.jsxs)(Je.M,{children:[(0,i.jsx)(f.xu,{p:"4",width:"full",children:(0,i.jsxs)(f.gC,{spacing:"4",width:"full",children:[(0,i.jsx)(f.X6,{fontSize:"1.25rem",children:"Migrate to a relic"}),(0,i.jsx)($e,{}),(0,i.jsx)(et,{investTypeText:"Migrate to a relic"}),je&&(0,i.jsxs)(E.bZ,{status:"success",children:[(0,i.jsx)(E.zM,{}),"You've successfully migrated your fBeets to a relic. Click return and check it out."]}),!je&&L.length>0&&"reliquary-migrate"===we&&(0,i.jsx)(f.gC,{width:"full",alignItems:"flex-start",children:(0,i.jsxs)(Gn.Ph,{value:o,onChange:function(e){return s(parseInt(e.currentTarget.value,10))},width:"full",variant:"filled",children:[(0,i.jsx)("option",{value:-1,children:"New relic"}),L.map((function(e){return(0,i.jsxs)("option",{value:e.relicId,children:["Relic ",e.relicId," - Level ",e.level+1]},"migrate-to-".concat(e.relicId))}))]})}),!je&&(0,i.jsx)(R.L,{width:"full",children:(0,i.jsx)(f.gC,{width:"full",divider:(0,i.jsx)(f.cX,{borderColor:"whiteAlpha.200"}),p:"4",children:h>0&&(0,i.jsx)(ve.Z,{address:j.fbeets.address,amount:P.toString()})})}),!je&&-1!==o&&(0,i.jsx)(De,{bptIn:P.toString(),totalInvestValue:B({address:j.fbeets.address,amount:P.toString()}),relicId:o.toString()}),(0,i.jsx)(f.xu,{width:"full",children:(0,i.jsx)(xe,{onCompleteButtonClick:function(){je&&C("migrate-fbeets"),n()},onComplete:function(){c(!0)},loadingButtonText:"",completeButtonText:"Return",onSubmit:function(e){"unstake"===e&&ae({amount:H.toString()}),"reliquary-migrate"===e&&be&&ne(be)},isLoading:!1,steps:m,onConfirmed:function(){D(),G(),K()},queries:[(0,g.Z)((0,x.Z)({},le),{id:"unstake"}),(0,g.Z)((0,x.Z)({},oe),{id:"reliquary-migrate"})],showToS:-1===o})})]})}),(0,i.jsx)(I.ol,{})]})})]})})}var li={lineHeight:"1rem",fontWeight:"semibold",fontSize:"sm",color:"beets.base.50"},ci=[{src:{src:"/_next/static/media/rq-1.5ae28c89.png",height:576,width:576,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAATlBMVEUnJ1UWUm4HhG0oV40gOF4cLVYqLlYfID8pOmwoL18oQnQYZHcQFycnIU8A4JAoVIcSImc2Rm43GDQiKUgddosbM2QVWlAODkkAv3w4JEjJk29OAAAACXBIWXMAAAsSAAALEgHS3X78AAAAPklEQVR4nAXBhwHAIAzAMDND2ND9/6OVQPZeuUGr8VtDQcOczzWUZKy1xiWSeXsvPqG53KcTkBCq94cAxAj8W90CM/Dkj+0AAAAASUVORK5CYII="},alt:"fBEETS",info:"Invest BEETS/wFTM (80/20) into the Fresh BEETS pool to receive fBEETS."},{src:{src:"/_next/static/media/rq-2.3e0637be.png",height:576,width:576,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAQlBMVEUpJ1ghNmxdXoU4ToEoJFEqPW8QEFAeIEQkSHkpMWEICBMTEy8kV4gcI1gNRIJHd6JCWY4LLlULLVRXbpILYacKZajV44ZiAAAACXBIWXMAAAsSAAALEgHS3X78AAAAPklEQVR4nBXFxRHAQAwEsDXbh8H+W81EHwGKaK0DKO/h/+RzOhUshe8jDTY28x6GyhTJLESs91kRUKXzItUPPR0B4IXega0AAAAASUVORK5CYII="},alt:"Reliquary",info:"Deposit fBEETS into Reliquary to unlock your maturity adjusted position."},{src:{src:"/_next/static/media/rq-3.4dcce227.png",height:576,width:576,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAUVBMVEUnJlUcKlERFyolLXEnPXEhSY4fWIYmLmYeHT4fUIEuLVgjSXwXOnAVTGcBl6o+OlwkKYQcGlkbFFIArKgMDAoAAAACNGQXO14qYolBPToYGDOC3aLFAAAACXBIWXMAAAsSAAALEgHS3X78AAAAPklEQVR4nAXBhwGAMAzAMHcm6WbD/48iARKiAMgKNQmIJdVUhZht25uHaC2b+xzFxjHuU1HX+/tcHihzqtcfP/0CIeSHgo4AAAAASUVORK5CYII="},alt:"maBEETS",info:"Receive a transferable and composable Relic that holds your maturity adjusted BEETS (maBEETS) position."}];function di(){var e=(0,ee.q)(),t=e.isConnected,n=e.isConnecting,r=(0,oi.p)().total,o=(0,kt.pm)().showToast,s=(0,a.AI)().pool,l=(0,p.qY)(),c=l.isOpen,u=l.onOpen,h=l.onClose,x=(0,d.useState)(!0),g=x[0],v=x[1],b=(0,y.Z)(),w=b.totalMaBeetsVP,j=b.isLoading;return(0,d.useEffect)((function(){n||v(t)}),[t]),(0,d.useEffect)((function(){r>0&&!c&&o({id:"migrate-fbeets",type:kt.pC.Info,content:(0,i.jsxs)(f.Kq,{direction:["column","row"],spacing:"4",alignItems:"center",justifyContent:{base:"stretch",xl:void 0},children:[(0,i.jsx)(f.xv,{children:"You have a legacy fBEETS balance that can be migrated to maBEETS"}),(0,i.jsx)(A.zx,{variant:"primary",onClick:u,w:{base:"full",xl:"inherit"},children:"Migrate"})]})})}),[r,c]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f.Kq,{direction:"column",width:"full",children:[(0,i.jsxs)(f.Kq,{bg:"blackAlpha.500",px:{base:"0",xl:"8"},pt:{base:"8",xl:"20"},pb:{base:"12",xl:"20"},direction:["column","row"],spacing:"12",width:"full",children:[(0,i.jsxs)(f.gC,{width:"full",alignItems:"flex-start",children:[(0,i.jsx)(f.X6,{color:"white",fontSize:{base:"lg",lg:"2rem"},children:"Maturity adjusted voting power and BEETS rewards."}),(0,i.jsxs)(f.QI,{pl:"5",children:[(0,i.jsx)(f.HC,{children:"Participate in BEETS governance"}),(0,i.jsx)(f.HC,{children:"Unlock maturity adjusted rewards"}),(0,i.jsx)(f.HC,{children:"Access evolving Ludwig fNFTs"})]}),(0,i.jsx)(f.LZ,{}),(0,i.jsxs)(f.Ug,{w:{base:"full",xl:"90%"},children:[(0,i.jsx)(yt,{createRelic:!0,isConnected:g}),(0,i.jsx)(A.zx,{variant:"secondary",w:"full",as:"a",href:"https://docs.beets.fi/beets/mabeets",target:"_blank",children:"Learn more"})]})]}),(0,i.jsx)(f.Kq,{display:{base:"none",md:"flex"},direction:["column","row"],spacing:"8",children:ci.map((function(e,t){return(0,i.jsxs)(f.gC,{spacing:"4",children:[(0,i.jsx)(f.xu,{as:_e.E.div,whileHover:{scale:1.2,transition:{type:"spring",stiffness:400,damping:10}},children:(0,i.jsx)(ze(),{src:e.src,alt:e.alt,placeholder:"blur",style:{borderRadius:"8px"}})}),(0,i.jsx)(m.R,{labelProps:li,label:e.alt,infoText:e.info})]},t)}))})]}),(0,i.jsxs)(f.xu,{width:"full",children:[(0,i.jsxs)(f.gC,{width:"full",py:"4",spacing:"8",children:[!t&&(0,i.jsx)(f.gC,{minH:"200px",justifyContent:"center",alignItems:"center",children:(0,i.jsx)(ii,{})}),t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f.Ug,{spacing:"4",width:"full",position:"relative",children:[(0,i.jsx)(f.X6,{size:"lg",children:"My relics"}),(0,i.jsx)(ut.Z,{noImage:!0,label:"This is your current maBEETS Voting Power. Depending on when you level up or invest/withdraw, it might be different to what is shown on the latest vote on Snapshot.",children:(0,i.jsx)(f.gC,{pt:"1",height:"full",children:(0,i.jsx)(f.xu,{height:"full",children:!j&&(0,i.jsx)(f.Ct,{rounded:"md",colorScheme:"orange",p:"2",children:(0,i.jsxs)(f.X6,{textTransform:"initial",textAlign:"center",size:"sm",children:[Pe()(w).format("0.000a")," maBEETS VP"]})})})})})]}),(0,i.jsx)(f.xu,{width:"full",children:(0,i.jsx)(Wn,{})})]})]}),(0,i.jsxs)(f.gC,{width:"full",py:"4",spacing:"8",mt:{base:"32rem",lg:"16"},children:[(0,i.jsx)(f.gC,{width:"full",alignItems:"flex-start",children:(0,i.jsx)(f.X6,{size:"lg",children:"All relics"})}),(0,i.jsx)(ti,{})]})]})]}),(0,i.jsx)(O.Qy,{children:(0,i.jsx)(a.n2,{pool:s,children:(0,i.jsx)(Ae,{children:(0,i.jsx)(ai,{isOpen:c,onClose:h})})})})]})}var ui=n(92995);var hi=!0,pi=function(e){var t=e.pool,n="Beethoven X | Reliquary",r=[[a.n2,{pool:t}],[c.df,{}],[l.yT,{}],[s.xu,{}],[h.rC,{}],[u.nT,{}]];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o(),{children:[(0,i.jsx)("title",{children:n}),(0,i.jsx)("meta",{name:"title",content:n}),(0,i.jsx)("meta",{property:"og:title",content:n}),(0,i.jsx)("meta",{property:"twitter:title",content:n}),(0,i.jsx)("meta",{name:"description",content:""}),(0,i.jsx)("meta",{property:"og:description",content:""}),(0,i.jsx)("meta",{property:"twitter:description",content:""})]}),t?(0,i.jsx)(ui.Z,{providers:r,children:(0,i.jsx)(di,{})}):(0,i.jsx)(f.gC,{minH:"300px",justifyContent:"center",children:(0,i.jsx)(f.X6,{children:"MaBEETS is not supported on this chain."})})]})}},53399:function(e){e.exports={overlapGrid:"Reliquary_overlapGrid__EU2cK"}},92528:function(e,t,n){"use strict";var i=n(67294),r=n(45697),o=n.n(r);function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s.apply(this,arguments)}function a(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=(0,i.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,o=e.size,l=void 0===o?24:o,c=a(e,["color","size"]);return i.createElement("svg",s({ref:t,xmlns:"http://www.w3.org/2000/svg",width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),i.createElement("polyline",{points:"15 18 9 12 15 6"}))}));l.propTypes={color:o().string,size:o().oneOfType([o().string,o().number])},l.displayName="ChevronLeft",t.Z=l},51351:function(e,t,n){"use strict";function i(e){throw e}n.d(t,{Z:function(){return i}})}},function(e){e.O(0,[5907,1836,1826,7037,4868,8352,7113,8959,740,9774,2888,179],(function(){return t=64657,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=mabeets-dce946ce8ab60e03.js.map