(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7367],{77664:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/compose",function(){return n(55605)}])},26258:function(e,t){"use strict";t.Z={src:"/_next/static/media/invest-masthead-image-OP.677af0f3.png",height:135,width:420,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAAM1BMVEVMaXGNbm07TE4AAAByg4VhjpBcQEAAAAAAAABiWloAAACZWVmib29qnp4sPj87Li6XWFdLzTLmAAAADXRSTlMA/aaZetumZxVOmuN5Y6ndQAAAAAlwSFlzAAALEwAACxMBAJqcGAAAACNJREFUeJxjYGBn5uDgYmdg4OTjZ2Pi4+dkYOFl5GblFeABAAlmAMu1/Ie4AAAAAElFTkSuQmCC"}},27310:function(e,t){"use strict";t.Z={src:"/_next/static/media/invest-masthead-image.548aed95.png",height:136,width:418,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAAKlBMVEUBAAAAAAAAAAAIBAQEBARMaXEFAwMAAAAODw8fHR0CAgJgXV0xNTVDPj4U3HnVAAAAC3RSTlP8vDUeogBbUeTgVhVHtWwAAAAJcEhZcwAAFiUAABYlAUlSJPAAAAAiSURBVHicBcGHDQAwCMCwsEHQ/9+tTaSbeQYKIqDU2569+gT3AHk5T2vsAAAAAElFTkSuQmCC"}},55605:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return Ye},default:function(){return _e}});var i=n(85893),r=n(9008),o=n.n(r),s=n(66652),a=n(25675),l=n.n(a),d=n(27310),c=n(26258),u=n(57438),h=n(37836),p=n(67294),g=n(26042),m=n(69396),f=n(99534),x=n(47741),y=n(48641),b=n(738),j=n(85388),v=n(95421);function w(e){var t=e.onClick,n=e.children,r=(0,f.Z)(e,["onClick","children"]);return(0,i.jsx)(x.zx,(0,m.Z)((0,g.Z)({as:j.E.div,animate:{opacity:1,transition:{delay:.2,type:"spring",stiffness:2e3}},exit:{opacity:0},initial:{opacity:0},_hover:{borderColor:"beets.green"},borderWidth:1,borderColor:"beets.transparent",whiteSpace:"normal",p:"4",width:"350px",height:"250px",onClick:t,textAlign:"center"},r),{children:n}))}function A(e){var t=(0,h.$)(),n=(t.setActiveStep,t.setCreationExperience);return(0,i.jsx)(v.M,{children:(0,i.jsx)(y.Ug,{width:"full",justifyContent:"center",pt:"6",pb:"6",children:(0,i.jsxs)(y.gC,{spacing:"8",width:"full",alignItems:"center",children:[(0,i.jsxs)(y.gC,{spacing:"1",children:[(0,i.jsx)(y.X6,{size:"md",children:"Choose your creation experience"}),(0,i.jsx)(y.xv,{children:"You can choose to create a pool in two different ways. If you change your mind you can always come back and switch flows."})]}),(0,i.jsxs)(y.Ug,{spacing:"4",children:[(0,i.jsx)(w,{onClick:function(){n("simple")},children:(0,i.jsxs)(y.gC,{width:"full",alignItems:"center",justifyContent:"center",children:[(0,i.jsx)(l(),{width:"75px",height:"75px",src:b.Z,alt:"thinking-emoji"}),(0,i.jsx)(y.X6,{size:"sm",children:"Simple"}),(0,i.jsx)(y.xv,{fontSize:"0.95rem",fontWeight:"normal",children:"If it's your first time creating a pool, or if you simply enjoy doing things step by step."})]})}),(0,i.jsx)(w,{onClick:function(){n("advanced")},children:(0,i.jsxs)(y.gC,{width:"full",alignItems:"center",justifyContent:"center",children:[(0,i.jsx)(l(),{width:"75px",height:"75px",src:b.Z,alt:"thinking-emoji"}),(0,i.jsx)(y.X6,{size:"sm",children:"Advanced"}),(0,i.jsx)(y.xv,{fontSize:"0.95rem",fontWeight:"normal",children:"You're a seasoned professional, a one page pool creation experience for advanced users."})]})})]})]})})})}var C=n(29815),k=n(39653),T=n(51469),Z=n(3038),I=n(4365),P=n(97573),S=n(61896),F=n(19589),M=n(54274),z=n(78268),O=n(42179),B=n(3784),E=n(3270),U=n(90313),V=n(56371),W=n(80671),N=n(45720),L=n(45615),R=n(51797),D=n(21166);function X(e){var t=e.isOpen,n=e.onClose,r=e.finalFocusRef,o=e.handleTokenSelected,s=e.title,a=e.onlyWhitelistedTokens,l=void 0===a||a,d=(e.excludeNativeToken,(0,p.useState)("")),c=d[0],u=d[1],h=(0,R.yA)().getTradableToken,f=(0,k.qY)(),x=(0,D.k)(),b=x.loadToken,j=x.clearTokenImport,v=x.tokenToImport,w=x.addressToLoad,A=x.importToken,C=(0,p.useRef)(null);return(0,i.jsxs)(E.u_,{isOpen:t,onClose:n,size:"lg",initialFocusRef:C,finalFocusRef:r,children:[(0,i.jsx)(E.ZA,{bg:"blackAlpha.800"}),(0,i.jsx)(E.hz,{borderWidth:1,borderColor:"beets.base.600",children:(0,i.jsx)(y.xu,{bg:"blackAlpha.400",children:(0,i.jsxs)(y.xu,{className:"bg",children:[(0,i.jsx)(E.ol,{}),s&&(0,i.jsx)(E.xB,{children:s}),(0,i.jsxs)(E.fe,{p:"0",position:"relative",children:[(0,i.jsx)(y.xu,{px:"6",pb:"6",boxShadow:"2xl",borderBottomWidth:1,borderBottomColor:"beets.base.500",children:(0,i.jsx)(U.v,{ref:C,placeholder:"Search by symbol or address...",value:c,setValue:function(e){u(e),(0,V.isAddress)(e)&&!h(e)?b(e):(w||v)&&j()}})}),!l&&v?(0,i.jsx)(y.xu,{height:"".concat(500,"px"),children:(0,i.jsx)(W.s,(0,m.Z)((0,g.Z)({},v),{index:0,action:"import",onClick:f.onOpen}))}):(0,i.jsx)(N.V,{listHeight:500,searchTerm:c,onTokenRowClick:function(e){return function(e){n(),setTimeout((function(){o(e),u("")}))}(e)},excludeNativeToken:!0}),!l&&(0,i.jsx)(L.M,{isOpen:f.isOpen,onClose:f.onClose,onImport:function(){A(),f.onClose()}}),(0,i.jsx)(y.xu,{height:"20px",boxShadow:"dark-lg",borderTopWidth:1,borderTopColor:"beets.base.600"})]})]})})})]})}var Y=n(94046),_=n(16521),$=n(24697),H=n(96486),q=n(28626);function G(e){var t=(0,h.$)().addBlankToken;return(0,i.jsx)(x.zx,{onClick:t,width:"full",children:(0,i.jsx)(S.Z,{})})}function J(e){var t,n=function(e){return null===e?function(e){}:function(t){var n=parseInt(t.currentTarget.value,10);(0,H.isNaN)(n)&&(n=0);var i=(0,C.Z)(o);i[e]=(0,m.Z)((0,g.Z)({},i[e]),{weight:n,isLocked:!0}),u(i),re(i)}},r=((0,q.s5)().isLoading,(0,h.$)()),o=(r.poolTypes,r.tokens),s=r.MAX_TOKENS,a=r.removeTokenByAddress,l=r.removeTokenByIndex,d=r.toggleLockTokenByAddress,c=r.toggleLockTokenByIndex,u=r.setTokens,f=r.distributeTokenWeights,b=r.getTokenAndWeightValidations,j=r.getOptimizedLiquidity,v=(0,p.useState)(null),w=v[0],A=v[1],S=(0,p.useState)(!1),E=S[0],U=S[1],V=(0,k.qY)(),W=(0,Y.pm)().showToast,N=o.length===s,L=(0,p.useRef)(null),R=(0,T.Sx)({base:!0,md:!1}),D=b(),J=D.hasInvalidTokenWeights,Q=D.areTokenSelectionsValid,K=D.invalidTotalWeight,ee=D.hasMoreThanMaxTotalLiquidity,te=D.areTokenAmountsValid,ne=D.hasInsufficientBalances,ie=j(),re=(0,$.y1)((function(e){f(e)}),100);return(0,i.jsxs)(P.Z,{py:"3",px:"3",width:"100%",children:[(0,i.jsxs)(y.gC,{spacing:"2",width:"full",alignItems:"flex-start",children:[(0,i.jsxs)(y.gC,{width:"full",spacing:"3",children:[(0,i.jsxs)(y.gC,{spacing:"1",width:"full",alignItems:"flex-start",children:[(0,i.jsx)(y.X6,{size:"sm",children:"1. Choose tokens"}),(0,i.jsxs)(y.xv,{lineHeight:"1.25rem",fontSize:"0.95rem",children:["Customize the weight of each pool token and the amount of liquidity you want to seed for each. You can add up to 8 tokens.",(0,i.jsx)("br",{}),"Optimized token amounts are provided as a placeholder, which will get you the least slippage whilst creating the pool."]})]}),(0,i.jsx)(y.rj,{width:"full",templateColumns:{base:"1fr",md:"1fr 1fr"},columnGap:"0.5rem",rowGap:"0.5rem",children:o.map((function(e,t){var r,s;return(0,i.jsx)(y.Ug,{children:(0,i.jsx)(O.L,{width:"full",pl:"2",pr:"3",py:"2",children:(0,i.jsxs)(y.Ug,{width:"full",spacing:"4",children:[(0,i.jsxs)(y.Kq,{spacing:"2",width:"full",direction:{base:"column-reverse",md:"row"},alignItems:"center",children:[(0,i.jsx)(I.r,{toggleTokenSelect:function(){return A(t),void V.onOpen()},address:e.address,value:e.amount,onChange:(s=t,null===s?function(e){}:function(e){var t=(0,C.Z)(o);t[s]=(0,m.Z)((0,g.Z)({},t[s]),{amount:e.currentTarget.value}),u(t),U(!0)}),placeholder:parseFloat((null===(r=ie[e.address])||void 0===r?void 0:r.balanceRequired)||"0").toFixed(4)||void 0}),(0,i.jsx)(y.gC,{children:(0,i.jsx)(B.Z,{noImage:!0,label:"Adjust this token's pool weight",children:(0,i.jsx)(_.s,{wrapperProps:{height:"40px",padding:"none",width:R?"100%":"85px"},height:"100%",width:{base:"100%",md:"85px"},py:"0",minHeight:"none",fontWeight:"medium",fontSize:"1rem",textAlign:{base:"center",md:"left"},px:"2",placeholder:"50",value:e.weight,onChange:n(t),children:(0,i.jsx)(y.xu,{top:"0",bottom:"0",transform:"translateY(20%)",right:"12px",position:"absolute",children:(0,i.jsx)(y.xv,{color:"whiteAlpha.600",children:"%"})})})})})]}),(0,i.jsxs)(y.gC,{children:[(0,i.jsx)(B.Z,{noImage:!0,label:"Lock this token's weight",children:(0,i.jsxs)(x.zx,{onClick:function(){return n=e.address,i=t,void(n?d(n):c(i));var n,i},bg:e.isLocked?"beets.highlight":"whiteAlpha.400",color:e.isLocked?"beets.base.700":"inherit",_hover:{bg:"beets.highlight",color:"beets.base.700"},rounded:"full",p:"0",children:[e.isLocked&&(0,i.jsx)(F.Z,{width:"12px"}),!e.isLocked&&(0,i.jsx)(M.Z,{width:"12px"})]})}),(0,i.jsx)(B.Z,{noImage:!0,label:"Remove this token",children:(0,i.jsx)(x.zx,{onClick:function(){return n=e.address,i=t,void(n?a(n):l(i));var n,i},bg:"red.500",_hover:{bg:"red.600"},rounded:"full",p:"0",children:(0,i.jsx)(z.Z,{width:"12px"})})})]})]})},"".concat(e.address,"-").concat(t))},"compose-token-select-".concat(e,"-").concat(t))}))})]}),!N&&(0,i.jsx)(B.Z,{noImage:!0,label:"Add a token",children:(0,i.jsx)(y.Ug,{width:"full",children:(0,i.jsx)(G,{})})}),o.length>0&&J&&(0,i.jsx)(Z.bZ,{status:"error",children:"One or more of your token selections has an invalid weight. Tokens weights must be filled in and greater than 1% for any one token."}),o.length>0&&!Q&&(0,i.jsx)(Z.bZ,{status:"error",children:"Please make sure all your pool tokens have a valid token selected. The minimum number of tokens is 2. You can always remove a token you do not want by clicking the red cross."}),o.length>0&&K&&(0,i.jsx)(Z.bZ,{status:"error",children:"The sum of weights for all your token selections must equal exactly 100%."}),o.length>0&&ee&&(0,i.jsx)(Z.bZ,{status:"error",children:"We enforce a max seed liquidity of $100 to protect you against significant slippage. After the pool is created you can invest with as much liquidity as you wish."}),o.length>0&&ne&&(0,i.jsx)(Z.bZ,{status:"error",children:"You do not have sufficient balance(s) for one or more tokens you have chosen."}),E&&o.length>0&&!te&&(0,i.jsx)(Z.bZ,{status:"error",children:"All token selections must have a seed amount greater than 0."})]}),(0,i.jsx)(X,{finalFocusRef:L,isOpen:V.isOpen,onOpen:V.onOpen,onClose:V.onClose,handleTokenSelected:(t=w,null===t?function(e){}:function(e){if(o.find((function(t){return t.address===e})))W({id:"compose-existing-token",content:"You already have this token added",auto:!0,type:Y.pC.Error});else{var n=(0,C.Z)(o);n[t]=(0,m.Z)((0,g.Z)({},n[t]),{address:e}),u(n)}}),excludeNativeToken:!0,title:"Choose a token"})]})}function Q(e){var t=function(e){return!c&&l===e},n=function(e){d(!1),function(e){a(e)}(e)},r=(0,T.Sx)({base:!0,md:!1}),o=(0,h.$)(),s=o.FEE_PRESETS,a=o.setCurrentFee,l=o.currentFee,d=o.setIsUsingCustomFee,c=o.isUsingCustomFee,u=(0,o.getPoolFeeValidations)(),p=u.isValid,g=u.isFeeEmpty,m=u.isFeeZero,f=u.isFeeValid;return(0,i.jsx)(P.Z,{py:"3",px:"3",width:"full",height:"full",children:(0,i.jsxs)(y.gC,{alignItems:"flex-start",spacing:"3",children:[(0,i.jsxs)(y.gC,{alignItems:"flex-start",spacing:"1",children:[(0,i.jsx)(y.X6,{size:"sm",children:"2. Pool Fees"}),(0,i.jsx)(y.xv,{lineHeight:"1rem",fontSize:"0.95rem",children:"0.30% is best for most weighted pools with established tokens. Go higher for more exotic tokens. You can also specify your own custom fee."})]}),(0,i.jsxs)(y.Kq,{width:"full",height:{base:"fit-content",md:"40px"},direction:{base:"column",md:"row"},children:[s.map((function(e){return(0,i.jsxs)(x.zx,{onClick:function(){return n(e)},borderColor:t(e)?"beets.green":"transparent",borderWidth:2,fontWeight:"medium",width:{base:"100%",md:"75px"},children:[e,"%"]},"pool-fee-preset-".concat(e))})),(0,i.jsx)(_.s,{wrapperProps:{height:"100%",padding:"none",width:r?"100%":"100px",minHeight:"40px"},height:"100%",width:{base:"100%",md:"100px"},py:"0",minHeight:"40px",fontWeight:"medium",fontSize:"1rem",px:"2",placeholder:"0.1",textAlign:{base:"center",md:"left"},onChange:function(e){var t=e.currentTarget.value.match(/^(\d*\.{0,1}\d{0,2}$)/);d(!0),t&&a(e.currentTarget.value)},borderColor:p?c?"beets.green":"transparent":"red.400",borderWidth:2,value:c?l:void 0,children:(0,i.jsx)(y.xu,{top:"0",bottom:"0",transform:"translateY(20%)",right:"12px",position:"absolute",children:(0,i.jsx)(y.xv,{children:"%"})})})]}),g&&(0,i.jsx)(Z.bZ,{status:"error",children:"Please ensure that you have selected or filled in a pool fee."}),m&&(0,i.jsx)(Z.bZ,{status:"error",children:"The pool fee cannot be zero."}),!f&&(0,i.jsx)(Z.bZ,{status:"error",children:"The pool fee must be less than 10%."})]})})}var K=n(42588),ee=n(13510),te=n(29907);function ne(e){var t=(0,ee.q)().userAddress,n=(0,h.$)(),r=n.setFeeManager,o=n.feeManager,s=n.managerOption,a=n.setManagerOption,l=n.otherManagerOption,d=n.setOtherManagerOption,c=n.isFeeManagerValid,u=(0,Y.pm)().showToast,p=(0,$.y1)((function(){o&&"custom-eoa"===l&&((0,V.isAddress)(o)||u({id:"pool-invalid-custom-fee-manager",type:Y.pC.Error,content:"Please enter a valid EOA for your custom fee manager",auto:!0}))}),300),g="dao-managed"!==s,m="custom-eoa"===l;return(0,i.jsx)(P.Z,{py:"3",px:"3",width:"full",height:"full",children:(0,i.jsxs)(y.gC,{alignItems:"flex-start",spacing:"3",children:[(0,i.jsxs)(y.gC,{alignItems:"flex-start",spacing:"1",children:[(0,i.jsx)(y.X6,{size:"sm",children:"3. Fee Manager"}),(0,i.jsx)(y.xv,{lineHeight:"1.25rem",fontSize:"0.95rem",children:"You can choose to elect a fee manager for your pool. The fee manager can be yourself, an address of your choosing or the BeethovenX DAO. By default, the BeethovenX DAO is the fee manager."})]}),(0,i.jsxs)(y.gC,{width:"full",alignItems:"flex-start",spacing:"4",children:[(0,i.jsx)(Z.bZ,{status:"warning",color:"yellow.100",children:"To be eligible for gauge rewards, the pool must be managed by the BeethovenX DAO"}),(0,i.jsx)(y.gC,{width:"full",alignItems:"flex-start",children:(0,i.jsx)(K.Ee,{value:s,onChange:function(e){"dao-managed"===e?(r(te.$.beetsPoolOwnerAddress),d(void 0)):(r(t||""),d("self-managed")),a(e)},children:(0,i.jsxs)(y.gC,{width:"full",alignItems:"flex-start",spacing:"1",children:[(0,i.jsx)(K.Y8,{value:"dao-managed",children:"I would like the DAO to be the fee manager"}),(0,i.jsx)(K.Y8,{value:"other-manager",children:"I want to choose the fee manager"})]})})}),g&&(0,i.jsxs)(y.gC,{width:"full",alignItems:"flex-start",children:[(0,i.jsx)(y.X6,{size:"xs",children:"Other fee manager"}),(0,i.jsx)(K.Ee,{value:l,onChange:function(e){"custom-eoa"===e?r(null):t&&r(t),d(e)},children:(0,i.jsxs)(y.gC,{width:"full",alignItems:"flex-start",spacing:"1",children:[(0,i.jsx)(K.Y8,{value:"self-managed",children:"I would like to be the fee manager"}),(0,i.jsx)(K.Y8,{value:"custom-eoa",children:"I want to choose another address to be the fee manager"})]})})]}),m&&(0,i.jsxs)(y.gC,{width:"full",alignItems:"flex-start",children:[(0,i.jsx)(y.X6,{size:"xs",children:"Custom address"}),(0,i.jsx)(_.s,{wrapperProps:{height:"100%",padding:"none",width:"100%"},height:"100%",width:"100%",py:"0",minHeight:"40px",fontWeight:"medium",fontSize:"1rem",px:"2",placeholder:"0x48daF...",onChange:function(e){p(),r(e.currentTarget.value)},value:o||"",borderColor:c()?m?"beets.green":"transparent":"red.400",borderWidth:2})]})]}),!c()&&(0,i.jsx)(Z.bZ,{status:"error",children:"Please make sure the you have filled in the custom fee manager with a correct ethereum address."})]})})}function ie(e){var t=(0,h.$)(),n=t.setActiveStep,r=t.tokens,o=t.feeManager,s=t.isPoolNameValid,a=t.getPoolFeeValidations,l=t.getTokenAndWeightValidations,d=(0,H.sumBy)(r,(function(e){return e.weight}))<100,c=null===o||""===o||!(0,V.isAddress)(o),u=d||c||!l().isValid||!a().isValid||!s();return(0,i.jsx)(y.gC,{width:"full",children:(0,i.jsx)(x.zx,{isDisabled:u,onClick:function(){n("preview")},width:"full",variant:"primary",children:"Preview"})})}function re(e){var t=(0,h.$)(),n=t.getPoolSymbol,r=t.setPoolName,o=t.poolName,s=t.isPoolNameValid,a=n();return(0,i.jsx)(P.Z,{py:"3",px:"3",width:"full",height:"full",children:(0,i.jsxs)(y.gC,{alignItems:"flex-start",spacing:"3",children:[(0,i.jsxs)(y.gC,{alignItems:"flex-start",spacing:"1",children:[(0,i.jsx)(y.X6,{size:"sm",children:"4. Pool Name"}),(0,i.jsx)(y.xv,{lineHeight:"1.25rem",fontSize:"0.95rem",children:"Finally, choose a name for you pool. You can leave it as the auto-generated pool name based on the tokens and their weights, or pick one yourself. The pool symbol is determined by your token selections and their weights."})]}),(0,i.jsx)(y.gC,{width:"full",height:"40px",children:(0,i.jsx)(_.s,{wrapperProps:{height:"100%",padding:"none",width:"100%"},height:"100%",width:"100%",value:o,py:"0",minHeight:"none",fontWeight:"medium",fontSize:"1rem",px:"2",placeholder:"My very cool pool name",onChange:function(e){r(e.currentTarget.value)},borderWidth:2,borderColor:s()?"transparent":"red.400"})}),a&&(0,i.jsxs)(y.gC,{alignItems:"flex-start",spacing:"1",children:[(0,i.jsx)(y.X6,{size:"sm",children:"Symbol"}),(0,i.jsx)(y.xv,{lineHeight:"1rem",fontSize:"0.95rem",children:n()})]}),!s()&&(0,i.jsx)(Z.bZ,{status:"error",children:"Please ensure the pool name is filled in."})]})})}var oe=n(27434);function se(e){var t=e.step,n=(0,h.$)().progressValidatedTo>t?"green.500":"red.500";return(0,i.jsx)(y.xu,{py:"2",color:n,children:(0,i.jsx)(oe.Z,{})})}function ae(e){return(0,i.jsx)(y.gC,{spacing:"4",width:"full",mb:"10",children:(0,i.jsxs)(y.gC,{width:{base:"100%",md:"75%"},alignItems:"center",children:[(0,i.jsx)(J,{}),(0,i.jsx)(se,{step:0}),(0,i.jsx)(Q,{}),(0,i.jsx)(se,{step:1}),(0,i.jsx)(ne,{}),(0,i.jsx)(se,{step:2}),(0,i.jsx)(re,{}),(0,i.jsx)(se,{step:3}),(0,i.jsx)(ie,{})]})})}function le(e){return(0,i.jsx)(y.gC,{width:"full",children:(0,i.jsx)(P.Z,{width:"50%",children:(0,i.jsx)(y.X6,{children:"fds "})})})}var de=n(70570);function ce(e){var t=(0,h.$)().tokens;return(0,i.jsx)(P.Z,{py:"3",px:"3",width:"100%",children:(0,i.jsx)(y.gC,{spacing:"2",width:"full",alignItems:"flex-start",children:(0,i.jsxs)(y.gC,{width:"full",spacing:"3",children:[(0,i.jsx)(y.gC,{spacing:"1",width:"full",alignItems:"flex-start",children:(0,i.jsx)(y.X6,{size:"sm",children:"Pool Tokens"})}),(0,i.jsx)(y.rj,{width:"full",templateColumns:{base:"1fr",md:"1fr 1fr"},columnGap:"0.5rem",rowGap:"0.5rem",children:t.map((function(e,t){return(0,i.jsx)(y.Ug,{children:(0,i.jsx)(O.L,{width:"full",pl:"2",pr:"3",py:"2",children:(0,i.jsx)(y.Ug,{width:"full",spacing:"4",children:(0,i.jsxs)(y.Ug,{spacing:"2",width:"full",children:[(0,i.jsx)(O.L,{borderWidth:2,borderColor:"beets.green",bg:"beets.greenAlpha.50",py:"2",px:"4",minWidth:"92px",display:"flex",justifyContent:"center",children:(0,i.jsxs)(y.xv,{color:"beets.green",children:[e.weight,"%"]})}),(0,i.jsx)(de.Z,{address:e.address,amount:e.amount||"0"})]})})},"".concat(e.address,"-").concat(t))},"compose-token-select-".concat(e,"-").concat(t))}))})]})})})}function ue(){var e=(0,ee.q)().userAddress,t=(0,h.$)(),n=t.feeManager,r=t.currentFee,o=(0,u.H)().beetsPoolOwnerAddress===n?"BeethovenX DAO":e===n?"Your current address":n;return(0,i.jsx)(y.Ug,{spacing:"4",width:"full",justifyContent:"flex-start",children:(0,i.jsx)(O.L,{py:"3",pl:"4",pr:"6",display:"flex",justifyContent:"flex-start",width:{base:"100%",md:"fit-content"},children:(0,i.jsx)(y.gC,{width:"full",alignItems:"flex-start",children:(0,i.jsxs)(y.Ug,{children:[(0,i.jsx)(O.L,{rounded:"full",px:"2",pt:"2",pb:"0",children:(0,i.jsx)(l(),{src:b.Z,width:"24",height:"24",alt:"your-profile"})}),(0,i.jsxs)(y.gC,{alignItems:"flex-start",spacing:"0.5",children:[(0,i.jsx)(y.X6,{size:"sm",children:(0,i.jsxs)(y.Ug,{spacing:"0",children:[(0,i.jsxs)(y.xv,{color:"beets.highlight",children:[r,"%\xa0"]}),(0,i.jsx)(y.xv,{children:"swap fee managed by"})]})}),(0,i.jsx)(y.xv,{fontSize:"0.95rem",children:o})]})]})})})})}var he=n(22312),pe=n(50934),ge=n(27605),me=JSON.parse('[{"inputs":[{"internalType":"contract IVault","name":"vault","type":"address"},{"internalType":"contract IProtocolFeePercentagesProvider","name":"protocolFeeProvider","type":"address"},{"internalType":"string","name":"factoryVersion","type":"string"},{"internalType":"string","name":"poolVersion","type":"string"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[],"name":"FactoryDisabled","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"pool","type":"address"}],"name":"PoolCreated","type":"event"},{"inputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"symbol","type":"string"},{"internalType":"contract IERC20[]","name":"tokens","type":"address[]"},{"internalType":"uint256[]","name":"normalizedWeights","type":"uint256[]"},{"internalType":"contract IRateProvider[]","name":"rateProviders","type":"address[]"},{"internalType":"uint256","name":"swapFeePercentage","type":"uint256"},{"internalType":"address","name":"owner","type":"address"},{"internalType":"bytes32","name":"salt","type":"bytes32"}],"name":"create","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"disable","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"selector","type":"bytes4"}],"name":"getActionId","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getAuthorizer","outputs":[{"internalType":"contract IAuthorizer","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getCreationCode","outputs":[{"internalType":"bytes","name":"","type":"bytes"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getCreationCodeContracts","outputs":[{"internalType":"address","name":"contractA","type":"address"},{"internalType":"address","name":"contractB","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getPauseConfiguration","outputs":[{"internalType":"uint256","name":"pauseWindowDuration","type":"uint256"},{"internalType":"uint256","name":"bufferPeriodDuration","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getPoolVersion","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getProtocolFeePercentagesProvider","outputs":[{"internalType":"contract IProtocolFeePercentagesProvider","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getVault","outputs":[{"internalType":"contract IVault","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isDisabled","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"pool","type":"address"}],"name":"isPoolFromFactory","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"version","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"}]'),fe=n(91747),xe=n(44431),ye=n.n(xe),be=n(84868),je=n(82670);function ve(e,t,n){if((0,je.Z)(e,Uint8Array))return n?new Uint8Array(e):e;if("string"===typeof e&&e.match(/^0x([0-9a-f][0-9a-f])*$/i)){for(var i=new Uint8Array((e.length-2)/2),r=2,o=0;o<i.length;o++)i[o]=parseInt(e.substring(r,r+2),16),r+=2;return i}throw new Error("invalid BytesLike value")}function we(e,t){return ve(e,0,!1)}var Ae="0123456789abcdef";function Ce(e){for(var t=we(e),n="0x",i=0;i<t.length;i++){var r=t[i];n+=Ae[(240&r)>>4]+Ae[15&r]}return n}function ke(e,t,n){var i=we(e),r=new Uint8Array(t);return r.fill(0),n?r.set(i,t-i.length):r.set(i,0),Ce(r)}function Te(e){var t=(0,V.toUtf8Bytes)(e);if(t.length>31)throw new Error("bytes32 string must be less than 32 bytes");return ke(t,32,!1)}function Ze(){return Te(function(e){for(var t,n,i=Array.from("!\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"),r=i.length,o=Math.floor(65536/r)*r-1,s=2*Math.ceil(1.1*e),a="",l=0;l<e;)for(var d=(0,V.randomBytes)(s),c=0;c<s&&l<e;){var u=(t=d)[n=c]+(t[n+1]<<8);c+=2,u>o||(a+=i[u%r],l++)}return a}(31))}var Ie=n(48708),Pe=n(9279);function Se(){var e=(0,u.H)(),t=(0,ge.lC)({config:{addressOrName:e.balancer.weightedPoolFactory,contractInterface:me,functionName:"create"},transactionType:"CREATE_POOL"}),n=t.submit,i=(t.submitAsync,(0,f.Z)(t,["submit","submitAsync"]));return(0,g.Z)({create:function(e){var t=e.name,i=e.symbol,r=e.tokens,o=e.swapFee,s=e.swapFeeManager,a=r.map((function(e){return e.address})),l=function(e){var t=e.map((function(e){var t=new(ye())(e.weight).multipliedBy(new(ye())(1e16));return fe.O$.from(t.toString())}));return(0,be.toNormalizedWeights)(t).map((function(e){return e.toString()}))}(r),d=(0,Ie.bA)(new(ye())(o),18);return n({args:[t,i,a,l,r.map((function(e){return Pe.d})),d.toString(),s,Ze()],toastText:"Create weighted pool ".concat(t," - ").concat(i),walletText:"Create weighted pool ".concat(t," - ").concat(i," ")})}},i)}var Fe=n(47568),Me=n(34051),ze=n.n(Me),Oe=n(88767),Be=n(51438),Ee=n(48694),Ue=new(function(){function e(){(0,Be.Z)(this,e)}return e.prototype.joinGetContractCallData=function(e,t){var n=t.maxAmountsIn.map((function(e){return e.address})),i=(0,Ee.Xp)(t.maxAmountsIn,e);return{assets:n,maxAmountsIn:i,userData:be.WeightedPoolEncoder.joinInit(i),type:"JoinPool"}},e}());var Ve=n(57290);var We=n(11163);function Ne(e){return e.sort((function(e,t){return e.address.toLowerCase()>t.address.toLowerCase()?1:-1}))}function Le(){var e=(0,h.$)(),t=e.tokens,n=e.poolName,r=e.getPoolSymbol,o=e.currentFee,s=e.feeManager,a=e.setPoolId,l=e.poolId,d=(0,We.useRouter)(),c=window.web3.currentProvider.isRabby,u=(0,p.useState)([]),x=u[0],b=u[1],j=(0,R.yA)().getToken,v=t.map((function(e){var t=j(e.address);return(0,m.Z)((0,g.Z)({},t),{amount:e.amount})})),w=(0,pe.r)(v,te.$.balancer.vault),A=w.hasApprovalForAmount,C=w.isLoading,k=Se(),T=k.create,I=(0,f.Z)(k,["create"]),P=function(e){var t=(0,ee.q)().userAddress,n=(0,h.$)().poolName,i=(0,ge.lC)({config:(0,m.Z)((0,g.Z)({},ge.Q_),{functionName:"joinPool"}),transactionType:"JOIN"}),r=i.submit,o=(i.submitAsync,(0,f.Z)(i,["submit","submitAsync"]));return(0,g.Z)({initJoinPool:function(i,o,s){var a=(0,Ve.TM)(o,s);r({args:[e,t,t,{assets:i.assets,maxAmountsIn:i.maxAmountsIn,userData:i.userData,fromInternalBalance:!1}],toastText:a,walletText:"Initialising ".concat(n," with ").concat(a)})}},o)}(l||""),S=P.initJoinPool,F=(0,f.Z)(P,["initJoinPool"]),M=function(e){var t=(0,R.yA)().getToken,n=e.map((function(e){return{address:e.address,amount:e.amount}})),i=e.map((function(e){return t(e.address)})).filter((function(e){return null!==e})),r={kind:"Init",tokenAmountsIn:n,maxAmountsIn:n};return(0,Oe.useQuery)(["initJoinGetContractCallData",r],(0,Fe.Z)(ze().mark((function e(){var t;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ue.joinGetContractCallData(i,r),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)}))),{enabled:n.length>0,staleTime:0,cacheTime:0})}(t),z=M.data,O=(M.isLoading,v.filter((function(e){return parseFloat(e.amount)>0})).map((function(e){return{token:e,isApproved:A(e.address,e.amount.toString())}})).filter((function(e){return!e.isApproved})));return(0,p.useEffect)((function(){if(!C){var e=[{id:"create-pool",tooltipText:"",type:"other",buttonText:"Create pool"},{id:"initialise-pool",tooltipText:"",type:"other",buttonText:"Initialise pool"}],t=!0,n=!1,i=void 0;try{for(var r,o=O[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value;e.unshift({id:"approve",tooltipText:"Approve the vault to spend this token",type:"tokenApproval",buttonText:"Approve this token",contractToApprove:te.$.balancer.vault,token:s.token})}}catch(a){n=!0,i=a}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}e.length<(null===x||void 0===x?void 0:x.length)||b(e)}}),[O.length,C]),(0,i.jsxs)(y.xu,{width:"full",children:[c&&"FANTOM"===te.$.chainName&&(0,i.jsx)(Z.bZ,{status:"warning",children:"We've recognised that you are using Rabby. Due to an issue with Rabby's gas estimation, you will need to adjust the gas limit to be 1x instead of the default of 2x that Rabby assigns to the create transaction."}),(0,i.jsx)(y.xu,{width:"full",pt:"4",children:(0,i.jsx)(he.b,{buttonSize:"lg",isLoading:I.isPending,loadingButtonText:"",completeButtonText:"Go to ".concat(n),onCompleteButtonClick:function(){d.replace("/pool/".concat(l))},onSubmit:function(e){if("create-pool"===e&&T({name:n||r(),symbol:r(),tokens:Ne(t),swapFee:(parseFloat(o)/100).toString(),swapFeeManager:s||""}),"initialise-pool"===e){var i=t.map((function(e){return j(e.address)}));z&&S(z,v,i.filter((function(e){return null!==e})))}},onConfirmed:function(e){if("create-pool"===e&&I.txReceipt){var t,n=null===(t=I.txReceipt.logs.find((function(e){return"0x3c13bc30b8e878c53fd2a36b679409c073afd75950be43d8858768e956fbc20e"===e.topics[0]})))||void 0===t?void 0:t.topics[1];n&&a(n)}},steps:x,queries:[(0,m.Z)((0,g.Z)({},I),{id:"create-pool"}),(0,m.Z)((0,g.Z)({},F),{id:"initialise-pool"})],isDisabled:!1})})]})}var Re=n(92528);function De(e){var t=function(){o("choose-tokens"),a&&l()},n=(0,T.Sx)({base:!0,md:!1}),r=(0,h.$)(),o=r.setActiveStep,s=r.poolName,a=r.isCreationComplete,l=r.resetPoolCreationState;return(0,i.jsx)(y.gC,{spacing:"4",width:"full",children:(0,i.jsxs)(y.gC,{spacing:"4",width:{base:"100%",md:"75%"},alignItems:"flex-start",children:[(0,i.jsxs)(y.gC,{position:"relative",spacing:"1",children:[!n&&(0,i.jsx)(x.hU,{"aria-label":"back-button",icon:(0,i.jsx)(Re.Z,{}),variant:"ghost",p:"0",width:"32px",height:"32px",minWidth:"32px",position:"absolute",top:"0",left:"-40px",onClick:t}),(0,i.jsxs)(y.Ug,{width:"full",children:[n&&(0,i.jsx)(x.hU,{"aria-label":"back-button",icon:(0,i.jsx)(Re.Z,{}),variant:"ghost",p:"0",width:"32px",height:"32px",minWidth:"32px",onClick:t}),(0,i.jsxs)(y.X6,{width:"full",textAlign:"left",size:"md",children:["Preview your pool - ",s]})]}),(0,i.jsx)(y.xv,{fontSize:"0.95rem",children:"Verify your pool fee and token selections before finalising pool creation. You can go back and change your selections as well."})]}),(0,i.jsxs)(y.gC,{width:"full",children:[(0,i.jsx)(ue,{}),(0,i.jsx)(ce,{}),(0,i.jsx)(Le,{})]})]})})}function Xe(e){var t=(0,h.$)(),n=t.activeStep;switch(t.creationExperience){case"simple":return(0,i.jsx)(le,{});case"advanced":return"preview"===n?(0,i.jsx)(De,{}):(0,i.jsx)(ae,{});default:return(0,i.jsx)(A,{})}}var Ye=!0,_e=function(){var e=(0,u.H)().chainId,t="Beethoven X | Create a pool",n="Unbound composability made simple. Build your own weighted pools with up to 8 tokens.";return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o(),{children:[(0,i.jsx)("title",{children:t}),(0,i.jsx)("meta",{name:"title",content:t}),(0,i.jsx)("meta",{property:"og:title",content:t}),(0,i.jsx)("meta",{property:"twitter:title",content:t}),(0,i.jsx)("meta",{name:"description",content:n}),(0,i.jsx)("meta",{property:"og:description",content:n}),(0,i.jsx)("meta",{property:"twitter:description",content:n})]}),(0,i.jsx)(s.y,{title:"Weighted pool creation",image:(0,i.jsx)(l(),{src:"10"===e?c.Z:d.Z,width:"208.62px",height:"68px"})}),(0,i.jsx)(q.xu,{children:(0,i.jsx)(h.Z,{children:(0,i.jsx)(y.xu,{mt:"8",children:(0,i.jsx)(Xe,{})})})})]})}}},function(e){e.O(0,[5907,1836,4868,111,6790,8959,5976,4897,9774,2888,179],(function(){return t=77664,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=compose-b51a998354265280.js.map